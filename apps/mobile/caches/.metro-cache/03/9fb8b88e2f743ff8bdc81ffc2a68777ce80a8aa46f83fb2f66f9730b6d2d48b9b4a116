{"dependencies":[{"name":"react","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":5,"column":0,"index":221},"end":{"line":5,"column":53,"index":274}}],"key":"RtGiGa+/H7VrI7GDQDLhO1UbpU8=","exportNames":["*"],"imports":1}},{"name":"./decode","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":7,"column":0,"index":276},"end":{"line":7,"column":30,"index":306}}],"key":"j0/VbmNCcVejnHfO9z9iIr7ef4M=","exportNames":["*"],"imports":1}},{"name":"../resolveSources","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":8,"column":0,"index":307},"end":{"line":8,"column":53,"index":360}}],"key":"7m4N6+CRIak9nzXMKU5eMYJ26bI=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  exports.useBlurhash = useBlurhash;\n  var _react = require(_dependencyMap[0], \"react\");\n  var _decode = require(_dependencyMap[1], \"./decode\");\n  var decode = _interopDefault(_decode);\n  var _resolveSources = require(_dependencyMap[2], \"../resolveSources\");\n  // adapted from https://gist.github.com/ngbrown/d62eb518753378eb0a9bf02bb4723235\n  // modified from https://gist.github.com/WorldMaker/a3cbe0059acd827edee568198376b95a\n  // https://github.com/woltapp/react-blurhash/issues/3\n\n  const DEFAULT_SIZE = {\n    width: 32,\n    height: 32\n  };\n\n  // We scale up the canvas to avoid an irritating visual glitch when animating in Chrome.\n  const scaleRatio = 10;\n  function useBlurhash(blurhash, punch = 1) {\n    punch = punch || 1;\n    const [uri, setUri] = (0, _react.useState)(null);\n    const isBlurhash = (blurhash?.uri && (0, _resolveSources.isBlurhashString)(blurhash.uri)) ?? false;\n    (0, _react.useEffect)(() => {\n      let isCanceled = false;\n      if (!blurhash || !blurhash.uri || !isBlurhash) {\n        return;\n      }\n      const strippedBlurhashString = blurhash.uri.replace(/blurhash:\\//, '');\n      const pixels = (0, decode.default)(strippedBlurhashString, blurhash.width ?? DEFAULT_SIZE.width, blurhash.height ?? DEFAULT_SIZE.height, punch);\n      const canvas = document.createElement('canvas');\n      const upscaledCanvas = document.createElement('canvas');\n      canvas.width = blurhash.width ?? DEFAULT_SIZE.width;\n      canvas.height = blurhash.height ?? DEFAULT_SIZE.height;\n      upscaledCanvas.width = (blurhash.width ?? DEFAULT_SIZE.width) * scaleRatio;\n      upscaledCanvas.height = (blurhash.height ?? DEFAULT_SIZE.height) * scaleRatio;\n      const context = canvas.getContext('2d');\n      if (!context) {\n        console.warn('Failed to decode blurhash');\n        return;\n      }\n      const imageData = context.createImageData(canvas.width, canvas.height);\n      imageData.data.set(pixels);\n      context.putImageData(imageData, 0, 0);\n      const upscaledContext = upscaledCanvas.getContext('2d');\n      if (!upscaledContext) {\n        console.warn('Failed to decode blurhash');\n        return;\n      }\n      upscaledContext.scale(scaleRatio, scaleRatio);\n      upscaledContext.drawImage(canvas, 0, 0);\n      upscaledCanvas.toBlob(blob => {\n        if (!isCanceled) {\n          setUri(oldUrl => {\n            if (oldUrl) {\n              URL.revokeObjectURL(oldUrl);\n            }\n            return blob ? URL.createObjectURL(blob) : oldUrl;\n          });\n        }\n      });\n      return function cleanupBlurhash() {\n        isCanceled = true;\n        setUri(oldUrl => {\n          if (oldUrl) {\n            URL.revokeObjectURL(oldUrl);\n          }\n          return null;\n        });\n      };\n    }, [blurhash?.uri, blurhash?.height, blurhash?.width, punch, isBlurhash]);\n    const source = (0, _react.useMemo)(() => uri ? {\n      uri\n    } : null, [uri]);\n    return [source, isBlurhash];\n  }\n});","lineCount":85,"map":[[12,2,18,0,"exports"],[12,9,18,0],[12,10,18,0,"useBlurhash"],[12,21,18,0],[12,24,18,0,"useBlurhash"],[12,35,18,0],[13,2,5,0],[13,6,5,0,"_react"],[13,12,5,0],[13,15,5,0,"require"],[13,22,5,0],[13,23,5,0,"_dependencyMap"],[13,37,5,0],[14,2,7,0],[14,6,7,0,"_decode"],[14,13,7,0],[14,16,7,0,"require"],[14,23,7,0],[14,24,7,0,"_dependencyMap"],[14,38,7,0],[15,2,7,0],[15,6,7,0,"decode"],[15,12,7,0],[15,15,7,0,"_interopDefault"],[15,30,7,0],[15,31,7,0,"_decode"],[15,38,7,0],[16,2,8,0],[16,6,8,0,"_resolveSources"],[16,21,8,0],[16,24,8,0,"require"],[16,31,8,0],[16,32,8,0,"_dependencyMap"],[16,46,8,0],[17,2,1,0],[18,2,2,0],[19,2,3,0],[21,2,10,0],[21,8,10,6,"DEFAULT_SIZE"],[21,20,10,18],[21,23,10,21],[22,4,11,2,"width"],[22,9,11,7],[22,11,11,9],[22,13,11,11],[23,4,12,2,"height"],[23,10,12,8],[23,12,12,10],[24,2,13,0],[24,3,13,1],[26,2,15,0],[27,2,16,0],[27,8,16,6,"scaleRatio"],[27,18,16,16],[27,21,16,19],[27,23,16,21],[28,2,18,7],[28,11,18,16,"useBlurhash"],[28,22,18,27,"useBlurhash"],[28,23,19,2,"blurhash"],[28,31,19,94],[28,33,20,2,"punch"],[28,38,20,15],[28,41,20,18],[28,42,20,19],[28,44,21,2],[29,4,22,2,"punch"],[29,9,22,7],[29,12,22,10,"punch"],[29,17,22,15],[29,21,22,19],[29,22,22,20],[30,4,24,2],[30,10,24,8],[30,11,24,9,"uri"],[30,14,24,12],[30,16,24,14,"setUri"],[30,22,24,20],[30,23,24,21],[30,26,24,24],[30,30,24,24,"useState"],[30,36,24,32],[30,37,24,32,"useState"],[30,45,24,32],[30,47,24,48],[30,51,24,52],[30,52,24,53],[31,4,25,2],[31,10,25,8,"isBlurhash"],[31,20,25,18],[31,23,25,21],[31,24,25,22,"blurhash"],[31,32,25,30],[31,34,25,32,"uri"],[31,37,25,35],[31,41,25,39],[31,45,25,39,"isBlurhashString"],[31,60,25,55],[31,61,25,55,"isBlurhashString"],[31,77,25,55],[31,79,25,56,"blurhash"],[31,87,25,64],[31,88,25,65,"uri"],[31,91,25,68],[31,92,25,69],[31,97,25,74],[31,102,25,79],[32,4,26,2],[32,8,26,2,"useEffect"],[32,14,26,11],[32,15,26,11,"useEffect"],[32,24,26,11],[32,26,26,12],[32,32,26,18],[33,6,27,4],[33,10,27,8,"isCanceled"],[33,20,27,18],[33,23,27,21],[33,28,27,26],[34,6,29,4],[34,10,29,8],[34,11,29,9,"blurhash"],[34,19,29,17],[34,23,29,21],[34,24,29,22,"blurhash"],[34,32,29,30],[34,33,29,31,"uri"],[34,36,29,34],[34,40,29,38],[34,41,29,39,"isBlurhash"],[34,51,29,49],[34,53,29,51],[35,8,30,6],[36,6,31,4],[37,6,32,4],[37,12,32,10,"strippedBlurhashString"],[37,34,32,32],[37,37,32,35,"blurhash"],[37,45,32,43],[37,46,32,44,"uri"],[37,49,32,47],[37,50,32,48,"replace"],[37,57,32,55],[37,58,32,56],[37,71,32,69],[37,73,32,71],[37,75,32,73],[37,76,32,74],[38,6,34,4],[38,12,34,10,"pixels"],[38,18,34,16],[38,21,34,19],[38,25,34,19,"decode"],[38,31,34,25],[38,32,34,25,"default"],[38,39,34,25],[38,41,35,6,"strippedBlurhashString"],[38,63,35,28],[38,65,36,6,"blurhash"],[38,73,36,14],[38,74,36,15,"width"],[38,79,36,20],[38,83,36,24,"DEFAULT_SIZE"],[38,95,36,36],[38,96,36,37,"width"],[38,101,36,42],[38,103,37,6,"blurhash"],[38,111,37,14],[38,112,37,15,"height"],[38,118,37,21],[38,122,37,25,"DEFAULT_SIZE"],[38,134,37,37],[38,135,37,38,"height"],[38,141,37,44],[38,143,38,6,"punch"],[38,148,39,4],[38,149,39,5],[39,6,41,4],[39,12,41,10,"canvas"],[39,18,41,16],[39,21,41,19,"document"],[39,29,41,27],[39,30,41,28,"createElement"],[39,43,41,41],[39,44,41,42],[39,52,41,50],[39,53,41,51],[40,6,42,4],[40,12,42,10,"upscaledCanvas"],[40,26,42,24],[40,29,42,27,"document"],[40,37,42,35],[40,38,42,36,"createElement"],[40,51,42,49],[40,52,42,50],[40,60,42,58],[40,61,42,59],[41,6,43,4,"canvas"],[41,12,43,10],[41,13,43,11,"width"],[41,18,43,16],[41,21,43,19,"blurhash"],[41,29,43,27],[41,30,43,28,"width"],[41,35,43,33],[41,39,43,37,"DEFAULT_SIZE"],[41,51,43,49],[41,52,43,50,"width"],[41,57,43,55],[42,6,44,4,"canvas"],[42,12,44,10],[42,13,44,11,"height"],[42,19,44,17],[42,22,44,20,"blurhash"],[42,30,44,28],[42,31,44,29,"height"],[42,37,44,35],[42,41,44,39,"DEFAULT_SIZE"],[42,53,44,51],[42,54,44,52,"height"],[42,60,44,58],[43,6,45,4,"upscaledCanvas"],[43,20,45,18],[43,21,45,19,"width"],[43,26,45,24],[43,29,45,27],[43,30,45,28,"blurhash"],[43,38,45,36],[43,39,45,37,"width"],[43,44,45,42],[43,48,45,46,"DEFAULT_SIZE"],[43,60,45,58],[43,61,45,59,"width"],[43,66,45,64],[43,70,45,68,"scaleRatio"],[43,80,45,78],[44,6,46,4,"upscaledCanvas"],[44,20,46,18],[44,21,46,19,"height"],[44,27,46,25],[44,30,46,28],[44,31,46,29,"blurhash"],[44,39,46,37],[44,40,46,38,"height"],[44,46,46,44],[44,50,46,48,"DEFAULT_SIZE"],[44,62,46,60],[44,63,46,61,"height"],[44,69,46,67],[44,73,46,71,"scaleRatio"],[44,83,46,81],[45,6,47,4],[45,12,47,10,"context"],[45,19,47,17],[45,22,47,20,"canvas"],[45,28,47,26],[45,29,47,27,"getContext"],[45,39,47,37],[45,40,47,38],[45,44,47,42],[45,45,47,43],[46,6,48,4],[46,10,48,8],[46,11,48,9,"context"],[46,18,48,16],[46,20,48,18],[47,8,49,6,"console"],[47,15,49,13],[47,16,49,14,"warn"],[47,20,49,18],[47,21,49,19],[47,48,49,46],[47,49,49,47],[48,8,50,6],[49,6,51,4],[50,6,52,4],[50,12,52,10,"imageData"],[50,21,52,19],[50,24,52,22,"context"],[50,31,52,29],[50,32,52,30,"createImageData"],[50,47,52,45],[50,48,52,46,"canvas"],[50,54,52,52],[50,55,52,53,"width"],[50,60,52,58],[50,62,52,60,"canvas"],[50,68,52,66],[50,69,52,67,"height"],[50,75,52,73],[50,76,52,74],[51,6,53,4,"imageData"],[51,15,53,13],[51,16,53,14,"data"],[51,20,53,18],[51,21,53,19,"set"],[51,24,53,22],[51,25,53,23,"pixels"],[51,31,53,29],[51,32,53,30],[52,6,54,4,"context"],[52,13,54,11],[52,14,54,12,"putImageData"],[52,26,54,24],[52,27,54,25,"imageData"],[52,36,54,34],[52,38,54,36],[52,39,54,37],[52,41,54,39],[52,42,54,40],[52,43,54,41],[53,6,55,4],[53,12,55,10,"upscaledContext"],[53,27,55,25],[53,30,55,28,"upscaledCanvas"],[53,44,55,42],[53,45,55,43,"getContext"],[53,55,55,53],[53,56,55,54],[53,60,55,58],[53,61,55,59],[54,6,56,4],[54,10,56,8],[54,11,56,9,"upscaledContext"],[54,26,56,24],[54,28,56,26],[55,8,57,6,"console"],[55,15,57,13],[55,16,57,14,"warn"],[55,20,57,18],[55,21,57,19],[55,48,57,46],[55,49,57,47],[56,8,58,6],[57,6,59,4],[58,6,60,4,"upscaledContext"],[58,21,60,19],[58,22,60,20,"scale"],[58,27,60,25],[58,28,60,26,"scaleRatio"],[58,38,60,36],[58,40,60,38,"scaleRatio"],[58,50,60,48],[58,51,60,49],[59,6,61,4,"upscaledContext"],[59,21,61,19],[59,22,61,20,"drawImage"],[59,31,61,29],[59,32,61,30,"canvas"],[59,38,61,36],[59,40,61,38],[59,41,61,39],[59,43,61,41],[59,44,61,42],[59,45,61,43],[60,6,62,4,"upscaledCanvas"],[60,20,62,18],[60,21,62,19,"toBlob"],[60,27,62,25],[60,28,62,27,"blob"],[60,32,62,31],[60,36,62,36],[61,8,63,6],[61,12,63,10],[61,13,63,11,"isCanceled"],[61,23,63,21],[61,25,63,23],[62,10,64,8,"setUri"],[62,16,64,14],[62,17,64,16,"oldUrl"],[62,23,64,22],[62,27,64,27],[63,12,65,10],[63,16,65,14,"oldUrl"],[63,22,65,20],[63,24,65,22],[64,14,66,12,"URL"],[64,17,66,15],[64,18,66,16,"revokeObjectURL"],[64,33,66,31],[64,34,66,32,"oldUrl"],[64,40,66,38],[64,41,66,39],[65,12,67,10],[66,12,68,10],[66,19,68,17,"blob"],[66,23,68,21],[66,26,68,24,"URL"],[66,29,68,27],[66,30,68,28,"createObjectURL"],[66,45,68,43],[66,46,68,44,"blob"],[66,50,68,48],[66,51,68,49],[66,54,68,52,"oldUrl"],[66,60,68,58],[67,10,69,8],[67,11,69,9],[67,12,69,10],[68,8,70,6],[69,6,71,4],[69,7,71,5],[69,8,71,6],[70,6,73,4],[70,13,73,11],[70,22,73,20,"cleanupBlurhash"],[70,37,73,35,"cleanupBlurhash"],[70,38,73,35],[70,40,73,38],[71,8,74,6,"isCanceled"],[71,18,74,16],[71,21,74,19],[71,25,74,23],[72,8,75,6,"setUri"],[72,14,75,12],[72,15,75,14,"oldUrl"],[72,21,75,20],[72,25,75,25],[73,10,76,8],[73,14,76,12,"oldUrl"],[73,20,76,18],[73,22,76,20],[74,12,77,10,"URL"],[74,15,77,13],[74,16,77,14,"revokeObjectURL"],[74,31,77,29],[74,32,77,30,"oldUrl"],[74,38,77,36],[74,39,77,37],[75,10,78,8],[76,10,79,8],[76,17,79,15],[76,21,79,19],[77,8,80,6],[77,9,80,7],[77,10,80,8],[78,6,81,4],[78,7,81,5],[79,4,82,2],[79,5,82,3],[79,7,82,5],[79,8,82,6,"blurhash"],[79,16,82,14],[79,18,82,16,"uri"],[79,21,82,19],[79,23,82,21,"blurhash"],[79,31,82,29],[79,33,82,31,"height"],[79,39,82,37],[79,41,82,39,"blurhash"],[79,49,82,47],[79,51,82,49,"width"],[79,56,82,54],[79,58,82,56,"punch"],[79,63,82,61],[79,65,82,63,"isBlurhash"],[79,75,82,73],[79,76,82,74],[79,77,82,75],[80,4,83,2],[80,10,83,8,"source"],[80,16,83,14],[80,19,83,17],[80,23,83,17,"useMemo"],[80,29,83,24],[80,30,83,24,"useMemo"],[80,37,83,24],[80,39,83,25],[80,45,83,32,"uri"],[80,48,83,35],[80,51,83,38],[81,6,83,40,"uri"],[82,4,83,44],[82,5,83,45],[82,8,83,48],[82,12,83,53],[82,14,83,55],[82,15,83,56,"uri"],[82,18,83,59],[82,19,83,60],[82,20,83,61],[83,4,84,2],[83,11,84,9],[83,12,84,10,"source"],[83,18,84,16],[83,20,84,18,"isBlurhash"],[83,30,84,28],[83,31,84,29],[84,2,85,0],[85,0,85,1],[85,3]],"functionMap":{"names":["<global>","useBlurhash","useEffect$argument_0","upscaledCanvas.toBlob$argument_0","setUri$argument_0","cleanupBlurhash","useMemo$argument_0"],"mappings":"AAA;OCiB;YCQ;0BCoC;eCE;SDK;KDE;WGE;aDE;OCK;KHC;GDC;yBKC,4BL;CDE"},"hasCjsExports":false},"type":"js/module"}]}