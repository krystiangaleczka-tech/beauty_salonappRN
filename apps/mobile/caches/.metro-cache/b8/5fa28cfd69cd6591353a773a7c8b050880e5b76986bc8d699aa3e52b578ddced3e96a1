{"dependencies":[],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  Object.defineProperty(exports, \"__esModule\", {\n    value: true\n  });\n  exports.VelocityTracker = void 0;\n  class VelocityTracker {\n    constructor() {\n      this.history = [];\n      this.lastPosition = undefined;\n      this.lastTimestamp = undefined;\n    }\n    add(position) {\n      const timestamp = new Date().valueOf();\n      if (this.lastPosition && this.lastTimestamp && timestamp > this.lastTimestamp) {\n        const diff = position - this.lastPosition;\n        if (diff > 0.001 || diff < -0.001) {\n          this.history.push(diff / (timestamp - this.lastTimestamp));\n        }\n      }\n      this.lastPosition = position;\n      this.lastTimestamp = timestamp;\n    }\n    estimateSpeed() {\n      const finalTrend = this.history.slice(-3);\n      const sum = finalTrend.reduce((r, v) => r + v, 0);\n      return sum / finalTrend.length;\n    }\n    reset() {\n      this.history = [];\n      this.lastPosition = undefined;\n      this.lastTimestamp = undefined;\n    }\n  }\n  exports.VelocityTracker = VelocityTracker;\n});","lineCount":35,"map":[[6,2,1,7],[6,8,1,13,"VelocityTracker"],[6,23,1,28],[6,24,1,29],[7,4,6,2,"constructor"],[7,15,6,13,"constructor"],[7,16,6,13],[7,18,6,16],[8,6,7,4],[8,10,7,8],[8,11,7,9,"history"],[8,18,7,16],[8,21,7,19],[8,23,7,21],[9,6,8,4],[9,10,8,8],[9,11,8,9,"lastPosition"],[9,23,8,21],[9,26,8,24,"undefined"],[9,35,8,33],[10,6,9,4],[10,10,9,8],[10,11,9,9,"lastTimestamp"],[10,24,9,22],[10,27,9,25,"undefined"],[10,36,9,34],[11,4,10,2],[12,4,12,2,"add"],[12,7,12,5,"add"],[12,8,12,6,"position"],[12,16,12,22],[12,18,12,24],[13,6,13,4],[13,12,13,10,"timestamp"],[13,21,13,19],[13,24,13,22],[13,28,13,26,"Date"],[13,32,13,30],[13,33,13,31],[13,34,13,32],[13,35,13,33,"valueOf"],[13,42,13,40],[13,43,13,41],[13,44,13,42],[14,6,14,4],[14,10,14,8],[14,14,14,12],[14,15,14,13,"lastPosition"],[14,27,14,25],[14,31,14,29],[14,35,14,33],[14,36,14,34,"lastTimestamp"],[14,49,14,47],[14,53,14,51,"timestamp"],[14,62,14,60],[14,65,14,63],[14,69,14,67],[14,70,14,68,"lastTimestamp"],[14,83,14,81],[14,85,14,83],[15,8,15,6],[15,14,15,12,"diff"],[15,18,15,16],[15,21,15,19,"position"],[15,29,15,27],[15,32,15,30],[15,36,15,34],[15,37,15,35,"lastPosition"],[15,49,15,47],[16,8,16,6],[16,12,16,10,"diff"],[16,16,16,14],[16,19,16,17],[16,24,16,22],[16,28,16,26,"diff"],[16,32,16,30],[16,35,16,33],[16,36,16,34],[16,41,16,39],[16,43,16,41],[17,10,17,8],[17,14,17,12],[17,15,17,13,"history"],[17,22,17,20],[17,23,17,21,"push"],[17,27,17,25],[17,28,17,26,"diff"],[17,32,17,30],[17,36,17,34,"timestamp"],[17,45,17,43],[17,48,17,46],[17,52,17,50],[17,53,17,51,"lastTimestamp"],[17,66,17,64],[17,67,17,65],[17,68,17,66],[18,8,18,6],[19,6,19,4],[20,6,20,4],[20,10,20,8],[20,11,20,9,"lastPosition"],[20,23,20,21],[20,26,20,24,"position"],[20,34,20,32],[21,6,21,4],[21,10,21,8],[21,11,21,9,"lastTimestamp"],[21,24,21,22],[21,27,21,25,"timestamp"],[21,36,21,34],[22,4,22,2],[23,4,24,2,"estimateSpeed"],[23,17,24,15,"estimateSpeed"],[23,18,24,15],[23,20,24,18],[24,6,25,4],[24,12,25,10,"finalTrend"],[24,22,25,20],[24,25,25,23],[24,29,25,27],[24,30,25,28,"history"],[24,37,25,35],[24,38,25,36,"slice"],[24,43,25,41],[24,44,25,42],[24,45,25,43],[24,46,25,44],[24,47,25,45],[25,6,26,4],[25,12,26,10,"sum"],[25,15,26,13],[25,18,26,16,"finalTrend"],[25,28,26,26],[25,29,26,27,"reduce"],[25,35,26,33],[25,36,26,34],[25,37,26,35,"r"],[25,38,26,36],[25,40,26,38,"v"],[25,41,26,39],[25,46,26,44,"r"],[25,47,26,45],[25,50,26,48,"v"],[25,51,26,49],[25,53,26,51],[25,54,26,52],[25,55,26,53],[26,6,27,4],[26,13,27,11,"sum"],[26,16,27,14],[26,19,27,17,"finalTrend"],[26,29,27,27],[26,30,27,28,"length"],[26,36,27,34],[27,4,28,2],[28,4,30,2,"reset"],[28,9,30,7,"reset"],[28,10,30,7],[28,12,30,10],[29,6,31,4],[29,10,31,8],[29,11,31,9,"history"],[29,18,31,16],[29,21,31,19],[29,23,31,21],[30,6,32,4],[30,10,32,8],[30,11,32,9,"lastPosition"],[30,23,32,21],[30,26,32,24,"undefined"],[30,35,32,33],[31,6,33,4],[31,10,33,8],[31,11,33,9,"lastTimestamp"],[31,24,33,22],[31,27,33,25,"undefined"],[31,36,33,34],[32,4,34,2],[33,2,35,0],[34,2,35,1,"exports"],[34,9,35,1],[34,10,35,1,"VelocityTracker"],[34,25,35,1],[34,28,35,1,"VelocityTracker"],[34,43,35,1],[35,0,35,1],[35,3]],"functionMap":{"names":["<global>","VelocityTracker","VelocityTracker#constructor","VelocityTracker#add","VelocityTracker#estimateSpeed","finalTrend.reduce$argument_0","VelocityTracker#reset"],"mappings":"AAA,OC;ECK;GDI;EEE;GFU;EGE;kCCE,eD;GHE;EKE;GLI;CDC"}},"type":"js/module"}]}