{"dependencies":[{"name":"expo-router","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":37,"index":37}}],"key":"/+ErnBisjrT6aDU+GRp5Qz/lYoY=","exportNames":["*"],"imports":1}},{"name":"react","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":38},"end":{"line":2,"column":66,"index":104}}],"key":"RtGiGa+/H7VrI7GDQDLhO1UbpU8=","exportNames":["*"],"imports":1}},{"name":"zustand","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":3,"column":0,"index":105},"end":{"line":3,"column":33,"index":138}}],"key":"POPvx7yS3Y3wz+S/9OAefiXNs0Q=","exportNames":["*"],"imports":1}},{"name":"react-native-web/dist/exports/Modal","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"Ezhl/vznHrlq0iqGXODlZeJLO5I=","exportNames":["*"],"imports":1}},{"name":"react-native-web/dist/exports/View","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"4kYBDC6LJJXoH7P9rWDi3vkLVB0=","exportNames":["*"],"imports":1}},{"name":"./store","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":5,"column":0,"index":183},"end":{"line":5,"column":62,"index":245}}],"key":"5APpJpQn7z9vMHIr4H9Bv6aaMsY=","exportNames":["*"],"imports":1}},{"name":"./tokenManager","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":6,"column":0,"index":246},"end":{"line":6,"column":76,"index":322}}],"key":"31ZF47OCFrIq5/Q3aCB7X0v9ugg=","exportNames":["*"],"imports":1}},{"name":"./secureStorage","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":7,"column":0,"index":323},"end":{"line":7,"column":48,"index":371}}],"key":"i/WIxrqWIisp/TkVGUz2jt3I0zA=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  var _s = $RefreshSig$(),\n    _s2 = $RefreshSig$();\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  Object.defineProperty(exports, \"default\", {\n    enumerable: true,\n    get: function () {\n      return _default;\n    }\n  });\n  Object.defineProperty(exports, \"useAuth\", {\n    enumerable: true,\n    get: function () {\n      return useAuth;\n    }\n  });\n  Object.defineProperty(exports, \"useRequireAuth\", {\n    enumerable: true,\n    get: function () {\n      return useRequireAuth;\n    }\n  });\n  require(_dependencyMap[0], \"expo-router\");\n  var _react = require(_dependencyMap[1], \"react\");\n  require(_dependencyMap[2], \"zustand\");\n  require(_dependencyMap[3], \"react-native-web/dist/exports/Modal\");\n  require(_dependencyMap[4], \"react-native-web/dist/exports/View\");\n  var _store = require(_dependencyMap[5], \"./store\");\n  var _tokenManager = require(_dependencyMap[6], \"./tokenManager\");\n  var _secureStorage = require(_dependencyMap[7], \"./secureStorage\");\n  /**\n   * This hook provides authentication functionality.\n   * It may be easier to use the `useAuthModal` or `useRequireAuth` hooks\n   * instead as those will also handle showing authentication to the user\n   * directly.\n   */\n  const useAuth = () => {\n    _s();\n    const {\n      isReady,\n      auth,\n      setAuth\n    } = (0, _store.useAuthStore)();\n    const {\n      isOpen,\n      close,\n      open\n    } = (0, _store.useAuthModal)();\n    const initiate = (0, _react.useCallback)(async () => {\n      try {\n        // Get valid auth data with automatic token refresh if expired\n        const auth = await (0, _tokenManager.getValidAuth)(true);\n        if (auth) {\n          setAuth(auth);\n        }\n      } catch (e) {\n        console.error('Error initializing auth:', e);\n      } finally {\n        _store.useAuthStore.setState({\n          isReady: true\n        });\n      }\n    }, [setAuth]);\n\n    // Set up token refresh interval\n    const [refreshInterval, setRefreshInterval] = (0, _react.useState)(null);\n    (0, _react.useEffect)(() => {\n      // Initialize authentication state when component mounts\n      initiate();\n\n      // Set up token refresh check every 5 minutes\n      const interval = setInterval(async () => {\n        try {\n          const authData = await (0, _secureStorage.secureGetItem)(_store.authKey);\n          if (!authData) return;\n          const auth = JSON.parse(authData);\n          if (!auth || !auth.jwt) return;\n\n          // If token is expired or will expire in the next 10 minutes (600 seconds)\n          if ((0, _tokenManager.isTokenExpired)(auth.jwt)) {\n            console.log('Token expired, refreshing...');\n            const newAuth = await (0, _tokenManager.refreshToken)(auth.jwt);\n            if (newAuth) {\n              setAuth(newAuth);\n            } else {\n              // If refresh fails, sign out\n              setAuth(null);\n            }\n          }\n        } catch (error) {\n          console.error('Error in token refresh interval:', error);\n        }\n      }, 5 * 60 * 1000); // Check every 5 minutes\n\n      setRefreshInterval(interval);\n\n      // Clean up interval on unmount\n      return () => {\n        if (refreshInterval) {\n          clearInterval(refreshInterval);\n        }\n      };\n    }, [initiate, setAuth]);\n    const signIn = (0, _react.useCallback)(() => {\n      open({\n        mode: 'signin'\n      });\n    }, [open]);\n    const signUp = (0, _react.useCallback)(() => {\n      open({\n        mode: 'signup'\n      });\n    }, [open]);\n    const signOut = (0, _react.useCallback)(() => {\n      setAuth(null);\n      close();\n    }, [close]);\n    return {\n      isReady,\n      isAuthenticated: isReady ? !!auth : null,\n      signIn,\n      signOut,\n      signUp,\n      auth,\n      setAuth,\n      initiate\n    };\n  };\n\n  /**\n   * This hook will automatically open the authentication modal if the user is not authenticated.\n   */\n  _s(useAuth, \"cBi71IkMF51Hg3e5/rgd81W+VNg=\", false, function () {\n    return [_store.useAuthStore, _store.useAuthModal];\n  });\n  const useRequireAuth = options => {\n    _s2();\n    const {\n      isAuthenticated,\n      isReady\n    } = useAuth();\n    const {\n      open\n    } = (0, _store.useAuthModal)();\n    (0, _react.useEffect)(() => {\n      if (!isAuthenticated && isReady) {\n        open({\n          mode: options?.mode\n        });\n      }\n    }, [isAuthenticated, open, options?.mode, isReady]);\n  };\n  _s2(useRequireAuth, \"Ut2Gv5Cru0XgoBi/l6NJFDPOPtQ=\", false, function () {\n    return [useAuth, _store.useAuthModal];\n  });\n  var _default = useAuth;\n});","lineCount":161,"map":[[9,2,114,0,"Object"],[9,8,114,0],[9,9,114,0,"defineProperty"],[9,23,114,0],[9,24,114,0,"exports"],[9,31,114,0],[10,4,114,0,"enumerable"],[10,14,114,0],[11,4,114,0,"get"],[11,7,114,0],[11,18,114,0,"get"],[11,19,114,0],[12,6,114,0],[12,13,114,0,"_default"],[12,21,114,0],[13,4,114,0],[14,2,114,0],[15,2,16,0,"Object"],[15,8,16,0],[15,9,16,0,"defineProperty"],[15,23,16,0],[15,24,16,0,"exports"],[15,31,16,0],[16,4,16,0,"enumerable"],[16,14,16,0],[17,4,16,0,"get"],[17,7,16,0],[17,18,16,0,"get"],[17,19,16,0],[18,6,16,0],[18,13,16,0,"useAuth"],[18,20,16,0],[19,4,16,0],[20,2,16,0],[21,2,103,0,"Object"],[21,8,103,0],[21,9,103,0,"defineProperty"],[21,23,103,0],[21,24,103,0,"exports"],[21,31,103,0],[22,4,103,0,"enumerable"],[22,14,103,0],[23,4,103,0,"get"],[23,7,103,0],[23,18,103,0,"get"],[23,19,103,0],[24,6,103,0],[24,13,103,0,"useRequireAuth"],[24,27,103,0],[25,4,103,0],[26,2,103,0],[27,2,1,0,"require"],[27,9,1,0],[27,10,1,0,"_dependencyMap"],[27,24,1,0],[28,2,2,0],[28,6,2,0,"_react"],[28,12,2,0],[28,15,2,0,"require"],[28,22,2,0],[28,23,2,0,"_dependencyMap"],[28,37,2,0],[29,2,3,0,"require"],[29,9,3,0],[29,10,3,0,"_dependencyMap"],[29,24,3,0],[30,2,3,33,"require"],[30,9,3,33],[30,10,3,33,"_dependencyMap"],[30,24,3,33],[31,2,3,33,"require"],[31,9,3,33],[31,10,3,33,"_dependencyMap"],[31,24,3,33],[32,2,5,0],[32,6,5,0,"_store"],[32,12,5,0],[32,15,5,0,"require"],[32,22,5,0],[32,23,5,0,"_dependencyMap"],[32,37,5,0],[33,2,6,0],[33,6,6,0,"_tokenManager"],[33,19,6,0],[33,22,6,0,"require"],[33,29,6,0],[33,30,6,0,"_dependencyMap"],[33,44,6,0],[34,2,7,0],[34,6,7,0,"_secureStorage"],[34,20,7,0],[34,23,7,0,"require"],[34,30,7,0],[34,31,7,0,"_dependencyMap"],[34,45,7,0],[35,2,10,0],[36,0,11,0],[37,0,12,0],[38,0,13,0],[39,0,14,0],[40,0,15,0],[41,2,16,7],[41,8,16,13,"useAuth"],[41,15,16,20],[41,18,16,23,"useAuth"],[41,19,16,23],[41,24,16,29],[42,4,16,29,"_s"],[42,6,16,29],[43,4,17,2],[43,10,17,8],[44,6,17,10,"isReady"],[44,13,17,17],[45,6,17,19,"auth"],[45,10,17,23],[46,6,17,25,"setAuth"],[47,4,17,33],[47,5,17,34],[47,8,17,37],[47,12,17,37,"useAuthStore"],[47,18,17,49],[47,19,17,49,"useAuthStore"],[47,31,17,49],[47,33,17,50],[47,34,17,51],[48,4,18,2],[48,10,18,8],[49,6,18,10,"isOpen"],[49,12,18,16],[50,6,18,18,"close"],[50,11,18,23],[51,6,18,25,"open"],[52,4,18,30],[52,5,18,31],[52,8,18,34],[52,12,18,34,"useAuthModal"],[52,18,18,46],[52,19,18,46,"useAuthModal"],[52,31,18,46],[52,33,18,47],[52,34,18,48],[53,4,20,2],[53,10,20,8,"initiate"],[53,18,20,16],[53,21,20,19],[53,25,20,19,"useCallback"],[53,31,20,30],[53,32,20,30,"useCallback"],[53,43,20,30],[53,45,20,31],[53,57,20,43],[54,6,21,4],[54,10,21,8],[55,8,22,6],[56,8,23,6],[56,14,23,12,"auth"],[56,18,23,16],[56,21,23,19],[56,27,23,25],[56,31,23,25,"getValidAuth"],[56,44,23,37],[56,45,23,37,"getValidAuth"],[56,57,23,37],[56,59,23,38],[56,63,23,42],[56,64,23,43],[57,8,24,6],[57,12,24,10,"auth"],[57,16,24,14],[57,18,24,16],[58,10,25,8,"setAuth"],[58,17,25,15],[58,18,25,16,"auth"],[58,22,25,20],[58,23,25,21],[59,8,26,6],[60,6,27,4],[60,7,27,5],[60,8,27,6],[60,15,27,13,"e"],[60,16,27,14],[60,18,27,16],[61,8,28,6,"console"],[61,15,28,13],[61,16,28,14,"error"],[61,21,28,19],[61,22,28,20],[61,48,28,46],[61,50,28,48,"e"],[61,51,28,49],[61,52,28,50],[62,6,29,4],[62,7,29,5],[62,16,29,14],[63,8,30,6,"useAuthStore"],[63,14,30,18],[63,15,30,18,"useAuthStore"],[63,27,30,18],[63,28,30,19,"setState"],[63,36,30,27],[63,37,30,28],[64,10,30,30,"isReady"],[64,17,30,37],[64,19,30,39],[65,8,30,44],[65,9,30,45],[65,10,30,46],[66,6,31,4],[67,4,32,2],[67,5,32,3],[67,7,32,5],[67,8,32,6,"setAuth"],[67,15,32,13],[67,16,32,14],[67,17,32,15],[69,4,34,2],[70,4,35,2],[70,10,35,8],[70,11,35,9,"refreshInterval"],[70,26,35,24],[70,28,35,26,"setRefreshInterval"],[70,46,35,44],[70,47,35,45],[70,50,35,48],[70,54,35,48,"useState"],[70,60,35,56],[70,61,35,56,"useState"],[70,69,35,56],[70,71,35,57],[70,75,35,61],[70,76,35,62],[71,4,37,2],[71,8,37,2,"useEffect"],[71,14,37,11],[71,15,37,11,"useEffect"],[71,24,37,11],[71,26,37,12],[71,32,37,18],[72,6,38,4],[73,6,39,4,"initiate"],[73,14,39,12],[73,15,39,13],[73,16,39,14],[75,6,41,4],[76,6,42,4],[76,12,42,10,"interval"],[76,20,42,18],[76,23,42,21,"setInterval"],[76,34,42,32],[76,35,42,33],[76,47,42,45],[77,8,43,6],[77,12,43,10],[78,10,44,8],[78,16,44,14,"authData"],[78,24,44,22],[78,27,44,25],[78,33,44,31],[78,37,44,31,"secureGetItem"],[78,51,44,44],[78,52,44,44,"secureGetItem"],[78,65,44,44],[78,67,44,45,"authKey"],[78,73,44,52],[78,74,44,52,"authKey"],[78,81,44,52],[78,82,44,53],[79,10,45,8],[79,14,45,12],[79,15,45,13,"authData"],[79,23,45,21],[79,25,45,23],[80,10,47,8],[80,16,47,14,"auth"],[80,20,47,18],[80,23,47,21,"JSON"],[80,27,47,25],[80,28,47,26,"parse"],[80,33,47,31],[80,34,47,32,"authData"],[80,42,47,40],[80,43,47,41],[81,10,48,8],[81,14,48,12],[81,15,48,13,"auth"],[81,19,48,17],[81,23,48,21],[81,24,48,22,"auth"],[81,28,48,26],[81,29,48,27,"jwt"],[81,32,48,30],[81,34,48,32],[83,10,50,8],[84,10,51,8],[84,14,51,12],[84,18,51,12,"isTokenExpired"],[84,31,51,26],[84,32,51,26,"isTokenExpired"],[84,46,51,26],[84,48,51,27,"auth"],[84,52,51,31],[84,53,51,32,"jwt"],[84,56,51,35],[84,57,51,36],[84,59,51,38],[85,12,52,10,"console"],[85,19,52,17],[85,20,52,18,"log"],[85,23,52,21],[85,24,52,22],[85,54,52,52],[85,55,52,53],[86,12,53,10],[86,18,53,16,"newAuth"],[86,25,53,23],[86,28,53,26],[86,34,53,32],[86,38,53,32,"refreshToken"],[86,51,53,44],[86,52,53,44,"refreshToken"],[86,64,53,44],[86,66,53,45,"auth"],[86,70,53,49],[86,71,53,50,"jwt"],[86,74,53,53],[86,75,53,54],[87,12,54,10],[87,16,54,14,"newAuth"],[87,23,54,21],[87,25,54,23],[88,14,55,12,"setAuth"],[88,21,55,19],[88,22,55,20,"newAuth"],[88,29,55,27],[88,30,55,28],[89,12,56,10],[89,13,56,11],[89,19,56,17],[90,14,57,12],[91,14,58,12,"setAuth"],[91,21,58,19],[91,22,58,20],[91,26,58,24],[91,27,58,25],[92,12,59,10],[93,10,60,8],[94,8,61,6],[94,9,61,7],[94,10,61,8],[94,17,61,15,"error"],[94,22,61,20],[94,24,61,22],[95,10,62,8,"console"],[95,17,62,15],[95,18,62,16,"error"],[95,23,62,21],[95,24,62,22],[95,58,62,56],[95,60,62,58,"error"],[95,65,62,63],[95,66,62,64],[96,8,63,6],[97,6,64,4],[97,7,64,5],[97,9,64,7],[97,10,64,8],[97,13,64,11],[97,15,64,13],[97,18,64,16],[97,22,64,20],[97,23,64,21],[97,24,64,22],[97,25,64,23],[99,6,66,4,"setRefreshInterval"],[99,24,66,22],[99,25,66,23,"interval"],[99,33,66,31],[99,34,66,32],[101,6,68,4],[102,6,69,4],[102,13,69,11],[102,19,69,17],[103,8,70,6],[103,12,70,10,"refreshInterval"],[103,27,70,25],[103,29,70,27],[104,10,71,8,"clearInterval"],[104,23,71,21],[104,24,71,22,"refreshInterval"],[104,39,71,37],[104,40,71,38],[105,8,72,6],[106,6,73,4],[106,7,73,5],[107,4,74,2],[107,5,74,3],[107,7,74,5],[107,8,74,6,"initiate"],[107,16,74,14],[107,18,74,16,"setAuth"],[107,25,74,23],[107,26,74,24],[107,27,74,25],[108,4,76,2],[108,10,76,8,"signIn"],[108,16,76,14],[108,19,76,17],[108,23,76,17,"useCallback"],[108,29,76,28],[108,30,76,28,"useCallback"],[108,41,76,28],[108,43,76,29],[108,49,76,35],[109,6,77,4,"open"],[109,10,77,8],[109,11,77,9],[110,8,77,11,"mode"],[110,12,77,15],[110,14,77,17],[111,6,77,26],[111,7,77,27],[111,8,77,28],[112,4,78,2],[112,5,78,3],[112,7,78,5],[112,8,78,6,"open"],[112,12,78,10],[112,13,78,11],[112,14,78,12],[113,4,79,2],[113,10,79,8,"signUp"],[113,16,79,14],[113,19,79,17],[113,23,79,17,"useCallback"],[113,29,79,28],[113,30,79,28,"useCallback"],[113,41,79,28],[113,43,79,29],[113,49,79,35],[114,6,80,4,"open"],[114,10,80,8],[114,11,80,9],[115,8,80,11,"mode"],[115,12,80,15],[115,14,80,17],[116,6,80,26],[116,7,80,27],[116,8,80,28],[117,4,81,2],[117,5,81,3],[117,7,81,5],[117,8,81,6,"open"],[117,12,81,10],[117,13,81,11],[117,14,81,12],[118,4,83,2],[118,10,83,8,"signOut"],[118,17,83,15],[118,20,83,18],[118,24,83,18,"useCallback"],[118,30,83,29],[118,31,83,29,"useCallback"],[118,42,83,29],[118,44,83,30],[118,50,83,36],[119,6,84,4,"setAuth"],[119,13,84,11],[119,14,84,12],[119,18,84,16],[119,19,84,17],[120,6,85,4,"close"],[120,11,85,9],[120,12,85,10],[120,13,85,11],[121,4,86,2],[121,5,86,3],[121,7,86,5],[121,8,86,6,"close"],[121,13,86,11],[121,14,86,12],[121,15,86,13],[122,4,88,2],[122,11,88,9],[123,6,89,4,"isReady"],[123,13,89,11],[124,6,90,4,"isAuthenticated"],[124,21,90,19],[124,23,90,21,"isReady"],[124,30,90,28],[124,33,90,31],[124,34,90,32],[124,35,90,33,"auth"],[124,39,90,37],[124,42,90,40],[124,46,90,44],[125,6,91,4,"signIn"],[125,12,91,10],[126,6,92,4,"signOut"],[126,13,92,11],[127,6,93,4,"signUp"],[127,12,93,10],[128,6,94,4,"auth"],[128,10,94,8],[129,6,95,4,"setAuth"],[129,13,95,11],[130,6,96,4,"initiate"],[131,4,97,2],[131,5,97,3],[132,2,98,0],[132,3,98,1],[134,2,100,0],[135,0,101,0],[136,0,102,0],[137,2,100,0,"_s"],[137,4,100,0],[137,5,16,13,"useAuth"],[137,12,16,20],[138,4,16,20],[138,12,17,37,"useAuthStore"],[138,18,17,49],[138,19,17,49,"useAuthStore"],[138,31,17,49],[138,33,18,34,"useAuthModal"],[138,39,18,46],[138,40,18,46,"useAuthModal"],[138,52,18,46],[139,2,18,46],[140,2,103,7],[140,8,103,13,"useRequireAuth"],[140,22,103,27],[140,25,103,31,"options"],[140,32,103,38],[140,36,103,43],[141,4,103,43,"_s2"],[141,7,103,43],[142,4,104,2],[142,10,104,8],[143,6,104,10,"isAuthenticated"],[143,21,104,25],[144,6,104,27,"isReady"],[145,4,104,35],[145,5,104,36],[145,8,104,39,"useAuth"],[145,15,104,46],[145,16,104,47],[145,17,104,48],[146,4,105,2],[146,10,105,8],[147,6,105,10,"open"],[148,4,105,15],[148,5,105,16],[148,8,105,19],[148,12,105,19,"useAuthModal"],[148,18,105,31],[148,19,105,31,"useAuthModal"],[148,31,105,31],[148,33,105,32],[148,34,105,33],[149,4,107,2],[149,8,107,2,"useEffect"],[149,14,107,11],[149,15,107,11,"useEffect"],[149,24,107,11],[149,26,107,12],[149,32,107,18],[150,6,108,4],[150,10,108,8],[150,11,108,9,"isAuthenticated"],[150,26,108,24],[150,30,108,28,"isReady"],[150,37,108,35],[150,39,108,37],[151,8,109,6,"open"],[151,12,109,10],[151,13,109,11],[152,10,109,13,"mode"],[152,14,109,17],[152,16,109,19,"options"],[152,23,109,26],[152,25,109,28,"mode"],[153,8,109,33],[153,9,109,34],[153,10,109,35],[154,6,110,4],[155,4,111,2],[155,5,111,3],[155,7,111,5],[155,8,111,6,"isAuthenticated"],[155,23,111,21],[155,25,111,23,"open"],[155,29,111,27],[155,31,111,29,"options"],[155,38,111,36],[155,40,111,38,"mode"],[155,44,111,42],[155,46,111,44,"isReady"],[155,53,111,51],[155,54,111,52],[155,55,111,53],[156,2,112,0],[156,3,112,1],[157,2,112,2,"_s2"],[157,5,112,2],[157,6,103,13,"useRequireAuth"],[157,20,103,27],[158,4,103,27],[158,12,104,39,"useAuth"],[158,19,104,46],[158,21,105,19,"useAuthModal"],[158,27,105,31],[158,28,105,31,"useAuthModal"],[158,40,105,31],[159,2,105,31],[160,2,114,0],[160,6,114,0,"_default"],[160,14,114,0],[160,17,114,15,"useAuth"],[160,24,114,22],[161,0,114,23],[161,3]],"functionMap":{"names":["<global>","useAuth","initiate","useEffect$argument_0","setInterval$argument_0","<anonymous>","signIn","signUp","signOut","useRequireAuth"],"mappings":"AAA;uBCe;+BCI;GDY;YEK;iCCK;KDsB;WEK;KFI;GFC;6BKE;GLE;6BMC;GNE;8BOE;GPG;CDY;8BSK;YNI;GMI;CTC"},"hasCjsExports":false},"type":"js/module"}]}