{"dependencies":[{"name":"@babel/runtime/helpers/interopRequireDefault","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"kslwqCIsh6ew+I1KeA1rlVRjsAk=","exportNames":["*"]}},{"name":"react","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":5,"column":0,"index":221},"end":{"line":5,"column":53,"index":274}}],"key":"RtGiGa+/H7VrI7GDQDLhO1UbpU8=","exportNames":["*"]}},{"name":"./decode","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":7,"column":0,"index":276},"end":{"line":7,"column":30,"index":306}}],"key":"j0/VbmNCcVejnHfO9z9iIr7ef4M=","exportNames":["*"]}},{"name":"../resolveSources","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":8,"column":0,"index":307},"end":{"line":8,"column":53,"index":360}}],"key":"7m4N6+CRIak9nzXMKU5eMYJ26bI=","exportNames":["*"]}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  var _interopRequireDefault = require(_dependencyMap[0], \"@babel/runtime/helpers/interopRequireDefault\");\n  Object.defineProperty(exports, \"__esModule\", {\n    value: true\n  });\n  exports.useBlurhash = useBlurhash;\n  var _react = require(_dependencyMap[1], \"react\");\n  var _decode = _interopRequireDefault(require(_dependencyMap[2], \"./decode\"));\n  var _resolveSources = require(_dependencyMap[3], \"../resolveSources\");\n  // adapted from https://gist.github.com/ngbrown/d62eb518753378eb0a9bf02bb4723235\n  // modified from https://gist.github.com/WorldMaker/a3cbe0059acd827edee568198376b95a\n  // https://github.com/woltapp/react-blurhash/issues/3\n\n  const DEFAULT_SIZE = {\n    width: 32,\n    height: 32\n  };\n\n  // We scale up the canvas to avoid an irritating visual glitch when animating in Chrome.\n  const scaleRatio = 10;\n  function useBlurhash(blurhash, punch = 1) {\n    punch = punch || 1;\n    const [uri, setUri] = (0, _react.useState)(null);\n    const isBlurhash = (blurhash?.uri && (0, _resolveSources.isBlurhashString)(blurhash.uri)) ?? false;\n    (0, _react.useEffect)(() => {\n      let isCanceled = false;\n      if (!blurhash || !blurhash.uri || !isBlurhash) {\n        return;\n      }\n      const strippedBlurhashString = blurhash.uri.replace(/blurhash:\\//, '');\n      const pixels = (0, _decode.default)(strippedBlurhashString, blurhash.width ?? DEFAULT_SIZE.width, blurhash.height ?? DEFAULT_SIZE.height, punch);\n      const canvas = document.createElement('canvas');\n      const upscaledCanvas = document.createElement('canvas');\n      canvas.width = blurhash.width ?? DEFAULT_SIZE.width;\n      canvas.height = blurhash.height ?? DEFAULT_SIZE.height;\n      upscaledCanvas.width = (blurhash.width ?? DEFAULT_SIZE.width) * scaleRatio;\n      upscaledCanvas.height = (blurhash.height ?? DEFAULT_SIZE.height) * scaleRatio;\n      const context = canvas.getContext('2d');\n      if (!context) {\n        console.warn('Failed to decode blurhash');\n        return;\n      }\n      const imageData = context.createImageData(canvas.width, canvas.height);\n      imageData.data.set(pixels);\n      context.putImageData(imageData, 0, 0);\n      const upscaledContext = upscaledCanvas.getContext('2d');\n      if (!upscaledContext) {\n        console.warn('Failed to decode blurhash');\n        return;\n      }\n      upscaledContext.scale(scaleRatio, scaleRatio);\n      upscaledContext.drawImage(canvas, 0, 0);\n      upscaledCanvas.toBlob(blob => {\n        if (!isCanceled) {\n          setUri(oldUrl => {\n            if (oldUrl) {\n              URL.revokeObjectURL(oldUrl);\n            }\n            return blob ? URL.createObjectURL(blob) : oldUrl;\n          });\n        }\n      });\n      return function cleanupBlurhash() {\n        isCanceled = true;\n        setUri(oldUrl => {\n          if (oldUrl) {\n            URL.revokeObjectURL(oldUrl);\n          }\n          return null;\n        });\n      };\n    }, [blurhash?.uri, blurhash?.height, blurhash?.width, punch, isBlurhash]);\n    const source = (0, _react.useMemo)(() => uri ? {\n      uri\n    } : null, [uri]);\n    return [source, isBlurhash];\n  }\n});","lineCount":78,"map":[[7,2,5,0],[7,6,5,0,"_react"],[7,12,5,0],[7,15,5,0,"require"],[7,22,5,0],[7,23,5,0,"_dependencyMap"],[7,37,5,0],[8,2,7,0],[8,6,7,0,"_decode"],[8,13,7,0],[8,16,7,0,"_interopRequireDefault"],[8,38,7,0],[8,39,7,0,"require"],[8,46,7,0],[8,47,7,0,"_dependencyMap"],[8,61,7,0],[9,2,8,0],[9,6,8,0,"_resolveSources"],[9,21,8,0],[9,24,8,0,"require"],[9,31,8,0],[9,32,8,0,"_dependencyMap"],[9,46,8,0],[10,2,1,0],[11,2,2,0],[12,2,3,0],[14,2,10,0],[14,8,10,6,"DEFAULT_SIZE"],[14,20,10,18],[14,23,10,21],[15,4,11,2,"width"],[15,9,11,7],[15,11,11,9],[15,13,11,11],[16,4,12,2,"height"],[16,10,12,8],[16,12,12,10],[17,2,13,0],[17,3,13,1],[19,2,15,0],[20,2,16,0],[20,8,16,6,"scaleRatio"],[20,18,16,16],[20,21,16,19],[20,23,16,21],[21,2,18,7],[21,11,18,16,"useBlurhash"],[21,22,18,27,"useBlurhash"],[21,23,19,2,"blurhash"],[21,31,19,94],[21,33,20,2,"punch"],[21,38,20,15],[21,41,20,18],[21,42,20,19],[21,44,21,2],[22,4,22,2,"punch"],[22,9,22,7],[22,12,22,10,"punch"],[22,17,22,15],[22,21,22,19],[22,22,22,20],[23,4,24,2],[23,10,24,8],[23,11,24,9,"uri"],[23,14,24,12],[23,16,24,14,"setUri"],[23,22,24,20],[23,23,24,21],[23,26,24,24],[23,30,24,24,"useState"],[23,45,24,32],[23,47,24,48],[23,51,24,52],[23,52,24,53],[24,4,25,2],[24,10,25,8,"isBlurhash"],[24,20,25,18],[24,23,25,21],[24,24,25,22,"blurhash"],[24,32,25,30],[24,34,25,32,"uri"],[24,37,25,35],[24,41,25,39],[24,45,25,39,"isBlurhashString"],[24,77,25,55],[24,79,25,56,"blurhash"],[24,87,25,64],[24,88,25,65,"uri"],[24,91,25,68],[24,92,25,69],[24,97,25,74],[24,102,25,79],[25,4,26,2],[25,8,26,2,"useEffect"],[25,24,26,11],[25,26,26,12],[25,32,26,18],[26,6,27,4],[26,10,27,8,"isCanceled"],[26,20,27,18],[26,23,27,21],[26,28,27,26],[27,6,29,4],[27,10,29,8],[27,11,29,9,"blurhash"],[27,19,29,17],[27,23,29,21],[27,24,29,22,"blurhash"],[27,32,29,30],[27,33,29,31,"uri"],[27,36,29,34],[27,40,29,38],[27,41,29,39,"isBlurhash"],[27,51,29,49],[27,53,29,51],[28,8,30,6],[29,6,31,4],[30,6,32,4],[30,12,32,10,"strippedBlurhashString"],[30,34,32,32],[30,37,32,35,"blurhash"],[30,45,32,43],[30,46,32,44,"uri"],[30,49,32,47],[30,50,32,48,"replace"],[30,57,32,55],[30,58,32,56],[30,71,32,69],[30,73,32,71],[30,75,32,73],[30,76,32,74],[31,6,34,4],[31,12,34,10,"pixels"],[31,18,34,16],[31,21,34,19],[31,25,34,19,"decode"],[31,40,34,25],[31,42,35,6,"strippedBlurhashString"],[31,64,35,28],[31,66,36,6,"blurhash"],[31,74,36,14],[31,75,36,15,"width"],[31,80,36,20],[31,84,36,24,"DEFAULT_SIZE"],[31,96,36,36],[31,97,36,37,"width"],[31,102,36,42],[31,104,37,6,"blurhash"],[31,112,37,14],[31,113,37,15,"height"],[31,119,37,21],[31,123,37,25,"DEFAULT_SIZE"],[31,135,37,37],[31,136,37,38,"height"],[31,142,37,44],[31,144,38,6,"punch"],[31,149,39,4],[31,150,39,5],[32,6,41,4],[32,12,41,10,"canvas"],[32,18,41,16],[32,21,41,19,"document"],[32,29,41,27],[32,30,41,28,"createElement"],[32,43,41,41],[32,44,41,42],[32,52,41,50],[32,53,41,51],[33,6,42,4],[33,12,42,10,"upscaledCanvas"],[33,26,42,24],[33,29,42,27,"document"],[33,37,42,35],[33,38,42,36,"createElement"],[33,51,42,49],[33,52,42,50],[33,60,42,58],[33,61,42,59],[34,6,43,4,"canvas"],[34,12,43,10],[34,13,43,11,"width"],[34,18,43,16],[34,21,43,19,"blurhash"],[34,29,43,27],[34,30,43,28,"width"],[34,35,43,33],[34,39,43,37,"DEFAULT_SIZE"],[34,51,43,49],[34,52,43,50,"width"],[34,57,43,55],[35,6,44,4,"canvas"],[35,12,44,10],[35,13,44,11,"height"],[35,19,44,17],[35,22,44,20,"blurhash"],[35,30,44,28],[35,31,44,29,"height"],[35,37,44,35],[35,41,44,39,"DEFAULT_SIZE"],[35,53,44,51],[35,54,44,52,"height"],[35,60,44,58],[36,6,45,4,"upscaledCanvas"],[36,20,45,18],[36,21,45,19,"width"],[36,26,45,24],[36,29,45,27],[36,30,45,28,"blurhash"],[36,38,45,36],[36,39,45,37,"width"],[36,44,45,42],[36,48,45,46,"DEFAULT_SIZE"],[36,60,45,58],[36,61,45,59,"width"],[36,66,45,64],[36,70,45,68,"scaleRatio"],[36,80,45,78],[37,6,46,4,"upscaledCanvas"],[37,20,46,18],[37,21,46,19,"height"],[37,27,46,25],[37,30,46,28],[37,31,46,29,"blurhash"],[37,39,46,37],[37,40,46,38,"height"],[37,46,46,44],[37,50,46,48,"DEFAULT_SIZE"],[37,62,46,60],[37,63,46,61,"height"],[37,69,46,67],[37,73,46,71,"scaleRatio"],[37,83,46,81],[38,6,47,4],[38,12,47,10,"context"],[38,19,47,17],[38,22,47,20,"canvas"],[38,28,47,26],[38,29,47,27,"getContext"],[38,39,47,37],[38,40,47,38],[38,44,47,42],[38,45,47,43],[39,6,48,4],[39,10,48,8],[39,11,48,9,"context"],[39,18,48,16],[39,20,48,18],[40,8,49,6,"console"],[40,15,49,13],[40,16,49,14,"warn"],[40,20,49,18],[40,21,49,19],[40,48,49,46],[40,49,49,47],[41,8,50,6],[42,6,51,4],[43,6,52,4],[43,12,52,10,"imageData"],[43,21,52,19],[43,24,52,22,"context"],[43,31,52,29],[43,32,52,30,"createImageData"],[43,47,52,45],[43,48,52,46,"canvas"],[43,54,52,52],[43,55,52,53,"width"],[43,60,52,58],[43,62,52,60,"canvas"],[43,68,52,66],[43,69,52,67,"height"],[43,75,52,73],[43,76,52,74],[44,6,53,4,"imageData"],[44,15,53,13],[44,16,53,14,"data"],[44,20,53,18],[44,21,53,19,"set"],[44,24,53,22],[44,25,53,23,"pixels"],[44,31,53,29],[44,32,53,30],[45,6,54,4,"context"],[45,13,54,11],[45,14,54,12,"putImageData"],[45,26,54,24],[45,27,54,25,"imageData"],[45,36,54,34],[45,38,54,36],[45,39,54,37],[45,41,54,39],[45,42,54,40],[45,43,54,41],[46,6,55,4],[46,12,55,10,"upscaledContext"],[46,27,55,25],[46,30,55,28,"upscaledCanvas"],[46,44,55,42],[46,45,55,43,"getContext"],[46,55,55,53],[46,56,55,54],[46,60,55,58],[46,61,55,59],[47,6,56,4],[47,10,56,8],[47,11,56,9,"upscaledContext"],[47,26,56,24],[47,28,56,26],[48,8,57,6,"console"],[48,15,57,13],[48,16,57,14,"warn"],[48,20,57,18],[48,21,57,19],[48,48,57,46],[48,49,57,47],[49,8,58,6],[50,6,59,4],[51,6,60,4,"upscaledContext"],[51,21,60,19],[51,22,60,20,"scale"],[51,27,60,25],[51,28,60,26,"scaleRatio"],[51,38,60,36],[51,40,60,38,"scaleRatio"],[51,50,60,48],[51,51,60,49],[52,6,61,4,"upscaledContext"],[52,21,61,19],[52,22,61,20,"drawImage"],[52,31,61,29],[52,32,61,30,"canvas"],[52,38,61,36],[52,40,61,38],[52,41,61,39],[52,43,61,41],[52,44,61,42],[52,45,61,43],[53,6,62,4,"upscaledCanvas"],[53,20,62,18],[53,21,62,19,"toBlob"],[53,27,62,25],[53,28,62,27,"blob"],[53,32,62,31],[53,36,62,36],[54,8,63,6],[54,12,63,10],[54,13,63,11,"isCanceled"],[54,23,63,21],[54,25,63,23],[55,10,64,8,"setUri"],[55,16,64,14],[55,17,64,16,"oldUrl"],[55,23,64,22],[55,27,64,27],[56,12,65,10],[56,16,65,14,"oldUrl"],[56,22,65,20],[56,24,65,22],[57,14,66,12,"URL"],[57,17,66,15],[57,18,66,16,"revokeObjectURL"],[57,33,66,31],[57,34,66,32,"oldUrl"],[57,40,66,38],[57,41,66,39],[58,12,67,10],[59,12,68,10],[59,19,68,17,"blob"],[59,23,68,21],[59,26,68,24,"URL"],[59,29,68,27],[59,30,68,28,"createObjectURL"],[59,45,68,43],[59,46,68,44,"blob"],[59,50,68,48],[59,51,68,49],[59,54,68,52,"oldUrl"],[59,60,68,58],[60,10,69,8],[60,11,69,9],[60,12,69,10],[61,8,70,6],[62,6,71,4],[62,7,71,5],[62,8,71,6],[63,6,73,4],[63,13,73,11],[63,22,73,20,"cleanupBlurhash"],[63,37,73,35,"cleanupBlurhash"],[63,38,73,35],[63,40,73,38],[64,8,74,6,"isCanceled"],[64,18,74,16],[64,21,74,19],[64,25,74,23],[65,8,75,6,"setUri"],[65,14,75,12],[65,15,75,14,"oldUrl"],[65,21,75,20],[65,25,75,25],[66,10,76,8],[66,14,76,12,"oldUrl"],[66,20,76,18],[66,22,76,20],[67,12,77,10,"URL"],[67,15,77,13],[67,16,77,14,"revokeObjectURL"],[67,31,77,29],[67,32,77,30,"oldUrl"],[67,38,77,36],[67,39,77,37],[68,10,78,8],[69,10,79,8],[69,17,79,15],[69,21,79,19],[70,8,80,6],[70,9,80,7],[70,10,80,8],[71,6,81,4],[71,7,81,5],[72,4,82,2],[72,5,82,3],[72,7,82,5],[72,8,82,6,"blurhash"],[72,16,82,14],[72,18,82,16,"uri"],[72,21,82,19],[72,23,82,21,"blurhash"],[72,31,82,29],[72,33,82,31,"height"],[72,39,82,37],[72,41,82,39,"blurhash"],[72,49,82,47],[72,51,82,49,"width"],[72,56,82,54],[72,58,82,56,"punch"],[72,63,82,61],[72,65,82,63,"isBlurhash"],[72,75,82,73],[72,76,82,74],[72,77,82,75],[73,4,83,2],[73,10,83,8,"source"],[73,16,83,14],[73,19,83,17],[73,23,83,17,"useMemo"],[73,37,83,24],[73,39,83,25],[73,45,83,32,"uri"],[73,48,83,35],[73,51,83,38],[74,6,83,40,"uri"],[75,4,83,44],[75,5,83,45],[75,8,83,48],[75,12,83,53],[75,14,83,55],[75,15,83,56,"uri"],[75,18,83,59],[75,19,83,60],[75,20,83,61],[76,4,84,2],[76,11,84,9],[76,12,84,10,"source"],[76,18,84,16],[76,20,84,18,"isBlurhash"],[76,30,84,28],[76,31,84,29],[77,2,85,0],[78,0,85,1],[78,3]],"functionMap":{"names":["<global>","useBlurhash","useEffect$argument_0","upscaledCanvas.toBlob$argument_0","setUri$argument_0","cleanupBlurhash","useMemo$argument_0"],"mappings":"AAA;OCiB;YCQ;0BCoC;eCE;SDK;KDE;WGE;aDE;OCK;KHC;GDC;yBKC,4BL;CDE"}},"type":"js/module"}]}