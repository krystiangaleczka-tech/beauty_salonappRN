{"dependencies":[{"name":"@babel/runtime/helpers/classCallCheck","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"yg7e6laZwmpbIvId5jovq9ugXp8=","exportNames":["*"],"imports":1}},{"name":"@babel/runtime/helpers/createClass","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"Z6pzkVZ2fvxBLkFTgVVOy4UDj30=","exportNames":["*"],"imports":1}},{"name":"@babel/runtime/helpers/classPrivateFieldLooseBase","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"jktBven9cFmiXr10q2uuMiBaNBg=","exportNames":["*"],"imports":1}},{"name":"@babel/runtime/helpers/classPrivateFieldLooseKey","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"YYsVumDWjUPySlBONhl8so2wff4=","exportNames":["*"],"imports":1}},{"name":"./utils.js","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":20},"end":{"line":2,"column":54,"index":74}}],"key":"NIaSEHO1E48gsZc7jH9Ex1xTHgE=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  var _gcTimeout; // src/removable.ts\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  Object.defineProperty(exports, \"Removable\", {\n    enumerable: true,\n    get: function () {\n      return Removable;\n    }\n  });\n  var _babelRuntimeHelpersClassCallCheck = require(_dependencyMap[0], \"@babel/runtime/helpers/classCallCheck\");\n  var _classCallCheck = _interopDefault(_babelRuntimeHelpersClassCallCheck);\n  var _babelRuntimeHelpersCreateClass = require(_dependencyMap[1], \"@babel/runtime/helpers/createClass\");\n  var _createClass = _interopDefault(_babelRuntimeHelpersCreateClass);\n  var _babelRuntimeHelpersClassPrivateFieldLooseBase = require(_dependencyMap[2], \"@babel/runtime/helpers/classPrivateFieldLooseBase\");\n  var _classPrivateFieldLooseBase = _interopDefault(_babelRuntimeHelpersClassPrivateFieldLooseBase);\n  var _babelRuntimeHelpersClassPrivateFieldLooseKey = require(_dependencyMap[3], \"@babel/runtime/helpers/classPrivateFieldLooseKey\");\n  var _classPrivateFieldLooseKey = _interopDefault(_babelRuntimeHelpersClassPrivateFieldLooseKey);\n  var _utilsJs = require(_dependencyMap[4], \"./utils.js\");\n  var Removable = (_gcTimeout = /*#__PURE__*/(0, _classPrivateFieldLooseKey.default)(\"gcTimeout\"), /*#__PURE__*/function () {\n    function Removable() {\n      (0, _classCallCheck.default)(this, Removable);\n      Object.defineProperty(this, _gcTimeout, {\n        writable: true,\n        value: void 0\n      });\n    }\n    return (0, _createClass.default)(Removable, [{\n      key: \"destroy\",\n      value: function destroy() {\n        this.clearGcTimeout();\n      }\n    }, {\n      key: \"scheduleGc\",\n      value: function scheduleGc() {\n        this.clearGcTimeout();\n        if ((0, _utilsJs.isValidTimeout)(this.gcTime)) {\n          (0, _classPrivateFieldLooseBase.default)(this, _gcTimeout)[_gcTimeout] = setTimeout(() => {\n            this.optionalRemove();\n          }, this.gcTime);\n        }\n      }\n    }, {\n      key: \"updateGcTime\",\n      value: function updateGcTime(newGcTime) {\n        this.gcTime = Math.max(this.gcTime || 0, newGcTime ?? (_utilsJs.isServer ? Infinity : 5 * 60 * 1e3));\n      }\n    }, {\n      key: \"clearGcTimeout\",\n      value: function clearGcTimeout() {\n        if ((0, _classPrivateFieldLooseBase.default)(this, _gcTimeout)[_gcTimeout]) {\n          clearTimeout((0, _classPrivateFieldLooseBase.default)(this, _gcTimeout)[_gcTimeout]);\n          (0, _classPrivateFieldLooseBase.default)(this, _gcTimeout)[_gcTimeout] = void 0;\n        }\n      }\n    }]);\n  }());\n});","lineCount":66,"map":[[4,18,1,0],[5,2,1,0,"Object"],[5,8,1,0],[5,9,1,0,"defineProperty"],[5,23,1,0],[5,24,1,0,"exports"],[5,31,1,0],[6,4,1,0,"value"],[6,9,1,0],[7,2,1,0],[8,2,1,0],[8,11,1,0,"_interopDefault"],[8,27,1,0,"e"],[8,28,1,0],[9,4,1,0],[9,11,1,0,"e"],[9,12,1,0],[9,16,1,0,"e"],[9,17,1,0],[9,18,1,0,"__esModule"],[9,28,1,0],[9,31,1,0,"e"],[9,32,1,0],[10,6,1,0,"default"],[10,13,1,0],[10,15,1,0,"e"],[11,4,1,0],[12,2,1,0],[13,2,29,0,"Object"],[13,8,29,0],[13,9,29,0,"defineProperty"],[13,23,29,0],[13,24,29,0,"exports"],[13,31,29,0],[14,4,29,0,"enumerable"],[14,14,29,0],[15,4,29,0,"get"],[15,7,29,0],[15,18,29,0,"get"],[15,19,29,0],[16,6,29,0],[16,13,30,2,"Removable"],[16,22,30,11],[17,4,30,11],[18,2,30,11],[19,2,31,2],[19,6,31,2,"_babelRuntimeHelpersClassCallCheck"],[19,40,31,2],[19,43,31,2,"require"],[19,50,31,2],[19,51,31,2,"_dependencyMap"],[19,65,31,2],[20,2,31,2],[20,6,31,2,"_classCallCheck"],[20,21,31,2],[20,24,31,2,"_interopDefault"],[20,39,31,2],[20,40,31,2,"_babelRuntimeHelpersClassCallCheck"],[20,74,31,2],[21,2,31,2],[21,6,31,2,"_babelRuntimeHelpersCreateClass"],[21,37,31,2],[21,40,31,2,"require"],[21,47,31,2],[21,48,31,2,"_dependencyMap"],[21,62,31,2],[22,2,31,2],[22,6,31,2,"_createClass"],[22,18,31,2],[22,21,31,2,"_interopDefault"],[22,36,31,2],[22,37,31,2,"_babelRuntimeHelpersCreateClass"],[22,68,31,2],[23,2,31,2],[23,6,31,2,"_babelRuntimeHelpersClassPrivateFieldLooseBase"],[23,52,31,2],[23,55,31,2,"require"],[23,62,31,2],[23,63,31,2,"_dependencyMap"],[23,77,31,2],[24,2,31,2],[24,6,31,2,"_classPrivateFieldLooseBase"],[24,33,31,2],[24,36,31,2,"_interopDefault"],[24,51,31,2],[24,52,31,2,"_babelRuntimeHelpersClassPrivateFieldLooseBase"],[24,98,31,2],[25,2,31,2],[25,6,31,2,"_babelRuntimeHelpersClassPrivateFieldLooseKey"],[25,51,31,2],[25,54,31,2,"require"],[25,61,31,2],[25,62,31,2,"_dependencyMap"],[25,76,31,2],[26,2,31,2],[26,6,31,2,"_classPrivateFieldLooseKey"],[26,32,31,2],[26,35,31,2,"_interopDefault"],[26,50,31,2],[26,51,31,2,"_babelRuntimeHelpersClassPrivateFieldLooseKey"],[26,96,31,2],[27,2,2,0],[27,6,2,0,"_utilsJs"],[27,14,2,0],[27,17,2,0,"require"],[27,24,2,0],[27,25,2,0,"_dependencyMap"],[27,39,2,0],[28,2,3,0],[28,6,3,4,"Removable"],[28,15,3,13],[28,19,3,13,"_gcTimeout"],[28,29,3,13],[28,49,3,13,"_classPrivateFieldLooseKey"],[28,75,3,13],[28,76,3,13,"default"],[28,83,3,13],[29,4,3,13],[29,13,3,13,"Removable"],[29,23,3,13],[30,6,3,13],[30,10,3,13,"_classCallCheck"],[30,25,3,13],[30,26,3,13,"default"],[30,33,3,13],[30,41,3,13,"Removable"],[30,50,3,13],[31,6,3,13,"Object"],[31,12,3,13],[31,13,3,13,"defineProperty"],[31,27,3,13],[31,34,3,13,"_gcTimeout"],[31,44,3,13],[32,8,3,13,"writable"],[32,16,3,13],[33,8,3,13,"value"],[33,13,3,13],[34,6,3,13],[35,4,3,13],[36,4,3,13],[36,15,3,13,"_createClass"],[36,27,3,13],[36,28,3,13,"default"],[36,35,3,13],[36,37,3,13,"Removable"],[36,46,3,13],[37,6,3,13,"key"],[37,9,3,13],[38,6,3,13,"value"],[38,11,3,13],[38,13,5,2],[38,22,5,2,"destroy"],[38,29,5,9,"destroy"],[38,30,5,9],[38,32,5,12],[39,8,6,4],[39,12,6,8],[39,13,6,9,"clearGcTimeout"],[39,27,6,23],[39,28,6,24],[39,29,6,25],[40,6,7,2],[41,4,7,3],[42,6,7,3,"key"],[42,9,7,3],[43,6,7,3,"value"],[43,11,7,3],[43,13,8,2],[43,22,8,2,"scheduleGc"],[43,32,8,12,"scheduleGc"],[43,33,8,12],[43,35,8,15],[44,8,9,4],[44,12,9,8],[44,13,9,9,"clearGcTimeout"],[44,27,9,23],[44,28,9,24],[44,29,9,25],[45,8,10,4],[45,12,10,8],[45,16,10,8,"isValidTimeout"],[45,24,10,22],[45,25,10,22,"isValidTimeout"],[45,39,10,22],[45,41,10,23],[45,45,10,27],[45,46,10,28,"gcTime"],[45,52,10,34],[45,53,10,35],[45,55,10,37],[46,10,11,6],[46,14,11,6,"_classPrivateFieldLooseBase"],[46,41,11,6],[46,42,11,6,"default"],[46,49,11,6],[46,55,11,10],[46,57,11,10,"_gcTimeout"],[46,67,11,10],[46,69,11,10,"_gcTimeout"],[46,79,11,10],[46,83,11,24,"setTimeout"],[46,93,11,34],[46,94,11,35],[46,100,11,41],[47,12,12,8],[47,16,12,12],[47,17,12,13,"optionalRemove"],[47,31,12,27],[47,32,12,28],[47,33,12,29],[48,10,13,6],[48,11,13,7],[48,13,13,9],[48,17,13,13],[48,18,13,14,"gcTime"],[48,24,13,20],[48,25,13,21],[49,8,14,4],[50,6,15,2],[51,4,15,3],[52,6,15,3,"key"],[52,9,15,3],[53,6,15,3,"value"],[53,11,15,3],[53,13,16,2],[53,22,16,2,"updateGcTime"],[53,34,16,14,"updateGcTime"],[53,35,16,15,"newGcTime"],[53,44,16,24],[53,46,16,26],[54,8,17,4],[54,12,17,8],[54,13,17,9,"gcTime"],[54,19,17,15],[54,22,17,18,"Math"],[54,26,17,22],[54,27,17,23,"max"],[54,30,17,26],[54,31,18,6],[54,35,18,10],[54,36,18,11,"gcTime"],[54,42,18,17],[54,46,18,21],[54,47,18,22],[54,49,19,6,"newGcTime"],[54,58,19,15],[54,63,19,20,"isServer"],[54,71,19,28],[54,72,19,28,"isServer"],[54,80,19,28],[54,83,19,31,"Infinity"],[54,91,19,39],[54,94,19,42],[54,95,19,43],[54,98,19,46],[54,100,19,48],[54,103,19,51],[54,106,19,54],[54,107,20,4],[54,108,20,5],[55,6,21,2],[56,4,21,3],[57,6,21,3,"key"],[57,9,21,3],[58,6,21,3,"value"],[58,11,21,3],[58,13,22,2],[58,22,22,2,"clearGcTimeout"],[58,36,22,16,"clearGcTimeout"],[58,37,22,16],[58,39,22,19],[59,8,23,4],[59,16,23,4,"_classPrivateFieldLooseBase"],[59,43,23,4],[59,44,23,4,"default"],[59,51,23,4],[59,53,23,8],[59,57,23,12],[59,59,23,12,"_gcTimeout"],[59,69,23,12],[59,71,23,12,"_gcTimeout"],[59,81,23,12],[59,84,23,25],[60,10,24,6,"clearTimeout"],[60,22,24,18],[60,27,24,18,"_classPrivateFieldLooseBase"],[60,54,24,18],[60,55,24,18,"default"],[60,62,24,18],[60,64,24,19],[60,68,24,23],[60,70,24,23,"_gcTimeout"],[60,80,24,23],[60,82,24,23,"_gcTimeout"],[60,92,24,23],[60,93,24,34],[60,94,24,35],[61,10,25,6],[61,14,25,6,"_classPrivateFieldLooseBase"],[61,41,25,6],[61,42,25,6,"default"],[61,49,25,6],[61,55,25,10],[61,57,25,10,"_gcTimeout"],[61,67,25,10],[61,69,25,10,"_gcTimeout"],[61,79,25,10],[61,83,25,24],[61,88,25,29],[61,89,25,30],[62,8,26,4],[63,6,27,2],[64,4,27,3],[65,2,27,3],[65,6,28,1],[66,0,28,2],[66,3]],"functionMap":{"names":["<global>","Removable","Removable#destroy","Removable#scheduleGc","setTimeout$argument_0","Removable#updateGcTime","Removable#clearGcTimeout"],"mappings":"AAA;gBCE;ECE;GDE;EEC;mCCG;ODE;GFE;EIC;GJK;EKC;GLK;CDC"},"hasCjsExports":false},"type":"js/module"}]}