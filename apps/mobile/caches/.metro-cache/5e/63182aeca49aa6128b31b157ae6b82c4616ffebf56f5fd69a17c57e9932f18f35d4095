{"dependencies":[{"name":"./utils.js","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":20},"end":{"line":2,"column":54,"index":74}}],"key":"NIaSEHO1E48gsZc7jH9Ex1xTHgE=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  Object.defineProperty(exports, \"Removable\", {\n    enumerable: true,\n    get: function () {\n      return Removable;\n    }\n  });\n  var _utilsJs = require(_dependencyMap[0], \"./utils.js\");\n  // src/removable.ts\n\n  var Removable = class {\n    #gcTimeout;\n    destroy() {\n      this.clearGcTimeout();\n    }\n    scheduleGc() {\n      this.clearGcTimeout();\n      if ((0, _utilsJs.isValidTimeout)(this.gcTime)) {\n        this.#gcTimeout = setTimeout(() => {\n          this.optionalRemove();\n        }, this.gcTime);\n      }\n    }\n    updateGcTime(newGcTime) {\n      this.gcTime = Math.max(this.gcTime || 0, newGcTime ?? (_utilsJs.isServer ? Infinity : 5 * 60 * 1e3));\n    }\n    clearGcTimeout() {\n      if (this.#gcTimeout) {\n        clearTimeout(this.#gcTimeout);\n        this.#gcTimeout = void 0;\n      }\n    }\n  };\n});","lineCount":39,"map":[[7,2,29,0,"Object"],[7,8,29,0],[7,9,29,0,"defineProperty"],[7,23,29,0],[7,24,29,0,"exports"],[7,31,29,0],[8,4,29,0,"enumerable"],[8,14,29,0],[9,4,29,0,"get"],[9,7,29,0],[9,18,29,0,"get"],[9,19,29,0],[10,6,29,0],[10,13,30,2,"Removable"],[10,22,30,11],[11,4,30,11],[12,2,30,11],[13,2,2,0],[13,6,2,0,"_utilsJs"],[13,14,2,0],[13,17,2,0,"require"],[13,24,2,0],[13,25,2,0,"_dependencyMap"],[13,39,2,0],[14,2,1,0],[16,2,3,0],[16,6,3,4,"Removable"],[16,15,3,13],[16,18,3,16],[16,24,3,22],[17,4,4,2],[17,5,4,3,"gcTimeout"],[17,14,4,12],[18,4,5,2,"destroy"],[18,11,5,9,"destroy"],[18,12,5,9],[18,14,5,12],[19,6,6,4],[19,10,6,8],[19,11,6,9,"clearGcTimeout"],[19,25,6,23],[19,26,6,24],[19,27,6,25],[20,4,7,2],[21,4,8,2,"scheduleGc"],[21,14,8,12,"scheduleGc"],[21,15,8,12],[21,17,8,15],[22,6,9,4],[22,10,9,8],[22,11,9,9,"clearGcTimeout"],[22,25,9,23],[22,26,9,24],[22,27,9,25],[23,6,10,4],[23,10,10,8],[23,14,10,8,"isValidTimeout"],[23,22,10,22],[23,23,10,22,"isValidTimeout"],[23,37,10,22],[23,39,10,23],[23,43,10,27],[23,44,10,28,"gcTime"],[23,50,10,34],[23,51,10,35],[23,53,10,37],[24,8,11,6],[24,12,11,10],[24,13,11,11],[24,14,11,12,"gcTimeout"],[24,23,11,21],[24,26,11,24,"setTimeout"],[24,36,11,34],[24,37,11,35],[24,43,11,41],[25,10,12,8],[25,14,12,12],[25,15,12,13,"optionalRemove"],[25,29,12,27],[25,30,12,28],[25,31,12,29],[26,8,13,6],[26,9,13,7],[26,11,13,9],[26,15,13,13],[26,16,13,14,"gcTime"],[26,22,13,20],[26,23,13,21],[27,6,14,4],[28,4,15,2],[29,4,16,2,"updateGcTime"],[29,16,16,14,"updateGcTime"],[29,17,16,15,"newGcTime"],[29,26,16,24],[29,28,16,26],[30,6,17,4],[30,10,17,8],[30,11,17,9,"gcTime"],[30,17,17,15],[30,20,17,18,"Math"],[30,24,17,22],[30,25,17,23,"max"],[30,28,17,26],[30,29,18,6],[30,33,18,10],[30,34,18,11,"gcTime"],[30,40,18,17],[30,44,18,21],[30,45,18,22],[30,47,19,6,"newGcTime"],[30,56,19,15],[30,61,19,20,"isServer"],[30,69,19,28],[30,70,19,28,"isServer"],[30,78,19,28],[30,81,19,31,"Infinity"],[30,89,19,39],[30,92,19,42],[30,93,19,43],[30,96,19,46],[30,98,19,48],[30,101,19,51],[30,104,19,54],[30,105,20,4],[30,106,20,5],[31,4,21,2],[32,4,22,2,"clearGcTimeout"],[32,18,22,16,"clearGcTimeout"],[32,19,22,16],[32,21,22,19],[33,6,23,4],[33,10,23,8],[33,14,23,12],[33,15,23,13],[33,16,23,14,"gcTimeout"],[33,25,23,23],[33,27,23,25],[34,8,24,6,"clearTimeout"],[34,20,24,18],[34,21,24,19],[34,25,24,23],[34,26,24,24],[34,27,24,25,"gcTimeout"],[34,36,24,34],[34,37,24,35],[35,8,25,6],[35,12,25,10],[35,13,25,11],[35,14,25,12,"gcTimeout"],[35,23,25,21],[35,26,25,24],[35,31,25,29],[35,32,25,30],[36,6,26,4],[37,4,27,2],[38,2,28,0],[38,3,28,1],[39,0,28,2],[39,3]],"functionMap":{"names":["<global>","Removable","Removable#destroy","Removable#scheduleGc","setTimeout$argument_0","Removable#updateGcTime","Removable#clearGcTimeout"],"mappings":"AAA;gBCE;ECE;GDE;EEC;mCCG;ODE;GFE;EIC;GJK;EKC;GLK;CDC"},"hasCjsExports":false},"type":"js/module"}]}