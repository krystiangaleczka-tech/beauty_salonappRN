{"dependencies":[{"name":"@motionone/utils","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":40,"index":40}}],"key":"+655Tbr0Dg/RFFwL7HMoKgGI11s=","exportNames":["*"],"imports":1}},{"name":"./defaults.es.js","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":41},"end":{"line":2,"column":44,"index":85}}],"key":"sXu5haMZSrfx+OcglF9dkC9Zjtc=","exportNames":["*"],"imports":1}},{"name":"./utils.es.js","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":3,"column":0,"index":86},"end":{"line":3,"column":49,"index":135}}],"key":"gRapQ4WU/D/V6JM7hgxnSUEK99g=","exportNames":["*"],"imports":1}},{"name":"../utils/has-reached-target.es.js","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":4,"column":0,"index":136},"end":{"line":4,"column":69,"index":205}}],"key":"lfgSEBb6aIFX94HWgj86PK5+9RM=","exportNames":["*"],"imports":1}},{"name":"../utils/velocity.es.js","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":5,"column":0,"index":206},"end":{"line":5,"column":64,"index":270}}],"key":"5wl8xMuuUGwnN/lo3MUUrJTooFs=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  Object.defineProperty(exports, \"spring\", {\n    enumerable: true,\n    get: function () {\n      return spring;\n    }\n  });\n  var _motiononeUtils = require(_dependencyMap[0], \"@motionone/utils\");\n  var _defaultsEsJs = require(_dependencyMap[1], \"./defaults.es.js\");\n  var _utilsEsJs = require(_dependencyMap[2], \"./utils.es.js\");\n  var _utilsHasReachedTargetEsJs = require(_dependencyMap[3], \"../utils/has-reached-target.es.js\");\n  var _utilsVelocityEsJs = require(_dependencyMap[4], \"../utils/velocity.es.js\");\n  const spring = ({\n    stiffness = _defaultsEsJs.defaults.stiffness,\n    damping = _defaultsEsJs.defaults.damping,\n    mass = _defaultsEsJs.defaults.mass,\n    from = 0,\n    to = 1,\n    velocity = 0.0,\n    restSpeed,\n    restDistance\n  } = {}) => {\n    velocity = velocity ? _motiononeUtils.time.s(velocity) : 0.0;\n    const state = {\n      done: false,\n      hasReachedTarget: false,\n      current: from,\n      target: to\n    };\n    const initialDelta = to - from;\n    const undampedAngularFreq = Math.sqrt(stiffness / mass) / 1000;\n    const dampingRatio = (0, _utilsEsJs.calcDampingRatio)(stiffness, damping, mass);\n    const isGranularScale = Math.abs(initialDelta) < 5;\n    restSpeed || (restSpeed = isGranularScale ? 0.01 : 2);\n    restDistance || (restDistance = isGranularScale ? 0.005 : 0.5);\n    let resolveSpring;\n    if (dampingRatio < 1) {\n      const angularFreq = undampedAngularFreq * Math.sqrt(1 - dampingRatio * dampingRatio);\n      // Underdamped spring (bouncy)\n      resolveSpring = t => to - Math.exp(-dampingRatio * undampedAngularFreq * t) * ((-velocity + dampingRatio * undampedAngularFreq * initialDelta) / angularFreq * Math.sin(angularFreq * t) + initialDelta * Math.cos(angularFreq * t));\n    } else {\n      // Critically damped spring\n      resolveSpring = t => {\n        return to - Math.exp(-undampedAngularFreq * t) * (initialDelta + (-velocity + undampedAngularFreq * initialDelta) * t);\n      };\n    }\n    return t => {\n      state.current = resolveSpring(t);\n      const currentVelocity = t === 0 ? velocity : (0, _utilsVelocityEsJs.calcGeneratorVelocity)(resolveSpring, t, state.current);\n      const isBelowVelocityThreshold = Math.abs(currentVelocity) <= restSpeed;\n      const isBelowDisplacementThreshold = Math.abs(to - state.current) <= restDistance;\n      state.done = isBelowVelocityThreshold && isBelowDisplacementThreshold;\n      state.hasReachedTarget = (0, _utilsHasReachedTargetEsJs.hasReachedTarget)(from, to, state.current);\n      return state;\n    };\n  };\n});","lineCount":62,"map":[[7,2,53,0,"Object"],[7,8,53,0],[7,9,53,0,"defineProperty"],[7,23,53,0],[7,24,53,0,"exports"],[7,31,53,0],[8,4,53,0,"enumerable"],[8,14,53,0],[9,4,53,0,"get"],[9,7,53,0],[9,18,53,0,"get"],[9,19,53,0],[10,6,53,0],[10,13,53,9,"spring"],[10,19,53,15],[11,4,53,15],[12,2,53,15],[13,2,1,0],[13,6,1,0,"_motiononeUtils"],[13,21,1,0],[13,24,1,0,"require"],[13,31,1,0],[13,32,1,0,"_dependencyMap"],[13,46,1,0],[14,2,2,0],[14,6,2,0,"_defaultsEsJs"],[14,19,2,0],[14,22,2,0,"require"],[14,29,2,0],[14,30,2,0,"_dependencyMap"],[14,44,2,0],[15,2,3,0],[15,6,3,0,"_utilsEsJs"],[15,16,3,0],[15,19,3,0,"require"],[15,26,3,0],[15,27,3,0,"_dependencyMap"],[15,41,3,0],[16,2,4,0],[16,6,4,0,"_utilsHasReachedTargetEsJs"],[16,32,4,0],[16,35,4,0,"require"],[16,42,4,0],[16,43,4,0,"_dependencyMap"],[16,57,4,0],[17,2,5,0],[17,6,5,0,"_utilsVelocityEsJs"],[17,24,5,0],[17,27,5,0,"require"],[17,34,5,0],[17,35,5,0,"_dependencyMap"],[17,49,5,0],[18,2,7,0],[18,8,7,6,"spring"],[18,14,7,12],[18,17,7,15,"spring"],[18,18,7,16],[19,4,7,18,"stiffness"],[19,13,7,27],[19,16,7,30,"defaults"],[19,29,7,38],[19,30,7,38,"defaults"],[19,38,7,38],[19,39,7,39,"stiffness"],[19,48,7,48],[20,4,7,50,"damping"],[20,11,7,57],[20,14,7,60,"defaults"],[20,27,7,68],[20,28,7,68,"defaults"],[20,36,7,68],[20,37,7,69,"damping"],[20,44,7,76],[21,4,7,78,"mass"],[21,8,7,82],[21,11,7,85,"defaults"],[21,24,7,93],[21,25,7,93,"defaults"],[21,33,7,93],[21,34,7,94,"mass"],[21,38,7,98],[22,4,7,100,"from"],[22,8,7,104],[22,11,7,107],[22,12,7,108],[23,4,7,110,"to"],[23,6,7,112],[23,9,7,115],[23,10,7,116],[24,4,7,118,"velocity"],[24,12,7,126],[24,15,7,129],[24,18,7,132],[25,4,7,134,"restSpeed"],[25,13,7,143],[26,4,7,145,"restDistance"],[27,2,7,159],[27,3,7,160],[27,6,7,163],[27,7,7,164],[27,8,7,165],[27,13,7,170],[28,4,8,4,"velocity"],[28,12,8,12],[28,15,8,15,"velocity"],[28,23,8,23],[28,26,8,26,"time"],[28,41,8,30],[28,42,8,30,"time"],[28,46,8,30],[28,47,8,31,"s"],[28,48,8,32],[28,49,8,33,"velocity"],[28,57,8,41],[28,58,8,42],[28,61,8,45],[28,64,8,48],[29,4,9,4],[29,10,9,10,"state"],[29,15,9,15],[29,18,9,18],[30,6,10,8,"done"],[30,10,10,12],[30,12,10,14],[30,17,10,19],[31,6,11,8,"hasReachedTarget"],[31,22,11,24],[31,24,11,26],[31,29,11,31],[32,6,12,8,"current"],[32,13,12,15],[32,15,12,17,"from"],[32,19,12,21],[33,6,13,8,"target"],[33,12,13,14],[33,14,13,16,"to"],[34,4,14,4],[34,5,14,5],[35,4,15,4],[35,10,15,10,"initialDelta"],[35,22,15,22],[35,25,15,25,"to"],[35,27,15,27],[35,30,15,30,"from"],[35,34,15,34],[36,4,16,4],[36,10,16,10,"undampedAngularFreq"],[36,29,16,29],[36,32,16,32,"Math"],[36,36,16,36],[36,37,16,37,"sqrt"],[36,41,16,41],[36,42,16,42,"stiffness"],[36,51,16,51],[36,54,16,54,"mass"],[36,58,16,58],[36,59,16,59],[36,62,16,62],[36,66,16,66],[37,4,17,4],[37,10,17,10,"dampingRatio"],[37,22,17,22],[37,25,17,25],[37,29,17,25,"calcDampingRatio"],[37,39,17,41],[37,40,17,41,"calcDampingRatio"],[37,56,17,41],[37,58,17,42,"stiffness"],[37,67,17,51],[37,69,17,53,"damping"],[37,76,17,60],[37,78,17,62,"mass"],[37,82,17,66],[37,83,17,67],[38,4,18,4],[38,10,18,10,"isGranularScale"],[38,25,18,25],[38,28,18,28,"Math"],[38,32,18,32],[38,33,18,33,"abs"],[38,36,18,36],[38,37,18,37,"initialDelta"],[38,49,18,49],[38,50,18,50],[38,53,18,53],[38,54,18,54],[39,4,19,4,"restSpeed"],[39,13,19,13],[39,18,19,18,"restSpeed"],[39,27,19,27],[39,30,19,30,"isGranularScale"],[39,45,19,45],[39,48,19,48],[39,52,19,52],[39,55,19,55],[39,56,19,56],[39,57,19,57],[40,4,20,4,"restDistance"],[40,16,20,16],[40,21,20,21,"restDistance"],[40,33,20,33],[40,36,20,36,"isGranularScale"],[40,51,20,51],[40,54,20,54],[40,59,20,59],[40,62,20,62],[40,65,20,65],[40,66,20,66],[41,4,21,4],[41,8,21,8,"resolveSpring"],[41,21,21,21],[42,4,22,4],[42,8,22,8,"dampingRatio"],[42,20,22,20],[42,23,22,23],[42,24,22,24],[42,26,22,26],[43,6,23,8],[43,12,23,14,"angularFreq"],[43,23,23,25],[43,26,23,28,"undampedAngularFreq"],[43,45,23,47],[43,48,23,50,"Math"],[43,52,23,54],[43,53,23,55,"sqrt"],[43,57,23,59],[43,58,23,60],[43,59,23,61],[43,62,23,64,"dampingRatio"],[43,74,23,76],[43,77,23,79,"dampingRatio"],[43,89,23,91],[43,90,23,92],[44,6,24,8],[45,6,25,8,"resolveSpring"],[45,19,25,21],[45,22,25,25,"t"],[45,23,25,26],[45,27,25,31,"to"],[45,29,25,33],[45,32,26,12,"Math"],[45,36,26,16],[45,37,26,17,"exp"],[45,40,26,20],[45,41,26,21],[45,42,26,22,"dampingRatio"],[45,54,26,34],[45,57,26,37,"undampedAngularFreq"],[45,76,26,56],[45,79,26,59,"t"],[45,80,26,60],[45,81,26,61],[45,85,27,18],[45,86,27,19],[45,87,27,20,"velocity"],[45,95,27,28],[45,98,27,31,"dampingRatio"],[45,110,27,43],[45,113,27,46,"undampedAngularFreq"],[45,132,27,65],[45,135,27,68,"initialDelta"],[45,147,27,80],[45,151,28,20,"angularFreq"],[45,162,28,31],[45,165,29,20,"Math"],[45,169,29,24],[45,170,29,25,"sin"],[45,173,29,28],[45,174,29,29,"angularFreq"],[45,185,29,40],[45,188,29,43,"t"],[45,189,29,44],[45,190,29,45],[45,193,30,20,"initialDelta"],[45,205,30,32],[45,208,30,35,"Math"],[45,212,30,39],[45,213,30,40,"cos"],[45,216,30,43],[45,217,30,44,"angularFreq"],[45,228,30,55],[45,231,30,58,"t"],[45,232,30,59],[45,233,30,60],[45,234,30,61],[46,4,31,4],[46,5,31,5],[46,11,32,9],[47,6,33,8],[48,6,34,8,"resolveSpring"],[48,19,34,21],[48,22,34,25,"t"],[48,23,34,26],[48,27,34,31],[49,8,35,12],[49,15,35,20,"to"],[49,17,35,22],[49,20,36,16,"Math"],[49,24,36,20],[49,25,36,21,"exp"],[49,28,36,24],[49,29,36,25],[49,30,36,26,"undampedAngularFreq"],[49,49,36,45],[49,52,36,48,"t"],[49,53,36,49],[49,54,36,50],[49,58,37,21,"initialDelta"],[49,70,37,33],[49,73,37,36],[49,74,37,37],[49,75,37,38,"velocity"],[49,83,37,46],[49,86,37,49,"undampedAngularFreq"],[49,105,37,68],[49,108,37,71,"initialDelta"],[49,120,37,83],[49,124,37,87,"t"],[49,125,37,88],[49,126,37,89],[50,6,38,8],[50,7,38,9],[51,4,39,4],[52,4,40,4],[52,11,40,12,"t"],[52,12,40,13],[52,16,40,18],[53,6,41,8,"state"],[53,11,41,13],[53,12,41,14,"current"],[53,19,41,21],[53,22,41,24,"resolveSpring"],[53,35,41,37],[53,36,41,38,"t"],[53,37,41,39],[53,38,41,40],[54,6,42,8],[54,12,42,14,"currentVelocity"],[54,27,42,29],[54,30,42,32,"t"],[54,31,42,33],[54,36,42,38],[54,37,42,39],[54,40,43,14,"velocity"],[54,48,43,22],[54,51,44,14],[54,55,44,14,"calcGeneratorVelocity"],[54,73,44,35],[54,74,44,35,"calcGeneratorVelocity"],[54,95,44,35],[54,97,44,36,"resolveSpring"],[54,110,44,49],[54,112,44,51,"t"],[54,113,44,52],[54,115,44,54,"state"],[54,120,44,59],[54,121,44,60,"current"],[54,128,44,67],[54,129,44,68],[55,6,45,8],[55,12,45,14,"isBelowVelocityThreshold"],[55,36,45,38],[55,39,45,41,"Math"],[55,43,45,45],[55,44,45,46,"abs"],[55,47,45,49],[55,48,45,50,"currentVelocity"],[55,63,45,65],[55,64,45,66],[55,68,45,70,"restSpeed"],[55,77,45,79],[56,6,46,8],[56,12,46,14,"isBelowDisplacementThreshold"],[56,40,46,42],[56,43,46,45,"Math"],[56,47,46,49],[56,48,46,50,"abs"],[56,51,46,53],[56,52,46,54,"to"],[56,54,46,56],[56,57,46,59,"state"],[56,62,46,64],[56,63,46,65,"current"],[56,70,46,72],[56,71,46,73],[56,75,46,77,"restDistance"],[56,87,46,89],[57,6,47,8,"state"],[57,11,47,13],[57,12,47,14,"done"],[57,16,47,18],[57,19,47,21,"isBelowVelocityThreshold"],[57,43,47,45],[57,47,47,49,"isBelowDisplacementThreshold"],[57,75,47,77],[58,6,48,8,"state"],[58,11,48,13],[58,12,48,14,"hasReachedTarget"],[58,28,48,30],[58,31,48,33],[58,35,48,33,"hasReachedTarget"],[58,61,48,49],[58,62,48,49,"hasReachedTarget"],[58,78,48,49],[58,80,48,50,"from"],[58,84,48,54],[58,86,48,56,"to"],[58,88,48,58],[58,90,48,60,"state"],[58,95,48,65],[58,96,48,66,"current"],[58,103,48,73],[58,104,48,74],[59,6,49,8],[59,13,49,15,"state"],[59,18,49,20],[60,4,50,4],[60,5,50,5],[61,2,51,0],[61,3,51,1],[62,0,51,2],[62,3]],"functionMap":{"names":["<global>","spring","resolveSpring","<anonymous>"],"mappings":"AAA;eCM;wBCkB;6DDK;wBCI;SDI;WEE;KFU;CDC"},"hasCjsExports":false},"type":"js/module"}]}