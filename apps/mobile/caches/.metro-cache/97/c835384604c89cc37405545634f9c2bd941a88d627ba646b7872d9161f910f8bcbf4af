{"dependencies":[],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  Object.defineProperty(exports, \"streamedQuery\", {\n    enumerable: true,\n    get: function () {\n      return streamedQuery;\n    }\n  });\n  // src/streamedQuery.ts\n  function streamedQuery({\n    queryFn,\n    refetchMode\n  }) {\n    return async context => {\n      if (refetchMode !== \"append\") {\n        const query = context.client.getQueryCache().find({\n          queryKey: context.queryKey,\n          exact: true\n        });\n        if (query && query.state.data !== void 0) {\n          query.setState({\n            status: \"pending\",\n            data: void 0,\n            error: null,\n            fetchStatus: \"fetching\"\n          });\n        }\n      }\n      const stream = await queryFn(context);\n      for await (const chunk of stream) {\n        if (context.signal.aborted) {\n          break;\n        }\n        context.client.setQueryData(context.queryKey, (prev = []) => {\n          return prev.concat(chunk);\n        });\n      }\n      return context.client.getQueryData(context.queryKey);\n    };\n  }\n});","lineCount":45,"map":[[7,2,33,0,"Object"],[7,8,33,0],[7,9,33,0,"defineProperty"],[7,23,33,0],[7,24,33,0,"exports"],[7,31,33,0],[8,4,33,0,"enumerable"],[8,14,33,0],[9,4,33,0,"get"],[9,7,33,0],[9,18,33,0,"get"],[9,19,33,0],[10,6,33,0],[10,13,34,2,"streamedQuery"],[10,26,34,15],[11,4,34,15],[12,2,34,15],[13,2,1,0],[14,2,2,0],[14,11,2,9,"streamedQuery"],[14,24,2,22,"streamedQuery"],[14,25,2,23],[15,4,3,2,"queryFn"],[15,11,3,9],[16,4,4,2,"refetchMode"],[17,2,5,0],[17,3,5,1],[17,5,5,3],[18,4,6,2],[18,11,6,9],[18,17,6,16,"context"],[18,24,6,23],[18,28,6,28],[19,6,7,4],[19,10,7,8,"refetchMode"],[19,21,7,19],[19,26,7,24],[19,34,7,32],[19,36,7,34],[20,8,8,6],[20,14,8,12,"query"],[20,19,8,17],[20,22,8,20,"context"],[20,29,8,27],[20,30,8,28,"client"],[20,36,8,34],[20,37,8,35,"getQueryCache"],[20,50,8,48],[20,51,8,49],[20,52,8,50],[20,53,8,51,"find"],[20,57,8,55],[20,58,8,56],[21,10,8,58,"queryKey"],[21,18,8,66],[21,20,8,68,"context"],[21,27,8,75],[21,28,8,76,"queryKey"],[21,36,8,84],[22,10,8,86,"exact"],[22,15,8,91],[22,17,8,93],[23,8,8,98],[23,9,8,99],[23,10,8,100],[24,8,9,6],[24,12,9,10,"query"],[24,17,9,15],[24,21,9,19,"query"],[24,26,9,24],[24,27,9,25,"state"],[24,32,9,30],[24,33,9,31,"data"],[24,37,9,35],[24,42,9,40],[24,47,9,45],[24,48,9,46],[24,50,9,48],[25,10,10,8,"query"],[25,15,10,13],[25,16,10,14,"setState"],[25,24,10,22],[25,25,10,23],[26,12,11,10,"status"],[26,18,11,16],[26,20,11,18],[26,29,11,27],[27,12,12,10,"data"],[27,16,12,14],[27,18,12,16],[27,23,12,21],[27,24,12,22],[28,12,13,10,"error"],[28,17,13,15],[28,19,13,17],[28,23,13,21],[29,12,14,10,"fetchStatus"],[29,23,14,21],[29,25,14,23],[30,10,15,8],[30,11,15,9],[30,12,15,10],[31,8,16,6],[32,6,17,4],[33,6,18,4],[33,12,18,10,"stream"],[33,18,18,16],[33,21,18,19],[33,27,18,25,"queryFn"],[33,34,18,32],[33,35,18,33,"context"],[33,42,18,40],[33,43,18,41],[34,6,19,4],[34,17,19,15],[34,23,19,21,"chunk"],[34,28,19,26],[34,32,19,30,"stream"],[34,38,19,36],[34,40,19,38],[35,8,20,6],[35,12,20,10,"context"],[35,19,20,17],[35,20,20,18,"signal"],[35,26,20,24],[35,27,20,25,"aborted"],[35,34,20,32],[35,36,20,34],[36,10,21,8],[37,8,22,6],[38,8,23,6,"context"],[38,15,23,13],[38,16,23,14,"client"],[38,22,23,20],[38,23,23,21,"setQueryData"],[38,35,23,33],[38,36,24,8,"context"],[38,43,24,15],[38,44,24,16,"queryKey"],[38,52,24,24],[38,54,25,8],[38,55,25,9,"prev"],[38,59,25,13],[38,62,25,16],[38,64,25,18],[38,69,25,23],[39,10,26,10],[39,17,26,17,"prev"],[39,21,26,21],[39,22,26,22,"concat"],[39,28,26,28],[39,29,26,29,"chunk"],[39,34,26,34],[39,35,26,35],[40,8,27,8],[40,9,28,6],[40,10,28,7],[41,6,29,4],[42,6,30,4],[42,13,30,11,"context"],[42,20,30,18],[42,21,30,19,"client"],[42,27,30,25],[42,28,30,26,"getQueryData"],[42,40,30,38],[42,41,30,39,"context"],[42,48,30,46],[42,49,30,47,"queryKey"],[42,57,30,55],[42,58,30,56],[43,4,31,2],[43,5,31,3],[44,2,32,0],[45,0,32,1],[45,3]],"functionMap":{"names":["<global>","streamedQuery","<anonymous>","context.client.setQueryData$argument_1"],"mappings":"AAA;ACC;SCI;QCmB;SDE;GDI;CDC"},"hasCjsExports":false},"type":"js/module"}]}