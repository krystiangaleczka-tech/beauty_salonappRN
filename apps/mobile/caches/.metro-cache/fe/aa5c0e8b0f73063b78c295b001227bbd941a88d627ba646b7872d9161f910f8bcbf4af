{"dependencies":[{"name":"@babel/runtime/helpers/asyncToGenerator","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"YisBBiy2Xm9DEVdFebZ2nbgAHBo=","exportNames":["*"],"imports":1}},{"name":"@babel/runtime/helpers/asyncIterator","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"iAa+RToycgxigMSWyQzterF69/I=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  Object.defineProperty(exports, \"streamedQuery\", {\n    enumerable: true,\n    get: function () {\n      return streamedQuery;\n    }\n  });\n  var _babelRuntimeHelpersAsyncToGenerator = require(_dependencyMap[0], \"@babel/runtime/helpers/asyncToGenerator\");\n  var _asyncToGenerator = _interopDefault(_babelRuntimeHelpersAsyncToGenerator);\n  var _babelRuntimeHelpersAsyncIterator = require(_dependencyMap[1], \"@babel/runtime/helpers/asyncIterator\");\n  var _asyncIterator = _interopDefault(_babelRuntimeHelpersAsyncIterator);\n  // src/streamedQuery.ts\n  function streamedQuery(_ref) {\n    var queryFn = _ref.queryFn,\n      refetchMode = _ref.refetchMode;\n    return /*#__PURE__*/function () {\n      var _ref2 = (0, _asyncToGenerator.default)(function* (context) {\n        if (refetchMode !== \"append\") {\n          var query = context.client.getQueryCache().find({\n            queryKey: context.queryKey,\n            exact: true\n          });\n          if (query && query.state.data !== void 0) {\n            query.setState({\n              status: \"pending\",\n              data: void 0,\n              error: null,\n              fetchStatus: \"fetching\"\n            });\n          }\n        }\n        var stream = yield queryFn(context);\n        var _iteratorAbruptCompletion = false;\n        var _didIteratorError = false;\n        var _iteratorError;\n        try {\n          var _loop = function* () {\n            var chunk = _step.value;\n            {\n              if (context.signal.aborted) {\n                return 1; // break\n              }\n              context.client.setQueryData(context.queryKey, function () {\n                var prev = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n                return prev.concat(chunk);\n              });\n            }\n          };\n          for (var _iterator = (0, _asyncIterator.default)(stream), _step; _iteratorAbruptCompletion = !(_step = yield _iterator.next()).done; _iteratorAbruptCompletion = false) {\n            if (yield* _loop()) break;\n          }\n        } catch (err) {\n          _didIteratorError = true;\n          _iteratorError = err;\n        } finally {\n          try {\n            if (_iteratorAbruptCompletion && _iterator.return != null) {\n              yield _iterator.return();\n            }\n          } finally {\n            if (_didIteratorError) {\n              throw _iteratorError;\n            }\n          }\n        }\n        return context.client.getQueryData(context.queryKey);\n      });\n      return function (_x) {\n        return _ref2.apply(this, arguments);\n      };\n    }();\n  }\n});","lineCount":83,"map":[[12,2,33,0,"Object"],[12,8,33,0],[12,9,33,0,"defineProperty"],[12,23,33,0],[12,24,33,0,"exports"],[12,31,33,0],[13,4,33,0,"enumerable"],[13,14,33,0],[14,4,33,0,"get"],[14,7,33,0],[14,18,33,0,"get"],[14,19,33,0],[15,6,33,0],[15,13,34,2,"streamedQuery"],[15,26,34,15],[16,4,34,15],[17,2,34,15],[18,2,35,2],[18,6,35,2,"_babelRuntimeHelpersAsyncToGenerator"],[18,42,35,2],[18,45,35,2,"require"],[18,52,35,2],[18,53,35,2,"_dependencyMap"],[18,67,35,2],[19,2,35,2],[19,6,35,2,"_asyncToGenerator"],[19,23,35,2],[19,26,35,2,"_interopDefault"],[19,41,35,2],[19,42,35,2,"_babelRuntimeHelpersAsyncToGenerator"],[19,78,35,2],[20,2,35,2],[20,6,35,2,"_babelRuntimeHelpersAsyncIterator"],[20,39,35,2],[20,42,35,2,"require"],[20,49,35,2],[20,50,35,2,"_dependencyMap"],[20,64,35,2],[21,2,35,2],[21,6,35,2,"_asyncIterator"],[21,20,35,2],[21,23,35,2,"_interopDefault"],[21,38,35,2],[21,39,35,2,"_babelRuntimeHelpersAsyncIterator"],[21,72,35,2],[22,2,1,0],[23,2,2,0],[23,11,2,9,"streamedQuery"],[23,24,2,22,"streamedQuery"],[23,25,2,22,"_ref"],[23,29,2,22],[23,31,5,3],[24,4,5,3],[24,8,3,2,"queryFn"],[24,15,3,9],[24,18,3,9,"_ref"],[24,22,3,9],[24,23,3,2,"queryFn"],[24,30,3,9],[25,6,4,2,"refetchMode"],[25,17,4,13],[25,20,4,13,"_ref"],[25,24,4,13],[25,25,4,2,"refetchMode"],[25,36,4,13],[26,4,6,2],[27,6,6,2],[27,10,6,2,"_ref2"],[27,15,6,2],[27,22,6,2,"_asyncToGenerator"],[27,39,6,2],[27,40,6,2,"default"],[27,47,6,2],[27,49,6,9],[27,60,6,16,"context"],[27,67,6,23],[27,69,6,28],[28,8,7,4],[28,12,7,8,"refetchMode"],[28,23,7,19],[28,28,7,24],[28,36,7,32],[28,38,7,34],[29,10,8,6],[29,14,8,12,"query"],[29,19,8,17],[29,22,8,20,"context"],[29,29,8,27],[29,30,8,28,"client"],[29,36,8,34],[29,37,8,35,"getQueryCache"],[29,50,8,48],[29,51,8,49],[29,52,8,50],[29,53,8,51,"find"],[29,57,8,55],[29,58,8,56],[30,12,8,58,"queryKey"],[30,20,8,66],[30,22,8,68,"context"],[30,29,8,75],[30,30,8,76,"queryKey"],[30,38,8,84],[31,12,8,86,"exact"],[31,17,8,91],[31,19,8,93],[32,10,8,98],[32,11,8,99],[32,12,8,100],[33,10,9,6],[33,14,9,10,"query"],[33,19,9,15],[33,23,9,19,"query"],[33,28,9,24],[33,29,9,25,"state"],[33,34,9,30],[33,35,9,31,"data"],[33,39,9,35],[33,44,9,40],[33,49,9,45],[33,50,9,46],[33,52,9,48],[34,12,10,8,"query"],[34,17,10,13],[34,18,10,14,"setState"],[34,26,10,22],[34,27,10,23],[35,14,11,10,"status"],[35,20,11,16],[35,22,11,18],[35,31,11,27],[36,14,12,10,"data"],[36,18,12,14],[36,20,12,16],[36,25,12,21],[36,26,12,22],[37,14,13,10,"error"],[37,19,13,15],[37,21,13,17],[37,25,13,21],[38,14,14,10,"fetchStatus"],[38,25,14,21],[38,27,14,23],[39,12,15,8],[39,13,15,9],[39,14,15,10],[40,10,16,6],[41,8,17,4],[42,8,18,4],[42,12,18,10,"stream"],[42,18,18,16],[42,27,18,25,"queryFn"],[42,34,18,32],[42,35,18,33,"context"],[42,42,18,40],[42,43,18,41],[43,8,18,42],[43,12,18,42,"_iteratorAbruptCompletion"],[43,37,18,42],[44,8,18,42],[44,12,18,42,"_didIteratorError"],[44,29,18,42],[45,8,18,42],[45,12,18,42,"_iteratorError"],[45,26,18,42],[46,8,18,42],[47,10,18,42],[47,14,18,42,"_loop"],[47,19,18,42],[47,32,18,42,"_loop"],[47,33,18,42],[47,35,19,38],[48,12,19,38],[48,16,19,21,"chunk"],[48,21,19,26],[48,24,19,26,"_step"],[48,29,19,26],[48,30,19,26,"value"],[48,35,19,26],[49,12,19,26],[50,14,20,6],[50,18,20,10,"context"],[50,25,20,17],[50,26,20,18,"signal"],[50,32,20,24],[50,33,20,25,"aborted"],[50,40,20,32],[50,42,20,34],[51,16,20,34],[52,14,22,6],[53,14,23,6,"context"],[53,21,23,13],[53,22,23,14,"client"],[53,28,23,20],[53,29,23,21,"setQueryData"],[53,41,23,33],[53,42,24,8,"context"],[53,49,24,15],[53,50,24,16,"queryKey"],[53,58,24,24],[53,60,25,8],[53,72,25,23],[54,16,25,23],[54,20,25,9,"prev"],[54,24,25,13],[54,27,25,13,"arguments"],[54,36,25,13],[54,37,25,13,"length"],[54,43,25,13],[54,51,25,13,"arguments"],[54,60,25,13],[54,68,25,13,"undefined"],[54,77,25,13],[54,80,25,13,"arguments"],[54,89,25,13],[54,95,25,16],[54,97,25,18],[55,16,26,10],[55,23,26,17,"prev"],[55,27,26,21],[55,28,26,22,"concat"],[55,34,26,28],[55,35,26,29,"chunk"],[55,40,26,34],[55,41,26,35],[56,14,27,8],[56,15,28,6],[56,16,28,7],[57,12,28,8],[58,10,29,4],[58,11,29,5],[59,10,19,4],[59,19,19,4,"_iterator"],[59,28,19,4],[59,35,19,4,"_asyncIterator"],[59,49,19,4],[59,50,19,4,"default"],[59,57,19,4],[59,59,19,30,"stream"],[59,65,19,36],[59,68,19,36,"_step"],[59,73,19,36],[59,75,19,36,"_iteratorAbruptCompletion"],[59,100,19,36],[59,105,19,36,"_step"],[59,110,19,36],[59,119,19,36,"_iterator"],[59,128,19,36],[59,129,19,36,"next"],[59,133,19,36],[59,137,19,36,"done"],[59,141,19,36],[59,143,19,36,"_iteratorAbruptCompletion"],[59,168,19,36],[60,12,19,36],[60,23,19,36,"_loop"],[60,28,19,36],[60,32,21,8],[61,10,21,14],[62,8,29,5],[62,17,29,5,"err"],[62,20,29,5],[63,10,29,5,"_didIteratorError"],[63,27,29,5],[64,10,29,5,"_iteratorError"],[64,24,29,5],[64,27,29,5,"err"],[64,30,29,5],[65,8,29,5],[66,10,29,5],[67,12,29,5],[67,16,29,5,"_iteratorAbruptCompletion"],[67,41,29,5],[67,45,29,5,"_iterator"],[67,54,29,5],[67,55,29,5,"return"],[67,61,29,5],[68,14,29,5],[68,20,29,5,"_iterator"],[68,29,29,5],[68,30,29,5,"return"],[68,36,29,5],[69,12,29,5],[70,10,29,5],[71,12,29,5],[71,16,29,5,"_didIteratorError"],[71,33,29,5],[72,14,29,5],[72,20,29,5,"_iteratorError"],[72,34,29,5],[73,12,29,5],[74,10,29,5],[75,8,29,5],[76,8,30,4],[76,15,30,11,"context"],[76,22,30,18],[76,23,30,19,"client"],[76,29,30,25],[76,30,30,26,"getQueryData"],[76,42,30,38],[76,43,30,39,"context"],[76,50,30,46],[76,51,30,47,"queryKey"],[76,59,30,55],[76,60,30,56],[77,6,31,2],[77,7,31,3],[78,6,31,3],[78,23,31,3,"_x"],[78,25,31,3],[79,8,31,3],[79,15,31,3,"_ref2"],[79,20,31,3],[79,21,31,3,"apply"],[79,26,31,3],[79,33,31,3,"arguments"],[79,42,31,3],[80,6,31,3],[81,4,31,3],[82,2,32,0],[83,0,32,1],[83,3]],"functionMap":{"names":["<global>","streamedQuery","<anonymous>","context.client.setQueryData$argument_1"],"mappings":"AAA;ACC;SCI;QCmB;SDE;GDI;CDC"},"hasCjsExports":false},"type":"js/module"}]}