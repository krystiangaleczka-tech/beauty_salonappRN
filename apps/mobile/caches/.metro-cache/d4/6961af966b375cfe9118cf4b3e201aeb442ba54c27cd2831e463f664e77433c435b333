{"dependencies":[{"name":"tslib","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":31,"index":31}}],"key":"8R25577gwLd3n1hFG9VYnRLV9eE=","exportNames":["*"],"imports":1}},{"name":"../resize/index.es.js","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":32},"end":{"line":2,"column":47,"index":79}}],"key":"+bNMQflD5ibhhZpxvqlkvaz5QmI=","exportNames":["*"],"imports":1}},{"name":"./info.es.js","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":3,"column":0,"index":80},"end":{"line":3,"column":48,"index":128}}],"key":"P+JsmqfbwoxlwYHJr87Eb/aaoPc=","exportNames":["*"],"imports":1}},{"name":"./on-scroll-handler.es.js","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":4,"column":0,"index":129},"end":{"line":4,"column":66,"index":195}}],"key":"gRQgwUQFLBitkEV83Dt72A+/LP0=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  Object.defineProperty(exports, \"scroll\", {\n    enumerable: true,\n    get: function () {\n      return scroll;\n    }\n  });\n  var _tslib = require(_dependencyMap[0], \"tslib\");\n  var _resizeIndexEsJs = require(_dependencyMap[1], \"../resize/index.es.js\");\n  var _infoEsJs = require(_dependencyMap[2], \"./info.es.js\");\n  var _onScrollHandlerEsJs = require(_dependencyMap[3], \"./on-scroll-handler.es.js\");\n  const scrollListeners = new WeakMap();\n  const resizeListeners = new WeakMap();\n  const onScrollHandlers = new WeakMap();\n  const getEventTarget = element => element === document.documentElement ? window : element;\n  function scroll(onScroll, _a = {}) {\n    var {\n        container = document.documentElement\n      } = _a,\n      options = (0, _tslib.__rest)(_a, [\"container\"]);\n    let containerHandlers = onScrollHandlers.get(container);\n    /**\n     * Get the onScroll handlers for this container.\n     * If one isn't found, create a new one.\n     */\n    if (!containerHandlers) {\n      containerHandlers = new Set();\n      onScrollHandlers.set(container, containerHandlers);\n    }\n    /**\n     * Create a new onScroll handler for the provided callback.\n     */\n    const info = (0, _infoEsJs.createScrollInfo)();\n    const containerHandler = (0, _onScrollHandlerEsJs.createOnScrollHandler)(container, onScroll, info, options);\n    containerHandlers.add(containerHandler);\n    /**\n     * Check if there's a scroll event listener for this container.\n     * If not, create one.\n     */\n    if (!scrollListeners.has(container)) {\n      const listener = () => {\n        const time = performance.now();\n        for (const handler of containerHandlers) handler.measure();\n        for (const handler of containerHandlers) handler.update(time);\n        for (const handler of containerHandlers) handler.notify();\n      };\n      scrollListeners.set(container, listener);\n      const target = getEventTarget(container);\n      window.addEventListener(\"resize\", listener, {\n        passive: true\n      });\n      if (container !== document.documentElement) {\n        resizeListeners.set(container, (0, _resizeIndexEsJs.resize)(container, listener));\n      }\n      target.addEventListener(\"scroll\", listener, {\n        passive: true\n      });\n    }\n    const listener = scrollListeners.get(container);\n    const onLoadProcesss = requestAnimationFrame(listener);\n    return () => {\n      var _a;\n      if (typeof onScroll !== \"function\") onScroll.stop();\n      cancelAnimationFrame(onLoadProcesss);\n      /**\n       * Check if we even have any handlers for this container.\n       */\n      const containerHandlers = onScrollHandlers.get(container);\n      if (!containerHandlers) return;\n      containerHandlers.delete(containerHandler);\n      if (containerHandlers.size) return;\n      /**\n       * If no more handlers, remove the scroll listener too.\n       */\n      const listener = scrollListeners.get(container);\n      scrollListeners.delete(container);\n      if (listener) {\n        getEventTarget(container).removeEventListener(\"scroll\", listener);\n        (_a = resizeListeners.get(container)) === null || _a === void 0 ? void 0 : _a();\n        window.removeEventListener(\"resize\", listener);\n      }\n    };\n  }\n});","lineCount":89,"map":[[7,2,78,0,"Object"],[7,8,78,0],[7,9,78,0,"defineProperty"],[7,23,78,0],[7,24,78,0,"exports"],[7,31,78,0],[8,4,78,0,"enumerable"],[8,14,78,0],[9,4,78,0,"get"],[9,7,78,0],[9,18,78,0,"get"],[9,19,78,0],[10,6,78,0],[10,13,78,9,"scroll"],[10,19,78,15],[11,4,78,15],[12,2,78,15],[13,2,1,0],[13,6,1,0,"_tslib"],[13,12,1,0],[13,15,1,0,"require"],[13,22,1,0],[13,23,1,0,"_dependencyMap"],[13,37,1,0],[14,2,2,0],[14,6,2,0,"_resizeIndexEsJs"],[14,22,2,0],[14,25,2,0,"require"],[14,32,2,0],[14,33,2,0,"_dependencyMap"],[14,47,2,0],[15,2,3,0],[15,6,3,0,"_infoEsJs"],[15,15,3,0],[15,18,3,0,"require"],[15,25,3,0],[15,26,3,0,"_dependencyMap"],[15,40,3,0],[16,2,4,0],[16,6,4,0,"_onScrollHandlerEsJs"],[16,26,4,0],[16,29,4,0,"require"],[16,36,4,0],[16,37,4,0,"_dependencyMap"],[16,51,4,0],[17,2,6,0],[17,8,6,6,"scrollListeners"],[17,23,6,21],[17,26,6,24],[17,30,6,28,"WeakMap"],[17,37,6,35],[17,38,6,36],[17,39,6,37],[18,2,7,0],[18,8,7,6,"resizeListeners"],[18,23,7,21],[18,26,7,24],[18,30,7,28,"WeakMap"],[18,37,7,35],[18,38,7,36],[18,39,7,37],[19,2,8,0],[19,8,8,6,"onScrollHandlers"],[19,24,8,22],[19,27,8,25],[19,31,8,29,"WeakMap"],[19,38,8,36],[19,39,8,37],[19,40,8,38],[20,2,9,0],[20,8,9,6,"getEventTarget"],[20,22,9,20],[20,25,9,24,"element"],[20,32,9,31],[20,36,9,36,"element"],[20,43,9,43],[20,48,9,48,"document"],[20,56,9,56],[20,57,9,57,"documentElement"],[20,72,9,72],[20,75,9,75,"window"],[20,81,9,81],[20,84,9,84,"element"],[20,91,9,91],[21,2,10,0],[21,11,10,9,"scroll"],[21,17,10,15,"scroll"],[21,18,10,16,"onScroll"],[21,26,10,24],[21,28,10,26,"_a"],[21,30,10,28],[21,33,10,31],[21,34,10,32],[21,35,10,33],[21,37,10,35],[22,4,11,4],[22,8,11,8],[23,8,11,10,"container"],[23,17,11,19],[23,20,11,22,"document"],[23,28,11,30],[23,29,11,31,"documentElement"],[24,6,11,47],[24,7,11,48],[24,10,11,51,"_a"],[24,12,11,53],[25,6,11,55,"options"],[25,13,11,62],[25,16,11,65],[25,20,11,65,"__rest"],[25,26,11,71],[25,27,11,71,"__rest"],[25,33,11,71],[25,35,11,72,"_a"],[25,37,11,74],[25,39,11,76],[25,40,11,77],[25,51,11,88],[25,52,11,89],[25,53,11,90],[26,4,12,4],[26,8,12,8,"containerHandlers"],[26,25,12,25],[26,28,12,28,"onScrollHandlers"],[26,44,12,44],[26,45,12,45,"get"],[26,48,12,48],[26,49,12,49,"container"],[26,58,12,58],[26,59,12,59],[27,4,13,4],[28,0,14,0],[29,0,15,0],[30,0,16,0],[31,4,17,4],[31,8,17,8],[31,9,17,9,"containerHandlers"],[31,26,17,26],[31,28,17,28],[32,6,18,8,"containerHandlers"],[32,23,18,25],[32,26,18,28],[32,30,18,32,"Set"],[32,33,18,35],[32,34,18,36],[32,35,18,37],[33,6,19,8,"onScrollHandlers"],[33,22,19,24],[33,23,19,25,"set"],[33,26,19,28],[33,27,19,29,"container"],[33,36,19,38],[33,38,19,40,"containerHandlers"],[33,55,19,57],[33,56,19,58],[34,4,20,4],[35,4,21,4],[36,0,22,0],[37,0,23,0],[38,4,24,4],[38,10,24,10,"info"],[38,14,24,14],[38,17,24,17],[38,21,24,17,"createScrollInfo"],[38,30,24,33],[38,31,24,33,"createScrollInfo"],[38,47,24,33],[38,49,24,34],[38,50,24,35],[39,4,25,4],[39,10,25,10,"containerHandler"],[39,26,25,26],[39,29,25,29],[39,33,25,29,"createOnScrollHandler"],[39,53,25,50],[39,54,25,50,"createOnScrollHandler"],[39,75,25,50],[39,77,25,51,"container"],[39,86,25,60],[39,88,25,62,"onScroll"],[39,96,25,70],[39,98,25,72,"info"],[39,102,25,76],[39,104,25,78,"options"],[39,111,25,85],[39,112,25,86],[40,4,26,4,"containerHandlers"],[40,21,26,21],[40,22,26,22,"add"],[40,25,26,25],[40,26,26,26,"containerHandler"],[40,42,26,42],[40,43,26,43],[41,4,27,4],[42,0,28,0],[43,0,29,0],[44,0,30,0],[45,4,31,4],[45,8,31,8],[45,9,31,9,"scrollListeners"],[45,24,31,24],[45,25,31,25,"has"],[45,28,31,28],[45,29,31,29,"container"],[45,38,31,38],[45,39,31,39],[45,41,31,41],[46,6,32,8],[46,12,32,14,"listener"],[46,20,32,22],[46,23,32,25,"listener"],[46,24,32,25],[46,29,32,31],[47,8,33,12],[47,14,33,18,"time"],[47,18,33,22],[47,21,33,25,"performance"],[47,32,33,36],[47,33,33,37,"now"],[47,36,33,40],[47,37,33,41],[47,38,33,42],[48,8,34,12],[48,13,34,17],[48,19,34,23,"handler"],[48,26,34,30],[48,30,34,34,"containerHandlers"],[48,47,34,51],[48,49,35,16,"handler"],[48,56,35,23],[48,57,35,24,"measure"],[48,64,35,31],[48,65,35,32],[48,66,35,33],[49,8,36,12],[49,13,36,17],[49,19,36,23,"handler"],[49,26,36,30],[49,30,36,34,"containerHandlers"],[49,47,36,51],[49,49,37,16,"handler"],[49,56,37,23],[49,57,37,24,"update"],[49,63,37,30],[49,64,37,31,"time"],[49,68,37,35],[49,69,37,36],[50,8,38,12],[50,13,38,17],[50,19,38,23,"handler"],[50,26,38,30],[50,30,38,34,"containerHandlers"],[50,47,38,51],[50,49,39,16,"handler"],[50,56,39,23],[50,57,39,24,"notify"],[50,63,39,30],[50,64,39,31],[50,65,39,32],[51,6,40,8],[51,7,40,9],[52,6,41,8,"scrollListeners"],[52,21,41,23],[52,22,41,24,"set"],[52,25,41,27],[52,26,41,28,"container"],[52,35,41,37],[52,37,41,39,"listener"],[52,45,41,47],[52,46,41,48],[53,6,42,8],[53,12,42,14,"target"],[53,18,42,20],[53,21,42,23,"getEventTarget"],[53,35,42,37],[53,36,42,38,"container"],[53,45,42,47],[53,46,42,48],[54,6,43,8,"window"],[54,12,43,14],[54,13,43,15,"addEventListener"],[54,29,43,31],[54,30,43,32],[54,38,43,40],[54,40,43,42,"listener"],[54,48,43,50],[54,50,43,52],[55,8,43,54,"passive"],[55,15,43,61],[55,17,43,63],[56,6,43,68],[56,7,43,69],[56,8,43,70],[57,6,44,8],[57,10,44,12,"container"],[57,19,44,21],[57,24,44,26,"document"],[57,32,44,34],[57,33,44,35,"documentElement"],[57,48,44,50],[57,50,44,52],[58,8,45,12,"resizeListeners"],[58,23,45,27],[58,24,45,28,"set"],[58,27,45,31],[58,28,45,32,"container"],[58,37,45,41],[58,39,45,43],[58,43,45,43,"resize"],[58,59,45,49],[58,60,45,49,"resize"],[58,66,45,49],[58,68,45,50,"container"],[58,77,45,59],[58,79,45,61,"listener"],[58,87,45,69],[58,88,45,70],[58,89,45,71],[59,6,46,8],[60,6,47,8,"target"],[60,12,47,14],[60,13,47,15,"addEventListener"],[60,29,47,31],[60,30,47,32],[60,38,47,40],[60,40,47,42,"listener"],[60,48,47,50],[60,50,47,52],[61,8,47,54,"passive"],[61,15,47,61],[61,17,47,63],[62,6,47,68],[62,7,47,69],[62,8,47,70],[63,4,48,4],[64,4,49,4],[64,10,49,10,"listener"],[64,18,49,18],[64,21,49,21,"scrollListeners"],[64,36,49,36],[64,37,49,37,"get"],[64,40,49,40],[64,41,49,41,"container"],[64,50,49,50],[64,51,49,51],[65,4,50,4],[65,10,50,10,"onLoadProcesss"],[65,24,50,24],[65,27,50,27,"requestAnimationFrame"],[65,48,50,48],[65,49,50,49,"listener"],[65,57,50,57],[65,58,50,58],[66,4,51,4],[66,11,51,11],[66,17,51,17],[67,6,52,8],[67,10,52,12,"_a"],[67,12,52,14],[68,6,53,8],[68,10,53,12],[68,17,53,19,"onScroll"],[68,25,53,27],[68,30,53,32],[68,40,53,42],[68,42,54,12,"onScroll"],[68,50,54,20],[68,51,54,21,"stop"],[68,55,54,25],[68,56,54,26],[68,57,54,27],[69,6,55,8,"cancelAnimationFrame"],[69,26,55,28],[69,27,55,29,"onLoadProcesss"],[69,41,55,43],[69,42,55,44],[70,6,56,8],[71,0,57,0],[72,0,58,0],[73,6,59,8],[73,12,59,14,"containerHandlers"],[73,29,59,31],[73,32,59,34,"onScrollHandlers"],[73,48,59,50],[73,49,59,51,"get"],[73,52,59,54],[73,53,59,55,"container"],[73,62,59,64],[73,63,59,65],[74,6,60,8],[74,10,60,12],[74,11,60,13,"containerHandlers"],[74,28,60,30],[74,30,61,12],[75,6,62,8,"containerHandlers"],[75,23,62,25],[75,24,62,26,"delete"],[75,30,62,32],[75,31,62,33,"containerHandler"],[75,47,62,49],[75,48,62,50],[76,6,63,8],[76,10,63,12,"containerHandlers"],[76,27,63,29],[76,28,63,30,"size"],[76,32,63,34],[76,34,64,12],[77,6,65,8],[78,0,66,0],[79,0,67,0],[80,6,68,8],[80,12,68,14,"listener"],[80,20,68,22],[80,23,68,25,"scrollListeners"],[80,38,68,40],[80,39,68,41,"get"],[80,42,68,44],[80,43,68,45,"container"],[80,52,68,54],[80,53,68,55],[81,6,69,8,"scrollListeners"],[81,21,69,23],[81,22,69,24,"delete"],[81,28,69,30],[81,29,69,31,"container"],[81,38,69,40],[81,39,69,41],[82,6,70,8],[82,10,70,12,"listener"],[82,18,70,20],[82,20,70,22],[83,8,71,12,"getEventTarget"],[83,22,71,26],[83,23,71,27,"container"],[83,32,71,36],[83,33,71,37],[83,34,71,38,"removeEventListener"],[83,53,71,57],[83,54,71,58],[83,62,71,66],[83,64,71,68,"listener"],[83,72,71,76],[83,73,71,77],[84,8,72,12],[84,9,72,13,"_a"],[84,11,72,15],[84,14,72,18,"resizeListeners"],[84,29,72,33],[84,30,72,34,"get"],[84,33,72,37],[84,34,72,38,"container"],[84,43,72,47],[84,44,72,48],[84,50,72,54],[84,54,72,58],[84,58,72,62,"_a"],[84,60,72,64],[84,65,72,69],[84,70,72,74],[84,71,72,75],[84,74,72,78],[84,79,72,83],[84,80,72,84],[84,83,72,87,"_a"],[84,85,72,89],[84,86,72,90],[84,87,72,91],[85,8,73,12,"window"],[85,14,73,18],[85,15,73,19,"removeEventListener"],[85,34,73,38],[85,35,73,39],[85,43,73,47],[85,45,73,49,"listener"],[85,53,73,57],[85,54,73,58],[86,6,74,8],[87,4,75,4],[87,5,75,5],[88,2,76,0],[89,0,76,1],[89,3]],"functionMap":{"names":["<global>","getEventTarget","scroll","listener","<anonymous>"],"mappings":"AAA;uBCQ,oED;AEC;yBCsB;SDQ;WEW;KFwB;CFC"},"hasCjsExports":false},"type":"js/module"}]}