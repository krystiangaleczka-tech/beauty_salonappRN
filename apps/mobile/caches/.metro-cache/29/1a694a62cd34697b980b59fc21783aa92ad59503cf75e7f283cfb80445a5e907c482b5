{"dependencies":[{"name":"tslib","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":31,"index":31}}],"key":"8R25577gwLd3n1hFG9VYnRLV9eE=","exportNames":["*"],"imports":1}},{"name":"./utils/detect-animation-from-options.mjs","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":32},"end":{"line":2,"column":87,"index":119}}],"key":"xNxX0cmu0XJK5HtkMFOwBv/4TeE=","exportNames":["*"],"imports":1}},{"name":"framesync","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":3,"column":0,"index":120},"end":{"line":3,"column":45,"index":165}}],"key":"24PTcPTPyjPm5C9bri3IX7JZMU4=","exportNames":["*"],"imports":1}},{"name":"../utils/interpolate.mjs","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":4,"column":0,"index":166},"end":{"line":4,"column":55,"index":221}}],"key":"YqKPVSW4aI4lHedB2vA7aH6d4bw=","exportNames":["*"],"imports":1}},{"name":"./utils/elapsed.mjs","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":5,"column":0,"index":222},"end":{"line":5,"column":89,"index":311}}],"key":"XSQdrjd54MRZQQnAFIgRXlvt+dk=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  Object.defineProperty(exports, \"animate\", {\n    enumerable: true,\n    get: function () {\n      return animate;\n    }\n  });\n  var _tslib = require(_dependencyMap[0], \"tslib\");\n  var _utilsDetectAnimationFromOptionsMjs = require(_dependencyMap[1], \"./utils/detect-animation-from-options.mjs\");\n  var _framesync = require(_dependencyMap[2], \"framesync\");\n  var sync = _interopDefault(_framesync);\n  var _utilsInterpolateMjs = require(_dependencyMap[3], \"../utils/interpolate.mjs\");\n  var _utilsElapsedMjs = require(_dependencyMap[4], \"./utils/elapsed.mjs\");\n  const framesync = update => {\n    const passTimestamp = ({\n      delta\n    }) => update(delta);\n    return {\n      start: () => sync.default.update(passTimestamp, true),\n      stop: () => _framesync.cancelSync.update(passTimestamp)\n    };\n  };\n  function animate(_a) {\n    var _b, _c;\n    var {\n        from,\n        autoplay = true,\n        driver = framesync,\n        elapsed = 0,\n        repeat: repeatMax = 0,\n        repeatType = \"loop\",\n        repeatDelay = 0,\n        onPlay,\n        onStop,\n        onComplete,\n        onRepeat,\n        onUpdate\n      } = _a,\n      options = (0, _tslib.__rest)(_a, [\"from\", \"autoplay\", \"driver\", \"elapsed\", \"repeat\", \"repeatType\", \"repeatDelay\", \"onPlay\", \"onStop\", \"onComplete\", \"onRepeat\", \"onUpdate\"]);\n    let {\n      to\n    } = options;\n    let driverControls;\n    let repeatCount = 0;\n    let computedDuration = options.duration;\n    let latest;\n    let isComplete = false;\n    let isForwardPlayback = true;\n    let interpolateFromNumber;\n    const animator = (0, _utilsDetectAnimationFromOptionsMjs.detectAnimationFromOptions)(options);\n    if ((_c = (_b = animator).needsInterpolation) === null || _c === void 0 ? void 0 : _c.call(_b, from, to)) {\n      interpolateFromNumber = (0, _utilsInterpolateMjs.interpolate)([0, 100], [from, to], {\n        clamp: false\n      });\n      from = 0;\n      to = 100;\n    }\n    const animation = animator(Object.assign(Object.assign({}, options), {\n      from,\n      to\n    }));\n    function repeat() {\n      repeatCount++;\n      if (repeatType === \"reverse\") {\n        isForwardPlayback = repeatCount % 2 === 0;\n        elapsed = (0, _utilsElapsedMjs.reverseElapsed)(elapsed, computedDuration, repeatDelay, isForwardPlayback);\n      } else {\n        elapsed = (0, _utilsElapsedMjs.loopElapsed)(elapsed, computedDuration, repeatDelay);\n        if (repeatType === \"mirror\") animation.flipTarget();\n      }\n      isComplete = false;\n      onRepeat && onRepeat();\n    }\n    function complete() {\n      driverControls.stop();\n      onComplete && onComplete();\n    }\n    function update(delta) {\n      if (!isForwardPlayback) delta = -delta;\n      elapsed += delta;\n      if (!isComplete) {\n        const state = animation.next(Math.max(0, elapsed));\n        latest = state.value;\n        if (interpolateFromNumber) latest = interpolateFromNumber(latest);\n        isComplete = isForwardPlayback ? state.done : elapsed <= 0;\n      }\n      onUpdate === null || onUpdate === void 0 ? void 0 : onUpdate(latest);\n      if (isComplete) {\n        if (repeatCount === 0) computedDuration !== null && computedDuration !== void 0 ? computedDuration : computedDuration = elapsed;\n        if (repeatCount < repeatMax) {\n          (0, _utilsElapsedMjs.hasRepeatDelayElapsed)(elapsed, computedDuration, repeatDelay, isForwardPlayback) && repeat();\n        } else {\n          complete();\n        }\n      }\n    }\n    function play() {\n      onPlay === null || onPlay === void 0 ? void 0 : onPlay();\n      driverControls = driver(update);\n      driverControls.start();\n    }\n    autoplay && play();\n    return {\n      stop: () => {\n        onStop === null || onStop === void 0 ? void 0 : onStop();\n        driverControls.stop();\n      }\n    };\n  }\n});","lineCount":120,"map":[[12,2,89,0,"Object"],[12,8,89,0],[12,9,89,0,"defineProperty"],[12,23,89,0],[12,24,89,0,"exports"],[12,31,89,0],[13,4,89,0,"enumerable"],[13,14,89,0],[14,4,89,0,"get"],[14,7,89,0],[14,18,89,0,"get"],[14,19,89,0],[15,6,89,0],[15,13,89,9,"animate"],[15,20,89,16],[16,4,89,16],[17,2,89,16],[18,2,1,0],[18,6,1,0,"_tslib"],[18,12,1,0],[18,15,1,0,"require"],[18,22,1,0],[18,23,1,0,"_dependencyMap"],[18,37,1,0],[19,2,2,0],[19,6,2,0,"_utilsDetectAnimationFromOptionsMjs"],[19,41,2,0],[19,44,2,0,"require"],[19,51,2,0],[19,52,2,0,"_dependencyMap"],[19,66,2,0],[20,2,3,0],[20,6,3,0,"_framesync"],[20,16,3,0],[20,19,3,0,"require"],[20,26,3,0],[20,27,3,0,"_dependencyMap"],[20,41,3,0],[21,2,3,0],[21,6,3,0,"sync"],[21,10,3,0],[21,13,3,0,"_interopDefault"],[21,28,3,0],[21,29,3,0,"_framesync"],[21,39,3,0],[22,2,4,0],[22,6,4,0,"_utilsInterpolateMjs"],[22,26,4,0],[22,29,4,0,"require"],[22,36,4,0],[22,37,4,0,"_dependencyMap"],[22,51,4,0],[23,2,5,0],[23,6,5,0,"_utilsElapsedMjs"],[23,22,5,0],[23,25,5,0,"require"],[23,32,5,0],[23,33,5,0,"_dependencyMap"],[23,47,5,0],[24,2,7,0],[24,8,7,6,"framesync"],[24,17,7,15],[24,20,7,19,"update"],[24,26,7,25],[24,30,7,30],[25,4,8,4],[25,10,8,10,"passTimestamp"],[25,23,8,23],[25,26,8,26,"passTimestamp"],[25,27,8,27],[26,6,8,29,"delta"],[27,4,8,35],[27,5,8,36],[27,10,8,41,"update"],[27,16,8,47],[27,17,8,48,"delta"],[27,22,8,53],[27,23,8,54],[28,4,9,4],[28,11,9,11],[29,6,10,8,"start"],[29,11,10,13],[29,13,10,15,"start"],[29,14,10,15],[29,19,10,21,"sync"],[29,23,10,25],[29,24,10,25,"default"],[29,31,10,25],[29,32,10,26,"update"],[29,38,10,32],[29,39,10,33,"passTimestamp"],[29,52,10,46],[29,54,10,48],[29,58,10,52],[29,59,10,53],[30,6,11,8,"stop"],[30,10,11,12],[30,12,11,14,"stop"],[30,13,11,14],[30,18,11,20,"cancelSync"],[30,28,11,30],[30,29,11,30,"cancelSync"],[30,39,11,30],[30,40,11,31,"update"],[30,46,11,37],[30,47,11,38,"passTimestamp"],[30,60,11,51],[31,4,12,4],[31,5,12,5],[32,2,13,0],[32,3,13,1],[33,2,14,0],[33,11,14,9,"animate"],[33,18,14,16,"animate"],[33,19,14,17,"_a"],[33,21,14,19],[33,23,14,21],[34,4,15,4],[34,8,15,8,"_b"],[34,10,15,10],[34,12,15,12,"_c"],[34,14,15,14],[35,4,16,4],[35,8,16,8],[36,8,16,10,"from"],[36,12,16,14],[37,8,16,16,"autoplay"],[37,16,16,24],[37,19,16,27],[37,23,16,31],[38,8,16,33,"driver"],[38,14,16,39],[38,17,16,42,"framesync"],[38,26,16,51],[39,8,16,53,"elapsed"],[39,15,16,60],[39,18,16,63],[39,19,16,64],[40,8,16,66,"repeat"],[40,14,16,72],[40,16,16,74,"repeatMax"],[40,25,16,83],[40,28,16,86],[40,29,16,87],[41,8,16,89,"repeatType"],[41,18,16,99],[41,21,16,102],[41,27,16,108],[42,8,16,110,"repeatDelay"],[42,19,16,121],[42,22,16,124],[42,23,16,125],[43,8,16,127,"onPlay"],[43,14,16,133],[44,8,16,135,"onStop"],[44,14,16,141],[45,8,16,143,"onComplete"],[45,18,16,153],[46,8,16,155,"onRepeat"],[46,16,16,163],[47,8,16,165,"onUpdate"],[48,6,16,174],[48,7,16,175],[48,10,16,178,"_a"],[48,12,16,180],[49,6,16,182,"options"],[49,13,16,189],[49,16,16,192],[49,20,16,192,"__rest"],[49,26,16,198],[49,27,16,198,"__rest"],[49,33,16,198],[49,35,16,199,"_a"],[49,37,16,201],[49,39,16,203],[49,40,16,204],[49,46,16,210],[49,48,16,212],[49,58,16,222],[49,60,16,224],[49,68,16,232],[49,70,16,234],[49,79,16,243],[49,81,16,245],[49,89,16,253],[49,91,16,255],[49,103,16,267],[49,105,16,269],[49,118,16,282],[49,120,16,284],[49,128,16,292],[49,130,16,294],[49,138,16,302],[49,140,16,304],[49,152,16,316],[49,154,16,318],[49,164,16,328],[49,166,16,330],[49,176,16,340],[49,177,16,341],[49,178,16,342],[50,4,17,4],[50,8,17,8],[51,6,17,10,"to"],[52,4,17,13],[52,5,17,14],[52,8,17,17,"options"],[52,15,17,24],[53,4,18,4],[53,8,18,8,"driverControls"],[53,22,18,22],[54,4,19,4],[54,8,19,8,"repeatCount"],[54,19,19,19],[54,22,19,22],[54,23,19,23],[55,4,20,4],[55,8,20,8,"computedDuration"],[55,24,20,24],[55,27,20,27,"options"],[55,34,20,34],[55,35,20,35,"duration"],[55,43,20,43],[56,4,21,4],[56,8,21,8,"latest"],[56,14,21,14],[57,4,22,4],[57,8,22,8,"isComplete"],[57,18,22,18],[57,21,22,21],[57,26,22,26],[58,4,23,4],[58,8,23,8,"isForwardPlayback"],[58,25,23,25],[58,28,23,28],[58,32,23,32],[59,4,24,4],[59,8,24,8,"interpolateFromNumber"],[59,29,24,29],[60,4,25,4],[60,10,25,10,"animator"],[60,18,25,18],[60,21,25,21],[60,25,25,21,"detectAnimationFromOptions"],[60,60,25,47],[60,61,25,47,"detectAnimationFromOptions"],[60,87,25,47],[60,89,25,48,"options"],[60,96,25,55],[60,97,25,56],[61,4,26,4],[61,8,26,8],[61,9,26,9,"_c"],[61,11,26,11],[61,14,26,14],[61,15,26,15,"_b"],[61,17,26,17],[61,20,26,20,"animator"],[61,28,26,28],[61,30,26,30,"needsInterpolation"],[61,48,26,48],[61,54,26,54],[61,58,26,58],[61,62,26,62,"_c"],[61,64,26,64],[61,69,26,69],[61,74,26,74],[61,75,26,75],[61,78,26,78],[61,83,26,83],[61,84,26,84],[61,87,26,87,"_c"],[61,89,26,89],[61,90,26,90,"call"],[61,94,26,94],[61,95,26,95,"_b"],[61,97,26,97],[61,99,26,99,"from"],[61,103,26,103],[61,105,26,105,"to"],[61,107,26,107],[61,108,26,108],[61,110,26,110],[62,6,27,8,"interpolateFromNumber"],[62,27,27,29],[62,30,27,32],[62,34,27,32,"interpolate"],[62,54,27,43],[62,55,27,43,"interpolate"],[62,66,27,43],[62,68,27,44],[62,69,27,45],[62,70,27,46],[62,72,27,48],[62,75,27,51],[62,76,27,52],[62,78,27,54],[62,79,27,55,"from"],[62,83,27,59],[62,85,27,61,"to"],[62,87,27,63],[62,88,27,64],[62,90,27,66],[63,8,28,12,"clamp"],[63,13,28,17],[63,15,28,19],[64,6,29,8],[64,7,29,9],[64,8,29,10],[65,6,30,8,"from"],[65,10,30,12],[65,13,30,15],[65,14,30,16],[66,6,31,8,"to"],[66,8,31,10],[66,11,31,13],[66,14,31,16],[67,4,32,4],[68,4,33,4],[68,10,33,10,"animation"],[68,19,33,19],[68,22,33,22,"animator"],[68,30,33,30],[68,31,33,31,"Object"],[68,37,33,37],[68,38,33,38,"assign"],[68,44,33,44],[68,45,33,45,"Object"],[68,51,33,51],[68,52,33,52,"assign"],[68,58,33,58],[68,59,33,59],[68,60,33,60],[68,61,33,61],[68,63,33,63,"options"],[68,70,33,70],[68,71,33,71],[68,73,33,73],[69,6,33,75,"from"],[69,10,33,79],[70,6,33,81,"to"],[71,4,33,84],[71,5,33,85],[71,6,33,86],[71,7,33,87],[72,4,34,4],[72,13,34,13,"repeat"],[72,19,34,19,"repeat"],[72,20,34,19],[72,22,34,22],[73,6,35,8,"repeatCount"],[73,17,35,19],[73,19,35,21],[74,6,36,8],[74,10,36,12,"repeatType"],[74,20,36,22],[74,25,36,27],[74,34,36,36],[74,36,36,38],[75,8,37,12,"isForwardPlayback"],[75,25,37,29],[75,28,37,32,"repeatCount"],[75,39,37,43],[75,42,37,46],[75,43,37,47],[75,48,37,52],[75,49,37,53],[76,8,38,12,"elapsed"],[76,15,38,19],[76,18,38,22],[76,22,38,22,"reverseElapsed"],[76,38,38,36],[76,39,38,36,"reverseElapsed"],[76,53,38,36],[76,55,38,37,"elapsed"],[76,62,38,44],[76,64,38,46,"computedDuration"],[76,80,38,62],[76,82,38,64,"repeatDelay"],[76,93,38,75],[76,95,38,77,"isForwardPlayback"],[76,112,38,94],[76,113,38,95],[77,6,39,8],[77,7,39,9],[77,13,40,13],[78,8,41,12,"elapsed"],[78,15,41,19],[78,18,41,22],[78,22,41,22,"loopElapsed"],[78,38,41,33],[78,39,41,33,"loopElapsed"],[78,50,41,33],[78,52,41,34,"elapsed"],[78,59,41,41],[78,61,41,43,"computedDuration"],[78,77,41,59],[78,79,41,61,"repeatDelay"],[78,90,41,72],[78,91,41,73],[79,8,42,12],[79,12,42,16,"repeatType"],[79,22,42,26],[79,27,42,31],[79,35,42,39],[79,37,43,16,"animation"],[79,46,43,25],[79,47,43,26,"flipTarget"],[79,57,43,36],[79,58,43,37],[79,59,43,38],[80,6,44,8],[81,6,45,8,"isComplete"],[81,16,45,18],[81,19,45,21],[81,24,45,26],[82,6,46,8,"onRepeat"],[82,14,46,16],[82,18,46,20,"onRepeat"],[82,26,46,28],[82,27,46,29],[82,28,46,30],[83,4,47,4],[84,4,48,4],[84,13,48,13,"complete"],[84,21,48,21,"complete"],[84,22,48,21],[84,24,48,24],[85,6,49,8,"driverControls"],[85,20,49,22],[85,21,49,23,"stop"],[85,25,49,27],[85,26,49,28],[85,27,49,29],[86,6,50,8,"onComplete"],[86,16,50,18],[86,20,50,22,"onComplete"],[86,30,50,32],[86,31,50,33],[86,32,50,34],[87,4,51,4],[88,4,52,4],[88,13,52,13,"update"],[88,19,52,19,"update"],[88,20,52,20,"delta"],[88,25,52,25],[88,27,52,27],[89,6,53,8],[89,10,53,12],[89,11,53,13,"isForwardPlayback"],[89,28,53,30],[89,30,54,12,"delta"],[89,35,54,17],[89,38,54,20],[89,39,54,21,"delta"],[89,44,54,26],[90,6,55,8,"elapsed"],[90,13,55,15],[90,17,55,19,"delta"],[90,22,55,24],[91,6,56,8],[91,10,56,12],[91,11,56,13,"isComplete"],[91,21,56,23],[91,23,56,25],[92,8,57,12],[92,14,57,18,"state"],[92,19,57,23],[92,22,57,26,"animation"],[92,31,57,35],[92,32,57,36,"next"],[92,36,57,40],[92,37,57,41,"Math"],[92,41,57,45],[92,42,57,46,"max"],[92,45,57,49],[92,46,57,50],[92,47,57,51],[92,49,57,53,"elapsed"],[92,56,57,60],[92,57,57,61],[92,58,57,62],[93,8,58,12,"latest"],[93,14,58,18],[93,17,58,21,"state"],[93,22,58,26],[93,23,58,27,"value"],[93,28,58,32],[94,8,59,12],[94,12,59,16,"interpolateFromNumber"],[94,33,59,37],[94,35,60,16,"latest"],[94,41,60,22],[94,44,60,25,"interpolateFromNumber"],[94,65,60,46],[94,66,60,47,"latest"],[94,72,60,53],[94,73,60,54],[95,8,61,12,"isComplete"],[95,18,61,22],[95,21,61,25,"isForwardPlayback"],[95,38,61,42],[95,41,61,45,"state"],[95,46,61,50],[95,47,61,51,"done"],[95,51,61,55],[95,54,61,58,"elapsed"],[95,61,61,65],[95,65,61,69],[95,66,61,70],[96,6,62,8],[97,6,63,8,"onUpdate"],[97,14,63,16],[97,19,63,21],[97,23,63,25],[97,27,63,29,"onUpdate"],[97,35,63,37],[97,40,63,42],[97,45,63,47],[97,46,63,48],[97,49,63,51],[97,54,63,56],[97,55,63,57],[97,58,63,60,"onUpdate"],[97,66,63,68],[97,67,63,69,"latest"],[97,73,63,75],[97,74,63,76],[98,6,64,8],[98,10,64,12,"isComplete"],[98,20,64,22],[98,22,64,24],[99,8,65,12],[99,12,65,16,"repeatCount"],[99,23,65,27],[99,28,65,32],[99,29,65,33],[99,31,66,16,"computedDuration"],[99,47,66,32],[99,52,66,37],[99,56,66,41],[99,60,66,45,"computedDuration"],[99,76,66,61],[99,81,66,66],[99,86,66,71],[99,87,66,72],[99,90,66,75,"computedDuration"],[99,106,66,91],[99,109,66,95,"computedDuration"],[99,125,66,111],[99,128,66,114,"elapsed"],[99,135,66,122],[100,8,67,12],[100,12,67,16,"repeatCount"],[100,23,67,27],[100,26,67,30,"repeatMax"],[100,35,67,39],[100,37,67,41],[101,10,68,16],[101,14,68,16,"hasRepeatDelayElapsed"],[101,30,68,37],[101,31,68,37,"hasRepeatDelayElapsed"],[101,52,68,37],[101,54,68,38,"elapsed"],[101,61,68,45],[101,63,68,47,"computedDuration"],[101,79,68,63],[101,81,68,65,"repeatDelay"],[101,92,68,76],[101,94,68,78,"isForwardPlayback"],[101,111,68,95],[101,112,68,96],[101,116,68,100,"repeat"],[101,122,68,106],[101,123,68,107],[101,124,68,108],[102,8,69,12],[102,9,69,13],[102,15,70,17],[103,10,71,16,"complete"],[103,18,71,24],[103,19,71,25],[103,20,71,26],[104,8,72,12],[105,6,73,8],[106,4,74,4],[107,4,75,4],[107,13,75,13,"play"],[107,17,75,17,"play"],[107,18,75,17],[107,20,75,20],[108,6,76,8,"onPlay"],[108,12,76,14],[108,17,76,19],[108,21,76,23],[108,25,76,27,"onPlay"],[108,31,76,33],[108,36,76,38],[108,41,76,43],[108,42,76,44],[108,45,76,47],[108,50,76,52],[108,51,76,53],[108,54,76,56,"onPlay"],[108,60,76,62],[108,61,76,63],[108,62,76,64],[109,6,77,8,"driverControls"],[109,20,77,22],[109,23,77,25,"driver"],[109,29,77,31],[109,30,77,32,"update"],[109,36,77,38],[109,37,77,39],[110,6,78,8,"driverControls"],[110,20,78,22],[110,21,78,23,"start"],[110,26,78,28],[110,27,78,29],[110,28,78,30],[111,4,79,4],[112,4,80,4,"autoplay"],[112,12,80,12],[112,16,80,16,"play"],[112,20,80,20],[112,21,80,21],[112,22,80,22],[113,4,81,4],[113,11,81,11],[114,6,82,8,"stop"],[114,10,82,12],[114,12,82,14,"stop"],[114,13,82,14],[114,18,82,20],[115,8,83,12,"onStop"],[115,14,83,18],[115,19,83,23],[115,23,83,27],[115,27,83,31,"onStop"],[115,33,83,37],[115,38,83,42],[115,43,83,47],[115,44,83,48],[115,47,83,51],[115,52,83,56],[115,53,83,57],[115,56,83,60,"onStop"],[115,62,83,66],[115,63,83,67],[115,64,83,68],[116,8,84,12,"driverControls"],[116,22,84,26],[116,23,84,27,"stop"],[116,27,84,31],[116,28,84,32],[116,29,84,33],[117,6,85,8],[118,4,86,4],[118,5,86,5],[119,2,87,0],[120,0,87,1],[120,3]],"functionMap":{"names":["<global>","framesync","passTimestamp","start","stop","animate","repeat","complete","update","play"],"mappings":"AAA;kBCM;0BCC,4BD;eEE,sCF;cGC,sCH;CDE;AKC;ICoB;KDa;IEC;KFG;IGC;KHsB;IIC;KJI;cDG;SCG;CLE"},"hasCjsExports":false},"type":"js/module"}]}