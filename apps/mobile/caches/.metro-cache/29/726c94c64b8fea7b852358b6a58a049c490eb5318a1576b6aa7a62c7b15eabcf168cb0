{"dependencies":[{"name":"./index.mjs","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":38,"index":38}}],"key":"cuwnQ/7dLRmHTfWH1o/Hl4dROAg=","exportNames":["*"],"imports":1}},{"name":"../utils/velocity-per-second.mjs","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":39},"end":{"line":2,"column":69,"index":108}}],"key":"7cU6cjYP6PsuiRpdIVOQqfAV7/E=","exportNames":["*"],"imports":1}},{"name":"framesync","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":3,"column":0,"index":109},"end":{"line":3,"column":41,"index":150}}],"key":"24PTcPTPyjPm5C9bri3IX7JZMU4=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  Object.defineProperty(exports, \"inertia\", {\n    enumerable: true,\n    get: function () {\n      return inertia;\n    }\n  });\n  var _indexMjs = require(_dependencyMap[0], \"./index.mjs\");\n  var _utilsVelocityPerSecondMjs = require(_dependencyMap[1], \"../utils/velocity-per-second.mjs\");\n  var _framesync = require(_dependencyMap[2], \"framesync\");\n  function inertia({\n    from = 0,\n    velocity = 0,\n    min,\n    max,\n    power = 0.8,\n    timeConstant = 750,\n    bounceStiffness = 500,\n    bounceDamping = 10,\n    restDelta = 1,\n    modifyTarget,\n    driver,\n    onUpdate,\n    onComplete,\n    onStop\n  }) {\n    let currentAnimation;\n    function isOutOfBounds(v) {\n      return min !== undefined && v < min || max !== undefined && v > max;\n    }\n    function boundaryNearest(v) {\n      if (min === undefined) return max;\n      if (max === undefined) return min;\n      return Math.abs(min - v) < Math.abs(max - v) ? min : max;\n    }\n    function startAnimation(options) {\n      currentAnimation === null || currentAnimation === void 0 ? void 0 : currentAnimation.stop();\n      currentAnimation = (0, _indexMjs.animate)(Object.assign(Object.assign({}, options), {\n        driver,\n        onUpdate: v => {\n          var _a;\n          onUpdate === null || onUpdate === void 0 ? void 0 : onUpdate(v);\n          (_a = options.onUpdate) === null || _a === void 0 ? void 0 : _a.call(options, v);\n        },\n        onComplete,\n        onStop\n      }));\n    }\n    function startSpring(options) {\n      startAnimation(Object.assign({\n        type: \"spring\",\n        stiffness: bounceStiffness,\n        damping: bounceDamping,\n        restDelta\n      }, options));\n    }\n    if (isOutOfBounds(from)) {\n      startSpring({\n        from,\n        velocity,\n        to: boundaryNearest(from)\n      });\n    } else {\n      let target = power * velocity + from;\n      if (typeof modifyTarget !== \"undefined\") target = modifyTarget(target);\n      const boundary = boundaryNearest(target);\n      const heading = boundary === min ? -1 : 1;\n      let prev;\n      let current;\n      const checkBoundary = v => {\n        prev = current;\n        current = v;\n        velocity = (0, _utilsVelocityPerSecondMjs.velocityPerSecond)(v - prev, (0, _framesync.getFrameData)().delta);\n        if (heading === 1 && v > boundary || heading === -1 && v < boundary) {\n          startSpring({\n            from: v,\n            to: boundary,\n            velocity\n          });\n        }\n      };\n      startAnimation({\n        type: \"decay\",\n        from,\n        velocity,\n        timeConstant,\n        power,\n        restDelta,\n        modifyTarget,\n        onUpdate: isOutOfBounds(target) ? checkBoundary : undefined\n      });\n    }\n    return {\n      stop: () => currentAnimation === null || currentAnimation === void 0 ? void 0 : currentAnimation.stop()\n    };\n  }\n});","lineCount":102,"map":[[7,2,65,0,"Object"],[7,8,65,0],[7,9,65,0,"defineProperty"],[7,23,65,0],[7,24,65,0,"exports"],[7,31,65,0],[8,4,65,0,"enumerable"],[8,14,65,0],[9,4,65,0,"get"],[9,7,65,0],[9,18,65,0,"get"],[9,19,65,0],[10,6,65,0],[10,13,65,9,"inertia"],[10,20,65,16],[11,4,65,16],[12,2,65,16],[13,2,1,0],[13,6,1,0,"_indexMjs"],[13,15,1,0],[13,18,1,0,"require"],[13,25,1,0],[13,26,1,0,"_dependencyMap"],[13,40,1,0],[14,2,2,0],[14,6,2,0,"_utilsVelocityPerSecondMjs"],[14,32,2,0],[14,35,2,0,"require"],[14,42,2,0],[14,43,2,0,"_dependencyMap"],[14,57,2,0],[15,2,3,0],[15,6,3,0,"_framesync"],[15,16,3,0],[15,19,3,0,"require"],[15,26,3,0],[15,27,3,0,"_dependencyMap"],[15,41,3,0],[16,2,5,0],[16,11,5,9,"inertia"],[16,18,5,16,"inertia"],[16,19,5,17],[17,4,5,19,"from"],[17,8,5,23],[17,11,5,26],[17,12,5,27],[18,4,5,29,"velocity"],[18,12,5,37],[18,15,5,40],[18,16,5,41],[19,4,5,43,"min"],[19,7,5,46],[20,4,5,48,"max"],[20,7,5,51],[21,4,5,53,"power"],[21,9,5,58],[21,12,5,61],[21,15,5,64],[22,4,5,66,"timeConstant"],[22,16,5,78],[22,19,5,81],[22,22,5,84],[23,4,5,86,"bounceStiffness"],[23,19,5,101],[23,22,5,104],[23,25,5,107],[24,4,5,109,"bounceDamping"],[24,17,5,122],[24,20,5,125],[24,22,5,127],[25,4,5,129,"restDelta"],[25,13,5,138],[25,16,5,141],[25,17,5,142],[26,4,5,144,"modifyTarget"],[26,16,5,156],[27,4,5,158,"driver"],[27,10,5,164],[28,4,5,166,"onUpdate"],[28,12,5,174],[29,4,5,176,"onComplete"],[29,14,5,186],[30,4,5,188,"onStop"],[31,2,5,196],[31,3,5,197],[31,5,5,199],[32,4,6,4],[32,8,6,8,"currentAnimation"],[32,24,6,24],[33,4,7,4],[33,13,7,13,"isOutOfBounds"],[33,26,7,26,"isOutOfBounds"],[33,27,7,27,"v"],[33,28,7,28],[33,30,7,30],[34,6,8,8],[34,13,8,16,"min"],[34,16,8,19],[34,21,8,24,"undefined"],[34,30,8,33],[34,34,8,37,"v"],[34,35,8,38],[34,38,8,41,"min"],[34,41,8,44],[34,45,8,50,"max"],[34,48,8,53],[34,53,8,58,"undefined"],[34,62,8,67],[34,66,8,71,"v"],[34,67,8,72],[34,70,8,75,"max"],[34,73,8,79],[35,4,9,4],[36,4,10,4],[36,13,10,13,"boundaryNearest"],[36,28,10,28,"boundaryNearest"],[36,29,10,29,"v"],[36,30,10,30],[36,32,10,32],[37,6,11,8],[37,10,11,12,"min"],[37,13,11,15],[37,18,11,20,"undefined"],[37,27,11,29],[37,29,12,12],[37,36,12,19,"max"],[37,39,12,22],[38,6,13,8],[38,10,13,12,"max"],[38,13,13,15],[38,18,13,20,"undefined"],[38,27,13,29],[38,29,14,12],[38,36,14,19,"min"],[38,39,14,22],[39,6,15,8],[39,13,15,15,"Math"],[39,17,15,19],[39,18,15,20,"abs"],[39,21,15,23],[39,22,15,24,"min"],[39,25,15,27],[39,28,15,30,"v"],[39,29,15,31],[39,30,15,32],[39,33,15,35,"Math"],[39,37,15,39],[39,38,15,40,"abs"],[39,41,15,43],[39,42,15,44,"max"],[39,45,15,47],[39,48,15,50,"v"],[39,49,15,51],[39,50,15,52],[39,53,15,55,"min"],[39,56,15,58],[39,59,15,61,"max"],[39,62,15,64],[40,4,16,4],[41,4,17,4],[41,13,17,13,"startAnimation"],[41,27,17,27,"startAnimation"],[41,28,17,28,"options"],[41,35,17,35],[41,37,17,37],[42,6,18,8,"currentAnimation"],[42,22,18,24],[42,27,18,29],[42,31,18,33],[42,35,18,37,"currentAnimation"],[42,51,18,53],[42,56,18,58],[42,61,18,63],[42,62,18,64],[42,65,18,67],[42,70,18,72],[42,71,18,73],[42,74,18,76,"currentAnimation"],[42,90,18,92],[42,91,18,93,"stop"],[42,95,18,97],[42,96,18,98],[42,97,18,99],[43,6,19,8,"currentAnimation"],[43,22,19,24],[43,25,19,27],[43,29,19,27,"animate"],[43,38,19,34],[43,39,19,34,"animate"],[43,46,19,34],[43,48,19,35,"Object"],[43,54,19,41],[43,55,19,42,"assign"],[43,61,19,48],[43,62,19,49,"Object"],[43,68,19,55],[43,69,19,56,"assign"],[43,75,19,62],[43,76,19,63],[43,77,19,64],[43,78,19,65],[43,80,19,67,"options"],[43,87,19,74],[43,88,19,75],[43,90,19,77],[44,8,19,79,"driver"],[44,14,19,85],[45,8,19,87,"onUpdate"],[45,16,19,95],[45,18,19,98,"v"],[45,19,19,99],[45,23,19,104],[46,10,20,16],[46,14,20,20,"_a"],[46,16,20,22],[47,10,21,16,"onUpdate"],[47,18,21,24],[47,23,21,29],[47,27,21,33],[47,31,21,37,"onUpdate"],[47,39,21,45],[47,44,21,50],[47,49,21,55],[47,50,21,56],[47,53,21,59],[47,58,21,64],[47,59,21,65],[47,62,21,68,"onUpdate"],[47,70,21,76],[47,71,21,77,"v"],[47,72,21,78],[47,73,21,79],[48,10,22,16],[48,11,22,17,"_a"],[48,13,22,19],[48,16,22,22,"options"],[48,23,22,29],[48,24,22,30,"onUpdate"],[48,32,22,38],[48,38,22,44],[48,42,22,48],[48,46,22,52,"_a"],[48,48,22,54],[48,53,22,59],[48,58,22,64],[48,59,22,65],[48,62,22,68],[48,67,22,73],[48,68,22,74],[48,71,22,77,"_a"],[48,73,22,79],[48,74,22,80,"call"],[48,78,22,84],[48,79,22,85,"options"],[48,86,22,92],[48,88,22,94,"v"],[48,89,22,95],[48,90,22,96],[49,8,23,12],[49,9,23,13],[50,8,23,15,"onComplete"],[50,18,23,25],[51,8,24,12,"onStop"],[52,6,24,19],[52,7,24,20],[52,8,24,21],[52,9,24,22],[53,4,25,4],[54,4,26,4],[54,13,26,13,"startSpring"],[54,24,26,24,"startSpring"],[54,25,26,25,"options"],[54,32,26,32],[54,34,26,34],[55,6,27,8,"startAnimation"],[55,20,27,22],[55,21,27,23,"Object"],[55,27,27,29],[55,28,27,30,"assign"],[55,34,27,36],[55,35,27,37],[56,8,27,39,"type"],[56,12,27,43],[56,14,27,45],[56,22,27,53],[57,8,27,55,"stiffness"],[57,17,27,64],[57,19,27,66,"bounceStiffness"],[57,34,27,81],[58,8,27,83,"damping"],[58,15,27,90],[58,17,27,92,"bounceDamping"],[58,30,27,105],[59,8,27,107,"restDelta"],[60,6,27,117],[60,7,27,118],[60,9,27,120,"options"],[60,16,27,127],[60,17,27,128],[60,18,27,129],[61,4,28,4],[62,4,29,4],[62,8,29,8,"isOutOfBounds"],[62,21,29,21],[62,22,29,22,"from"],[62,26,29,26],[62,27,29,27],[62,29,29,29],[63,6,30,8,"startSpring"],[63,17,30,19],[63,18,30,20],[64,8,30,22,"from"],[64,12,30,26],[65,8,30,28,"velocity"],[65,16,30,36],[66,8,30,38,"to"],[66,10,30,40],[66,12,30,42,"boundaryNearest"],[66,27,30,57],[66,28,30,58,"from"],[66,32,30,62],[67,6,30,64],[67,7,30,65],[67,8,30,66],[68,4,31,4],[68,5,31,5],[68,11,32,9],[69,6,33,8],[69,10,33,12,"target"],[69,16,33,18],[69,19,33,21,"power"],[69,24,33,26],[69,27,33,29,"velocity"],[69,35,33,37],[69,38,33,40,"from"],[69,42,33,44],[70,6,34,8],[70,10,34,12],[70,17,34,19,"modifyTarget"],[70,29,34,31],[70,34,34,36],[70,45,34,47],[70,47,35,12,"target"],[70,53,35,18],[70,56,35,21,"modifyTarget"],[70,68,35,33],[70,69,35,34,"target"],[70,75,35,40],[70,76,35,41],[71,6,36,8],[71,12,36,14,"boundary"],[71,20,36,22],[71,23,36,25,"boundaryNearest"],[71,38,36,40],[71,39,36,41,"target"],[71,45,36,47],[71,46,36,48],[72,6,37,8],[72,12,37,14,"heading"],[72,19,37,21],[72,22,37,24,"boundary"],[72,30,37,32],[72,35,37,37,"min"],[72,38,37,40],[72,41,37,43],[72,42,37,44],[72,43,37,45],[72,46,37,48],[72,47,37,49],[73,6,38,8],[73,10,38,12,"prev"],[73,14,38,16],[74,6,39,8],[74,10,39,12,"current"],[74,17,39,19],[75,6,40,8],[75,12,40,14,"checkBoundary"],[75,25,40,27],[75,28,40,31,"v"],[75,29,40,32],[75,33,40,37],[76,8,41,12,"prev"],[76,12,41,16],[76,15,41,19,"current"],[76,22,41,26],[77,8,42,12,"current"],[77,15,42,19],[77,18,42,22,"v"],[77,19,42,23],[78,8,43,12,"velocity"],[78,16,43,20],[78,19,43,23],[78,23,43,23,"velocityPerSecond"],[78,49,43,40],[78,50,43,40,"velocityPerSecond"],[78,67,43,40],[78,69,43,41,"v"],[78,70,43,42],[78,73,43,45,"prev"],[78,77,43,49],[78,79,43,51],[78,83,43,51,"getFrameData"],[78,93,43,63],[78,94,43,63,"getFrameData"],[78,106,43,63],[78,108,43,64],[78,109,43,65],[78,110,43,66,"delta"],[78,115,43,71],[78,116,43,72],[79,8,44,12],[79,12,44,17,"heading"],[79,19,44,24],[79,24,44,29],[79,25,44,30],[79,29,44,34,"v"],[79,30,44,35],[79,33,44,38,"boundary"],[79,41,44,46],[79,45,45,17,"heading"],[79,52,45,24],[79,57,45,29],[79,58,45,30],[79,59,45,31],[79,63,45,35,"v"],[79,64,45,36],[79,67,45,39,"boundary"],[79,75,45,48],[79,77,45,50],[80,10,46,16,"startSpring"],[80,21,46,27],[80,22,46,28],[81,12,46,30,"from"],[81,16,46,34],[81,18,46,36,"v"],[81,19,46,37],[82,12,46,39,"to"],[82,14,46,41],[82,16,46,43,"boundary"],[82,24,46,51],[83,12,46,53,"velocity"],[84,10,46,62],[84,11,46,63],[84,12,46,64],[85,8,47,12],[86,6,48,8],[86,7,48,9],[87,6,49,8,"startAnimation"],[87,20,49,22],[87,21,49,23],[88,8,50,12,"type"],[88,12,50,16],[88,14,50,18],[88,21,50,25],[89,8,51,12,"from"],[89,12,51,16],[90,8,52,12,"velocity"],[90,16,52,20],[91,8,53,12,"timeConstant"],[91,20,53,24],[92,8,54,12,"power"],[92,13,54,17],[93,8,55,12,"restDelta"],[93,17,55,21],[94,8,56,12,"modifyTarget"],[94,20,56,24],[95,8,57,12,"onUpdate"],[95,16,57,20],[95,18,57,22,"isOutOfBounds"],[95,31,57,35],[95,32,57,36,"target"],[95,38,57,42],[95,39,57,43],[95,42,57,46,"checkBoundary"],[95,55,57,59],[95,58,57,62,"undefined"],[96,6,58,8],[96,7,58,9],[96,8,58,10],[97,4,59,4],[98,4,60,4],[98,11,60,11],[99,6,61,8,"stop"],[99,10,61,12],[99,12,61,14,"stop"],[99,13,61,14],[99,18,61,20,"currentAnimation"],[99,34,61,36],[99,39,61,41],[99,43,61,45],[99,47,61,49,"currentAnimation"],[99,63,61,65],[99,68,61,70],[99,73,61,75],[99,74,61,76],[99,77,61,79],[99,82,61,84],[99,83,61,85],[99,86,61,88,"currentAnimation"],[99,102,61,104],[99,103,61,105,"stop"],[99,107,61,109],[99,108,61,110],[100,4,62,4],[100,5,62,5],[101,2,63,0],[102,0,63,1],[102,3]],"functionMap":{"names":["<global>","inertia","isOutOfBounds","boundaryNearest","startAnimation","Object.assign$argument_1.onUpdate","startSpring","checkBoundary","stop"],"mappings":"AAA;ACI;ICE;KDE;IEC;KFM;IGC;iGCE;aDI;KHE;IKC;KLE;8BMY;SNQ;cOa,iGP;CDE"},"hasCjsExports":false},"type":"js/module"}]}