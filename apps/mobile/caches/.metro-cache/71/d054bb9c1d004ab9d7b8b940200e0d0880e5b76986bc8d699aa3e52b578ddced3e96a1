{"dependencies":[],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  Object.defineProperty(exports, \"VelocityTracker\", {\n    enumerable: true,\n    get: function () {\n      return VelocityTracker;\n    }\n  });\n  class VelocityTracker {\n    constructor() {\n      this.history = [];\n      this.lastPosition = undefined;\n      this.lastTimestamp = undefined;\n    }\n    add(position) {\n      const timestamp = new Date().valueOf();\n      if (this.lastPosition && this.lastTimestamp && timestamp > this.lastTimestamp) {\n        const diff = position - this.lastPosition;\n        if (diff > 0.001 || diff < -0.001) {\n          this.history.push(diff / (timestamp - this.lastTimestamp));\n        }\n      }\n      this.lastPosition = position;\n      this.lastTimestamp = timestamp;\n    }\n    estimateSpeed() {\n      const finalTrend = this.history.slice(-3);\n      const sum = finalTrend.reduce((r, v) => r + v, 0);\n      return sum / finalTrend.length;\n    }\n    reset() {\n      this.history = [];\n      this.lastPosition = undefined;\n      this.lastTimestamp = undefined;\n    }\n  }\n});","lineCount":41,"map":[[7,2,1,0,"Object"],[7,8,1,0],[7,9,1,0,"defineProperty"],[7,23,1,0],[7,24,1,0,"exports"],[7,31,1,0],[8,4,1,0,"enumerable"],[8,14,1,0],[9,4,1,0,"get"],[9,7,1,0],[9,18,1,0,"get"],[9,19,1,0],[10,6,1,0],[10,13,1,0,"VelocityTracker"],[10,28,1,0],[11,4,1,0],[12,2,1,0],[13,2,1,7],[13,8,1,13,"VelocityTracker"],[13,23,1,28],[13,24,1,29],[14,4,6,2,"constructor"],[14,15,6,13,"constructor"],[14,16,6,13],[14,18,6,16],[15,6,7,4],[15,10,7,8],[15,11,7,9,"history"],[15,18,7,16],[15,21,7,19],[15,23,7,21],[16,6,8,4],[16,10,8,8],[16,11,8,9,"lastPosition"],[16,23,8,21],[16,26,8,24,"undefined"],[16,35,8,33],[17,6,9,4],[17,10,9,8],[17,11,9,9,"lastTimestamp"],[17,24,9,22],[17,27,9,25,"undefined"],[17,36,9,34],[18,4,10,2],[19,4,12,2,"add"],[19,7,12,5,"add"],[19,8,12,6,"position"],[19,16,12,22],[19,18,12,24],[20,6,13,4],[20,12,13,10,"timestamp"],[20,21,13,19],[20,24,13,22],[20,28,13,26,"Date"],[20,32,13,30],[20,33,13,31],[20,34,13,32],[20,35,13,33,"valueOf"],[20,42,13,40],[20,43,13,41],[20,44,13,42],[21,6,14,4],[21,10,14,8],[21,14,14,12],[21,15,14,13,"lastPosition"],[21,27,14,25],[21,31,14,29],[21,35,14,33],[21,36,14,34,"lastTimestamp"],[21,49,14,47],[21,53,14,51,"timestamp"],[21,62,14,60],[21,65,14,63],[21,69,14,67],[21,70,14,68,"lastTimestamp"],[21,83,14,81],[21,85,14,83],[22,8,15,6],[22,14,15,12,"diff"],[22,18,15,16],[22,21,15,19,"position"],[22,29,15,27],[22,32,15,30],[22,36,15,34],[22,37,15,35,"lastPosition"],[22,49,15,47],[23,8,16,6],[23,12,16,10,"diff"],[23,16,16,14],[23,19,16,17],[23,24,16,22],[23,28,16,26,"diff"],[23,32,16,30],[23,35,16,33],[23,36,16,34],[23,41,16,39],[23,43,16,41],[24,10,17,8],[24,14,17,12],[24,15,17,13,"history"],[24,22,17,20],[24,23,17,21,"push"],[24,27,17,25],[24,28,17,26,"diff"],[24,32,17,30],[24,36,17,34,"timestamp"],[24,45,17,43],[24,48,17,46],[24,52,17,50],[24,53,17,51,"lastTimestamp"],[24,66,17,64],[24,67,17,65],[24,68,17,66],[25,8,18,6],[26,6,19,4],[27,6,20,4],[27,10,20,8],[27,11,20,9,"lastPosition"],[27,23,20,21],[27,26,20,24,"position"],[27,34,20,32],[28,6,21,4],[28,10,21,8],[28,11,21,9,"lastTimestamp"],[28,24,21,22],[28,27,21,25,"timestamp"],[28,36,21,34],[29,4,22,2],[30,4,24,2,"estimateSpeed"],[30,17,24,15,"estimateSpeed"],[30,18,24,15],[30,20,24,18],[31,6,25,4],[31,12,25,10,"finalTrend"],[31,22,25,20],[31,25,25,23],[31,29,25,27],[31,30,25,28,"history"],[31,37,25,35],[31,38,25,36,"slice"],[31,43,25,41],[31,44,25,42],[31,45,25,43],[31,46,25,44],[31,47,25,45],[32,6,26,4],[32,12,26,10,"sum"],[32,15,26,13],[32,18,26,16,"finalTrend"],[32,28,26,26],[32,29,26,27,"reduce"],[32,35,26,33],[32,36,26,34],[32,37,26,35,"r"],[32,38,26,36],[32,40,26,38,"v"],[32,41,26,39],[32,46,26,44,"r"],[32,47,26,45],[32,50,26,48,"v"],[32,51,26,49],[32,53,26,51],[32,54,26,52],[32,55,26,53],[33,6,27,4],[33,13,27,11,"sum"],[33,16,27,14],[33,19,27,17,"finalTrend"],[33,29,27,27],[33,30,27,28,"length"],[33,36,27,34],[34,4,28,2],[35,4,30,2,"reset"],[35,9,30,7,"reset"],[35,10,30,7],[35,12,30,10],[36,6,31,4],[36,10,31,8],[36,11,31,9,"history"],[36,18,31,16],[36,21,31,19],[36,23,31,21],[37,6,32,4],[37,10,32,8],[37,11,32,9,"lastPosition"],[37,23,32,21],[37,26,32,24,"undefined"],[37,35,32,33],[38,6,33,4],[38,10,33,8],[38,11,33,9,"lastTimestamp"],[38,24,33,22],[38,27,33,25,"undefined"],[38,36,33,34],[39,4,34,2],[40,2,35,0],[41,0,35,1],[41,3]],"functionMap":{"names":["<global>","VelocityTracker","VelocityTracker#constructor","VelocityTracker#add","VelocityTracker#estimateSpeed","finalTrend.reduce$argument_0","VelocityTracker#reset"],"mappings":"AAA,OC;ECK;GDI;EEE;GFU;EGE;kCCE,eD;GHE;EKE;GLI;CDC"},"hasCjsExports":false},"type":"js/module"}]}