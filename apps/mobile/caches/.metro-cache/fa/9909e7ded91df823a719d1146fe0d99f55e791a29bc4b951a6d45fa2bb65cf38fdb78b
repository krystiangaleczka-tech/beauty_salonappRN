{"dependencies":[{"name":"tslib","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":33,"index":33}}],"key":"8R25577gwLd3n1hFG9VYnRLV9eE=","exportNames":["*"],"imports":1}},{"name":"react","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":34},"end":{"line":2,"column":31,"index":65}}],"key":"RtGiGa+/H7VrI7GDQDLhO1UbpU8=","exportNames":["*"],"imports":1}},{"name":"../../context/PresenceContext.mjs","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":4,"column":0,"index":99},"end":{"line":4,"column":68,"index":167}}],"key":"770CUHTf+IRHceT11QtbGTttEvo=","exportNames":["*"],"imports":1}},{"name":"../../utils/use-constant.mjs","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":5,"column":0,"index":168},"end":{"line":5,"column":59,"index":227}}],"key":"fOYXwMLKWJV2ZT9WZTEjSFQflr8=","exportNames":["*"],"imports":1}},{"name":"../../utils/use-id.mjs","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":6,"column":0,"index":228},"end":{"line":6,"column":47,"index":275}}],"key":"JqSC2aATXgoDNYGbJkQwdjLE+2A=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopNamespace(e) {\n    if (e && e.__esModule) return e;\n    var n = {};\n    if (e) Object.keys(e).forEach(function (k) {\n      var d = Object.getOwnPropertyDescriptor(e, k);\n      Object.defineProperty(n, k, d.get ? d : {\n        enumerable: true,\n        get: function () {\n          return e[k];\n        }\n      });\n    });\n    n.default = e;\n    return n;\n  }\n  Object.defineProperty(exports, \"PresenceChild\", {\n    enumerable: true,\n    get: function () {\n      return PresenceChild;\n    }\n  });\n  var _tslib = require(_dependencyMap[0], \"tslib\");\n  var _react = require(_dependencyMap[1], \"react\");\n  var React = _interopNamespace(_react);\n  var _contextPresenceContextMjs = require(_dependencyMap[2], \"../../context/PresenceContext.mjs\");\n  var _utilsUseConstantMjs = require(_dependencyMap[3], \"../../utils/use-constant.mjs\");\n  var _utilsUseIdMjs = require(_dependencyMap[4], \"../../utils/use-id.mjs\");\n  var PresenceChild = function (_a) {\n    var children = _a.children,\n      initial = _a.initial,\n      isPresent = _a.isPresent,\n      onExitComplete = _a.onExitComplete,\n      custom = _a.custom,\n      presenceAffectsLayout = _a.presenceAffectsLayout;\n    var presenceChildren = (0, _utilsUseConstantMjs.useConstant)(newChildrenMap);\n    var id = (0, _utilsUseIdMjs.useId)();\n    var context = (0, _react.useMemo)(function () {\n      return {\n        id: id,\n        initial: initial,\n        isPresent: isPresent,\n        custom: custom,\n        onExitComplete: function (childId) {\n          var e_1, _a;\n          presenceChildren.set(childId, true);\n          try {\n            for (var _b = (0, _tslib.__values)(presenceChildren.values()), _c = _b.next(); !_c.done; _c = _b.next()) {\n              var isComplete = _c.value;\n              if (!isComplete) return; // can stop searching when any is incomplete\n            }\n          } catch (e_1_1) {\n            e_1 = {\n              error: e_1_1\n            };\n          } finally {\n            try {\n              if (_c && !_c.done && (_a = _b.return)) _a.call(_b);\n            } finally {\n              if (e_1) throw e_1.error;\n            }\n          }\n          onExitComplete === null || onExitComplete === void 0 ? void 0 : onExitComplete();\n        },\n        register: function (childId) {\n          presenceChildren.set(childId, false);\n          return function () {\n            return presenceChildren.delete(childId);\n          };\n        }\n      };\n    },\n    /**\n     * If the presence of a child affects the layout of the components around it,\n     * we want to make a new context value to ensure they get re-rendered\n     * so they can detect that layout change.\n     */\n    presenceAffectsLayout ? undefined : [isPresent]);\n    (0, _react.useMemo)(function () {\n      presenceChildren.forEach(function (_, key) {\n        return presenceChildren.set(key, false);\n      });\n    }, [isPresent]);\n    /**\n     * If there's no `motion` components to fire exit animations, we want to remove this\n     * component immediately.\n     */\n    React.useEffect(function () {\n      !isPresent && !presenceChildren.size && (onExitComplete === null || onExitComplete === void 0 ? void 0 : onExitComplete());\n    }, [isPresent]);\n    return /*#__PURE__*/React.createElement(_contextPresenceContextMjs.PresenceContext.Provider, {\n      value: context\n    }, children);\n  };\n  function newChildrenMap() {\n    return new Map();\n  }\n});","lineCount":103,"map":[[22,2,63,0,"Object"],[22,8,63,0],[22,9,63,0,"defineProperty"],[22,23,63,0],[22,24,63,0,"exports"],[22,31,63,0],[23,4,63,0,"enumerable"],[23,14,63,0],[24,4,63,0,"get"],[24,7,63,0],[24,18,63,0,"get"],[24,19,63,0],[25,6,63,0],[25,13,63,9,"PresenceChild"],[25,26,63,22],[26,4,63,22],[27,2,63,22],[28,2,1,0],[28,6,1,0,"_tslib"],[28,12,1,0],[28,15,1,0,"require"],[28,22,1,0],[28,23,1,0,"_dependencyMap"],[28,37,1,0],[29,2,2,0],[29,6,2,0,"_react"],[29,12,2,0],[29,15,2,0,"require"],[29,22,2,0],[29,23,2,0,"_dependencyMap"],[29,37,2,0],[30,2,2,0],[30,6,2,0,"React"],[30,11,2,0],[30,14,2,0,"_interopNamespace"],[30,31,2,0],[30,32,2,0,"_react"],[30,38,2,0],[31,2,4,0],[31,6,4,0,"_contextPresenceContextMjs"],[31,32,4,0],[31,35,4,0,"require"],[31,42,4,0],[31,43,4,0,"_dependencyMap"],[31,57,4,0],[32,2,5,0],[32,6,5,0,"_utilsUseConstantMjs"],[32,26,5,0],[32,29,5,0,"require"],[32,36,5,0],[32,37,5,0,"_dependencyMap"],[32,51,5,0],[33,2,6,0],[33,6,6,0,"_utilsUseIdMjs"],[33,20,6,0],[33,23,6,0,"require"],[33,30,6,0],[33,31,6,0,"_dependencyMap"],[33,45,6,0],[34,2,8,0],[34,6,8,4,"PresenceChild"],[34,19,8,17],[34,22,8,20],[34,31,8,20,"PresenceChild"],[34,32,8,30,"_a"],[34,34,8,32],[34,36,8,34],[35,4,9,4],[35,8,9,8,"children"],[35,16,9,16],[35,19,9,19,"_a"],[35,21,9,21],[35,22,9,22,"children"],[35,30,9,30],[36,6,9,32,"initial"],[36,13,9,39],[36,16,9,42,"_a"],[36,18,9,44],[36,19,9,45,"initial"],[36,26,9,52],[37,6,9,54,"isPresent"],[37,15,9,63],[37,18,9,66,"_a"],[37,20,9,68],[37,21,9,69,"isPresent"],[37,30,9,78],[38,6,9,80,"onExitComplete"],[38,20,9,94],[38,23,9,97,"_a"],[38,25,9,99],[38,26,9,100,"onExitComplete"],[38,40,9,114],[39,6,9,116,"custom"],[39,12,9,122],[39,15,9,125,"_a"],[39,17,9,127],[39,18,9,128,"custom"],[39,24,9,134],[40,6,9,136,"presenceAffectsLayout"],[40,27,9,157],[40,30,9,160,"_a"],[40,32,9,162],[40,33,9,163,"presenceAffectsLayout"],[40,54,9,184],[41,4,10,4],[41,8,10,8,"presenceChildren"],[41,24,10,24],[41,27,10,27],[41,31,10,27,"useConstant"],[41,51,10,38],[41,52,10,38,"useConstant"],[41,63,10,38],[41,65,10,39,"newChildrenMap"],[41,79,10,53],[41,80,10,54],[42,4,11,4],[42,8,11,8,"id"],[42,10,11,10],[42,13,11,13],[42,17,11,13,"useId"],[42,31,11,18],[42,32,11,18,"useId"],[42,37,11,18],[42,39,11,19],[42,40,11,20],[43,4,12,4],[43,8,12,8,"context"],[43,15,12,15],[43,18,12,18],[43,22,12,18,"useMemo"],[43,28,12,25],[43,29,12,25,"useMemo"],[43,36,12,25],[43,38,12,26],[43,50,12,38],[44,6,12,40],[44,13,12,48],[45,8,13,8,"id"],[45,10,13,10],[45,12,13,12,"id"],[45,14,13,14],[46,8,14,8,"initial"],[46,15,14,15],[46,17,14,17,"initial"],[46,24,14,24],[47,8,15,8,"isPresent"],[47,17,15,17],[47,19,15,19,"isPresent"],[47,28,15,28],[48,8,16,8,"custom"],[48,14,16,14],[48,16,16,16,"custom"],[48,22,16,22],[49,8,17,8,"onExitComplete"],[49,22,17,22],[49,24,17,24],[49,33,17,24,"onExitComplete"],[49,34,17,34,"childId"],[49,41,17,41],[49,43,17,43],[50,10,18,12],[50,14,18,16,"e_1"],[50,17,18,19],[50,19,18,21,"_a"],[50,21,18,23],[51,10,19,12,"presenceChildren"],[51,26,19,28],[51,27,19,29,"set"],[51,30,19,32],[51,31,19,33,"childId"],[51,38,19,40],[51,40,19,42],[51,44,19,46],[51,45,19,47],[52,10,20,12],[52,14,20,16],[53,12,21,16],[53,17,21,21],[53,21,21,25,"_b"],[53,23,21,27],[53,26,21,30],[53,30,21,30,"__values"],[53,36,21,38],[53,37,21,38,"__values"],[53,45,21,38],[53,47,21,39,"presenceChildren"],[53,63,21,55],[53,64,21,56,"values"],[53,70,21,62],[53,71,21,63],[53,72,21,64],[53,73,21,65],[53,75,21,67,"_c"],[53,77,21,69],[53,80,21,72,"_b"],[53,82,21,74],[53,83,21,75,"next"],[53,87,21,79],[53,88,21,80],[53,89,21,81],[53,91,21,83],[53,92,21,84,"_c"],[53,94,21,86],[53,95,21,87,"done"],[53,99,21,91],[53,101,21,93,"_c"],[53,103,21,95],[53,106,21,98,"_b"],[53,108,21,100],[53,109,21,101,"next"],[53,113,21,105],[53,114,21,106],[53,115,21,107],[53,117,21,109],[54,14,22,20],[54,18,22,24,"isComplete"],[54,28,22,34],[54,31,22,37,"_c"],[54,33,22,39],[54,34,22,40,"value"],[54,39,22,45],[55,14,23,20],[55,18,23,24],[55,19,23,25,"isComplete"],[55,29,23,35],[55,31,24,24],[55,38,24,31],[55,39,24,32],[56,12,25,16],[57,10,26,12],[57,11,26,13],[57,12,27,12],[57,19,27,19,"e_1_1"],[57,24,27,24],[57,26,27,26],[58,12,27,28,"e_1"],[58,15,27,31],[58,18,27,34],[59,14,27,36,"error"],[59,19,27,41],[59,21,27,43,"e_1_1"],[60,12,27,49],[60,13,27,50],[61,10,27,52],[61,11,27,53],[61,20,28,20],[62,12,29,16],[62,16,29,20],[63,14,30,20],[63,18,30,24,"_c"],[63,20,30,26],[63,24,30,30],[63,25,30,31,"_c"],[63,27,30,33],[63,28,30,34,"done"],[63,32,30,38],[63,37,30,43,"_a"],[63,39,30,45],[63,42,30,48,"_b"],[63,44,30,50],[63,45,30,51,"return"],[63,51,30,57],[63,52,30,58],[63,54,30,60,"_a"],[63,56,30,62],[63,57,30,63,"call"],[63,61,30,67],[63,62,30,68,"_b"],[63,64,30,70],[63,65,30,71],[64,12,31,16],[64,13,31,17],[64,22,32,24],[65,14,32,26],[65,18,32,30,"e_1"],[65,21,32,33],[65,23,32,35],[65,29,32,41,"e_1"],[65,32,32,44],[65,33,32,45,"error"],[65,38,32,50],[66,12,32,52],[67,10,33,12],[68,10,34,12,"onExitComplete"],[68,24,34,26],[68,29,34,31],[68,33,34,35],[68,37,34,39,"onExitComplete"],[68,51,34,53],[68,56,34,58],[68,61,34,63],[68,62,34,64],[68,65,34,67],[68,70,34,72],[68,71,34,73],[68,74,34,76,"onExitComplete"],[68,88,34,90],[68,89,34,91],[68,90,34,92],[69,8,35,8],[69,9,35,9],[70,8,36,8,"register"],[70,16,36,16],[70,18,36,18],[70,27,36,18,"register"],[70,28,36,28,"childId"],[70,35,36,35],[70,37,36,37],[71,10,37,12,"presenceChildren"],[71,26,37,28],[71,27,37,29,"set"],[71,30,37,32],[71,31,37,33,"childId"],[71,38,37,40],[71,40,37,42],[71,45,37,47],[71,46,37,48],[72,10,38,12],[72,17,38,19],[72,29,38,31],[73,12,38,33],[73,19,38,40,"presenceChildren"],[73,35,38,56],[73,36,38,57,"delete"],[73,42,38,63],[73,43,38,64,"childId"],[73,50,38,71],[73,51,38,72],[74,10,38,74],[74,11,38,75],[75,8,39,8],[76,6,40,4],[76,7,40,5],[77,4,40,8],[77,5,40,9],[78,4,41,4],[79,0,42,0],[80,0,43,0],[81,0,44,0],[82,0,45,0],[83,4,46,4,"presenceAffectsLayout"],[83,25,46,25],[83,28,46,28,"undefined"],[83,37,46,37],[83,40,46,40],[83,41,46,41,"isPresent"],[83,50,46,50],[83,51,46,51],[83,52,46,52],[84,4,47,4],[84,8,47,4,"useMemo"],[84,14,47,11],[84,15,47,11,"useMemo"],[84,22,47,11],[84,24,47,12],[84,36,47,24],[85,6,48,8,"presenceChildren"],[85,22,48,24],[85,23,48,25,"forEach"],[85,30,48,32],[85,31,48,33],[85,41,48,43,"_"],[85,42,48,44],[85,44,48,46,"key"],[85,47,48,49],[85,49,48,51],[86,8,48,53],[86,15,48,60,"presenceChildren"],[86,31,48,76],[86,32,48,77,"set"],[86,35,48,80],[86,36,48,81,"key"],[86,39,48,84],[86,41,48,86],[86,46,48,91],[86,47,48,92],[87,6,48,94],[87,7,48,95],[87,8,48,96],[88,4,49,4],[88,5,49,5],[88,7,49,7],[88,8,49,8,"isPresent"],[88,17,49,17],[88,18,49,18],[88,19,49,19],[89,4,50,4],[90,0,51,0],[91,0,52,0],[92,0,53,0],[93,4,54,4,"React"],[93,9,54,9],[93,10,54,10,"useEffect"],[93,19,54,19],[93,20,54,20],[93,32,54,32],[94,6,55,8],[94,7,55,9,"isPresent"],[94,16,55,18],[94,20,55,22],[94,21,55,23,"presenceChildren"],[94,37,55,39],[94,38,55,40,"size"],[94,42,55,44],[94,47,55,49,"onExitComplete"],[94,61,55,63],[94,66,55,68],[94,70,55,72],[94,74,55,76,"onExitComplete"],[94,88,55,90],[94,93,55,95],[94,98,55,100],[94,99,55,101],[94,102,55,104],[94,107,55,109],[94,108,55,110],[94,111,55,113,"onExitComplete"],[94,125,55,127],[94,126,55,128],[94,127,55,129],[94,128,55,130],[95,4,56,4],[95,5,56,5],[95,7,56,7],[95,8,56,8,"isPresent"],[95,17,56,17],[95,18,56,18],[95,19,56,19],[96,4,57,4],[96,24,57,12,"React"],[96,29,57,17],[96,30,57,18,"createElement"],[96,43,57,31],[96,44,57,32,"PresenceContext"],[96,70,57,47],[96,71,57,47,"PresenceContext"],[96,86,57,47],[96,87,57,48,"Provider"],[96,95,57,56],[96,97,57,58],[97,6,57,60,"value"],[97,11,57,65],[97,13,57,67,"context"],[98,4,57,75],[98,5,57,76],[98,7,57,78,"children"],[98,15,57,86],[98,16,57,87],[99,2,58,0],[99,3,58,1],[100,2,59,0],[100,11,59,9,"newChildrenMap"],[100,25,59,23,"newChildrenMap"],[100,26,59,23],[100,28,59,26],[101,4,60,4],[101,11,60,11],[101,15,60,15,"Map"],[101,18,60,18],[101,19,60,19],[101,20,60,20],[102,2,61,0],[103,0,61,1],[103,3]],"functionMap":{"names":["<global>","PresenceChild","useMemo$argument_0","onExitComplete","register","<anonymous>","presenceChildren.forEach$argument_0","React.useEffect$argument_0","newChildrenMap"],"mappings":"AAA;oBCO;0BCI;wBCK;SDkB;kBEC;mBCE,wDD;SFC;SDC;YCO;iCIC,8DJ;KDC;oBMK;KNE;CDE;AQC;CRE"},"hasCjsExports":false},"type":"js/module"}]}