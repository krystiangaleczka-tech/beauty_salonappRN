{"dependencies":[{"name":"./index.mjs","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":38,"index":38}}],"key":"cuwnQ/7dLRmHTfWH1o/Hl4dROAg=","exportNames":["*"],"imports":1}},{"name":"../utils/velocity-per-second.mjs","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":39},"end":{"line":2,"column":69,"index":108}}],"key":"7cU6cjYP6PsuiRpdIVOQqfAV7/E=","exportNames":["*"],"imports":1}},{"name":"framesync","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":3,"column":0,"index":109},"end":{"line":3,"column":41,"index":150}}],"key":"24PTcPTPyjPm5C9bri3IX7JZMU4=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  Object.defineProperty(exports, \"inertia\", {\n    enumerable: true,\n    get: function () {\n      return inertia;\n    }\n  });\n  var _indexMjs = require(_dependencyMap[0], \"./index.mjs\");\n  var _utilsVelocityPerSecondMjs = require(_dependencyMap[1], \"../utils/velocity-per-second.mjs\");\n  var _framesync = require(_dependencyMap[2], \"framesync\");\n  function inertia(_ref) {\n    var _ref$from = _ref.from,\n      from = _ref$from === void 0 ? 0 : _ref$from,\n      _ref$velocity = _ref.velocity,\n      velocity = _ref$velocity === void 0 ? 0 : _ref$velocity,\n      min = _ref.min,\n      max = _ref.max,\n      _ref$power = _ref.power,\n      power = _ref$power === void 0 ? 0.8 : _ref$power,\n      _ref$timeConstant = _ref.timeConstant,\n      timeConstant = _ref$timeConstant === void 0 ? 750 : _ref$timeConstant,\n      _ref$bounceStiffness = _ref.bounceStiffness,\n      bounceStiffness = _ref$bounceStiffness === void 0 ? 500 : _ref$bounceStiffness,\n      _ref$bounceDamping = _ref.bounceDamping,\n      bounceDamping = _ref$bounceDamping === void 0 ? 10 : _ref$bounceDamping,\n      _ref$restDelta = _ref.restDelta,\n      restDelta = _ref$restDelta === void 0 ? 1 : _ref$restDelta,\n      modifyTarget = _ref.modifyTarget,\n      driver = _ref.driver,\n      onUpdate = _ref.onUpdate,\n      onComplete = _ref.onComplete,\n      onStop = _ref.onStop;\n    var currentAnimation;\n    function isOutOfBounds(v) {\n      return min !== undefined && v < min || max !== undefined && v > max;\n    }\n    function boundaryNearest(v) {\n      if (min === undefined) return max;\n      if (max === undefined) return min;\n      return Math.abs(min - v) < Math.abs(max - v) ? min : max;\n    }\n    function startAnimation(options) {\n      currentAnimation === null || currentAnimation === void 0 ? void 0 : currentAnimation.stop();\n      currentAnimation = (0, _indexMjs.animate)(Object.assign(Object.assign({}, options), {\n        driver,\n        onUpdate: v => {\n          var _a;\n          onUpdate === null || onUpdate === void 0 ? void 0 : onUpdate(v);\n          (_a = options.onUpdate) === null || _a === void 0 ? void 0 : _a.call(options, v);\n        },\n        onComplete,\n        onStop\n      }));\n    }\n    function startSpring(options) {\n      startAnimation(Object.assign({\n        type: \"spring\",\n        stiffness: bounceStiffness,\n        damping: bounceDamping,\n        restDelta\n      }, options));\n    }\n    if (isOutOfBounds(from)) {\n      startSpring({\n        from,\n        velocity,\n        to: boundaryNearest(from)\n      });\n    } else {\n      var target = power * velocity + from;\n      if (typeof modifyTarget !== \"undefined\") target = modifyTarget(target);\n      var boundary = boundaryNearest(target);\n      var heading = boundary === min ? -1 : 1;\n      var prev;\n      var current;\n      var checkBoundary = v => {\n        prev = current;\n        current = v;\n        velocity = (0, _utilsVelocityPerSecondMjs.velocityPerSecond)(v - prev, (0, _framesync.getFrameData)().delta);\n        if (heading === 1 && v > boundary || heading === -1 && v < boundary) {\n          startSpring({\n            from: v,\n            to: boundary,\n            velocity\n          });\n        }\n      };\n      startAnimation({\n        type: \"decay\",\n        from,\n        velocity,\n        timeConstant,\n        power,\n        restDelta,\n        modifyTarget,\n        onUpdate: isOutOfBounds(target) ? checkBoundary : undefined\n      });\n    }\n    return {\n      stop: () => currentAnimation === null || currentAnimation === void 0 ? void 0 : currentAnimation.stop()\n    };\n  }\n});","lineCount":108,"map":[[7,2,65,0,"Object"],[7,8,65,0],[7,9,65,0,"defineProperty"],[7,23,65,0],[7,24,65,0,"exports"],[7,31,65,0],[8,4,65,0,"enumerable"],[8,14,65,0],[9,4,65,0,"get"],[9,7,65,0],[9,18,65,0,"get"],[9,19,65,0],[10,6,65,0],[10,13,65,9,"inertia"],[10,20,65,16],[11,4,65,16],[12,2,65,16],[13,2,1,0],[13,6,1,0,"_indexMjs"],[13,15,1,0],[13,18,1,0,"require"],[13,25,1,0],[13,26,1,0,"_dependencyMap"],[13,40,1,0],[14,2,2,0],[14,6,2,0,"_utilsVelocityPerSecondMjs"],[14,32,2,0],[14,35,2,0,"require"],[14,42,2,0],[14,43,2,0,"_dependencyMap"],[14,57,2,0],[15,2,3,0],[15,6,3,0,"_framesync"],[15,16,3,0],[15,19,3,0,"require"],[15,26,3,0],[15,27,3,0,"_dependencyMap"],[15,41,3,0],[16,2,5,0],[16,11,5,9,"inertia"],[16,18,5,16,"inertia"],[16,19,5,16,"_ref"],[16,23,5,16],[16,25,5,199],[17,4,5,199],[17,8,5,199,"_ref$from"],[17,17,5,199],[17,20,5,199,"_ref"],[17,24,5,199],[17,25,5,19,"from"],[17,29,5,23],[18,6,5,19,"from"],[18,10,5,23],[18,13,5,23,"_ref$from"],[18,22,5,23],[18,36,5,26],[18,37,5,27],[18,40,5,27,"_ref$from"],[18,49,5,27],[19,6,5,27,"_ref$velocity"],[19,19,5,27],[19,22,5,27,"_ref"],[19,26,5,27],[19,27,5,29,"velocity"],[19,35,5,37],[20,6,5,29,"velocity"],[20,14,5,37],[20,17,5,37,"_ref$velocity"],[20,30,5,37],[20,44,5,40],[20,45,5,41],[20,48,5,41,"_ref$velocity"],[20,61,5,41],[21,6,5,43,"min"],[21,9,5,46],[21,12,5,46,"_ref"],[21,16,5,46],[21,17,5,43,"min"],[21,20,5,46],[22,6,5,48,"max"],[22,9,5,51],[22,12,5,51,"_ref"],[22,16,5,51],[22,17,5,48,"max"],[22,20,5,51],[23,6,5,51,"_ref$power"],[23,16,5,51],[23,19,5,51,"_ref"],[23,23,5,51],[23,24,5,53,"power"],[23,29,5,58],[24,6,5,53,"power"],[24,11,5,58],[24,14,5,58,"_ref$power"],[24,24,5,58],[24,38,5,61],[24,41,5,64],[24,44,5,64,"_ref$power"],[24,54,5,64],[25,6,5,64,"_ref$timeConstant"],[25,23,5,64],[25,26,5,64,"_ref"],[25,30,5,64],[25,31,5,66,"timeConstant"],[25,43,5,78],[26,6,5,66,"timeConstant"],[26,18,5,78],[26,21,5,78,"_ref$timeConstant"],[26,38,5,78],[26,52,5,81],[26,55,5,84],[26,58,5,84,"_ref$timeConstant"],[26,75,5,84],[27,6,5,84,"_ref$bounceStiffness"],[27,26,5,84],[27,29,5,84,"_ref"],[27,33,5,84],[27,34,5,86,"bounceStiffness"],[27,49,5,101],[28,6,5,86,"bounceStiffness"],[28,21,5,101],[28,24,5,101,"_ref$bounceStiffness"],[28,44,5,101],[28,58,5,104],[28,61,5,107],[28,64,5,107,"_ref$bounceStiffness"],[28,84,5,107],[29,6,5,107,"_ref$bounceDamping"],[29,24,5,107],[29,27,5,107,"_ref"],[29,31,5,107],[29,32,5,109,"bounceDamping"],[29,45,5,122],[30,6,5,109,"bounceDamping"],[30,19,5,122],[30,22,5,122,"_ref$bounceDamping"],[30,40,5,122],[30,54,5,125],[30,56,5,127],[30,59,5,127,"_ref$bounceDamping"],[30,77,5,127],[31,6,5,127,"_ref$restDelta"],[31,20,5,127],[31,23,5,127,"_ref"],[31,27,5,127],[31,28,5,129,"restDelta"],[31,37,5,138],[32,6,5,129,"restDelta"],[32,15,5,138],[32,18,5,138,"_ref$restDelta"],[32,32,5,138],[32,46,5,141],[32,47,5,142],[32,50,5,142,"_ref$restDelta"],[32,64,5,142],[33,6,5,144,"modifyTarget"],[33,18,5,156],[33,21,5,156,"_ref"],[33,25,5,156],[33,26,5,144,"modifyTarget"],[33,38,5,156],[34,6,5,158,"driver"],[34,12,5,164],[34,15,5,164,"_ref"],[34,19,5,164],[34,20,5,158,"driver"],[34,26,5,164],[35,6,5,166,"onUpdate"],[35,14,5,174],[35,17,5,174,"_ref"],[35,21,5,174],[35,22,5,166,"onUpdate"],[35,30,5,174],[36,6,5,176,"onComplete"],[36,16,5,186],[36,19,5,186,"_ref"],[36,23,5,186],[36,24,5,176,"onComplete"],[36,34,5,186],[37,6,5,188,"onStop"],[37,12,5,194],[37,15,5,194,"_ref"],[37,19,5,194],[37,20,5,188,"onStop"],[37,26,5,194],[38,4,6,4],[38,8,6,8,"currentAnimation"],[38,24,6,24],[39,4,7,4],[39,13,7,13,"isOutOfBounds"],[39,26,7,26,"isOutOfBounds"],[39,27,7,27,"v"],[39,28,7,28],[39,30,7,30],[40,6,8,8],[40,13,8,16,"min"],[40,16,8,19],[40,21,8,24,"undefined"],[40,30,8,33],[40,34,8,37,"v"],[40,35,8,38],[40,38,8,41,"min"],[40,41,8,44],[40,45,8,50,"max"],[40,48,8,53],[40,53,8,58,"undefined"],[40,62,8,67],[40,66,8,71,"v"],[40,67,8,72],[40,70,8,75,"max"],[40,73,8,79],[41,4,9,4],[42,4,10,4],[42,13,10,13,"boundaryNearest"],[42,28,10,28,"boundaryNearest"],[42,29,10,29,"v"],[42,30,10,30],[42,32,10,32],[43,6,11,8],[43,10,11,12,"min"],[43,13,11,15],[43,18,11,20,"undefined"],[43,27,11,29],[43,29,12,12],[43,36,12,19,"max"],[43,39,12,22],[44,6,13,8],[44,10,13,12,"max"],[44,13,13,15],[44,18,13,20,"undefined"],[44,27,13,29],[44,29,14,12],[44,36,14,19,"min"],[44,39,14,22],[45,6,15,8],[45,13,15,15,"Math"],[45,17,15,19],[45,18,15,20,"abs"],[45,21,15,23],[45,22,15,24,"min"],[45,25,15,27],[45,28,15,30,"v"],[45,29,15,31],[45,30,15,32],[45,33,15,35,"Math"],[45,37,15,39],[45,38,15,40,"abs"],[45,41,15,43],[45,42,15,44,"max"],[45,45,15,47],[45,48,15,50,"v"],[45,49,15,51],[45,50,15,52],[45,53,15,55,"min"],[45,56,15,58],[45,59,15,61,"max"],[45,62,15,64],[46,4,16,4],[47,4,17,4],[47,13,17,13,"startAnimation"],[47,27,17,27,"startAnimation"],[47,28,17,28,"options"],[47,35,17,35],[47,37,17,37],[48,6,18,8,"currentAnimation"],[48,22,18,24],[48,27,18,29],[48,31,18,33],[48,35,18,37,"currentAnimation"],[48,51,18,53],[48,56,18,58],[48,61,18,63],[48,62,18,64],[48,65,18,67],[48,70,18,72],[48,71,18,73],[48,74,18,76,"currentAnimation"],[48,90,18,92],[48,91,18,93,"stop"],[48,95,18,97],[48,96,18,98],[48,97,18,99],[49,6,19,8,"currentAnimation"],[49,22,19,24],[49,25,19,27],[49,29,19,27,"animate"],[49,38,19,34],[49,39,19,34,"animate"],[49,46,19,34],[49,48,19,35,"Object"],[49,54,19,41],[49,55,19,42,"assign"],[49,61,19,48],[49,62,19,49,"Object"],[49,68,19,55],[49,69,19,56,"assign"],[49,75,19,62],[49,76,19,63],[49,77,19,64],[49,78,19,65],[49,80,19,67,"options"],[49,87,19,74],[49,88,19,75],[49,90,19,77],[50,8,19,79,"driver"],[50,14,19,85],[51,8,19,87,"onUpdate"],[51,16,19,95],[51,18,19,98,"v"],[51,19,19,99],[51,23,19,104],[52,10,20,16],[52,14,20,20,"_a"],[52,16,20,22],[53,10,21,16,"onUpdate"],[53,18,21,24],[53,23,21,29],[53,27,21,33],[53,31,21,37,"onUpdate"],[53,39,21,45],[53,44,21,50],[53,49,21,55],[53,50,21,56],[53,53,21,59],[53,58,21,64],[53,59,21,65],[53,62,21,68,"onUpdate"],[53,70,21,76],[53,71,21,77,"v"],[53,72,21,78],[53,73,21,79],[54,10,22,16],[54,11,22,17,"_a"],[54,13,22,19],[54,16,22,22,"options"],[54,23,22,29],[54,24,22,30,"onUpdate"],[54,32,22,38],[54,38,22,44],[54,42,22,48],[54,46,22,52,"_a"],[54,48,22,54],[54,53,22,59],[54,58,22,64],[54,59,22,65],[54,62,22,68],[54,67,22,73],[54,68,22,74],[54,71,22,77,"_a"],[54,73,22,79],[54,74,22,80,"call"],[54,78,22,84],[54,79,22,85,"options"],[54,86,22,92],[54,88,22,94,"v"],[54,89,22,95],[54,90,22,96],[55,8,23,12],[55,9,23,13],[56,8,23,15,"onComplete"],[56,18,23,25],[57,8,24,12,"onStop"],[58,6,24,19],[58,7,24,20],[58,8,24,21],[58,9,24,22],[59,4,25,4],[60,4,26,4],[60,13,26,13,"startSpring"],[60,24,26,24,"startSpring"],[60,25,26,25,"options"],[60,32,26,32],[60,34,26,34],[61,6,27,8,"startAnimation"],[61,20,27,22],[61,21,27,23,"Object"],[61,27,27,29],[61,28,27,30,"assign"],[61,34,27,36],[61,35,27,37],[62,8,27,39,"type"],[62,12,27,43],[62,14,27,45],[62,22,27,53],[63,8,27,55,"stiffness"],[63,17,27,64],[63,19,27,66,"bounceStiffness"],[63,34,27,81],[64,8,27,83,"damping"],[64,15,27,90],[64,17,27,92,"bounceDamping"],[64,30,27,105],[65,8,27,107,"restDelta"],[66,6,27,117],[66,7,27,118],[66,9,27,120,"options"],[66,16,27,127],[66,17,27,128],[66,18,27,129],[67,4,28,4],[68,4,29,4],[68,8,29,8,"isOutOfBounds"],[68,21,29,21],[68,22,29,22,"from"],[68,26,29,26],[68,27,29,27],[68,29,29,29],[69,6,30,8,"startSpring"],[69,17,30,19],[69,18,30,20],[70,8,30,22,"from"],[70,12,30,26],[71,8,30,28,"velocity"],[71,16,30,36],[72,8,30,38,"to"],[72,10,30,40],[72,12,30,42,"boundaryNearest"],[72,27,30,57],[72,28,30,58,"from"],[72,32,30,62],[73,6,30,64],[73,7,30,65],[73,8,30,66],[74,4,31,4],[74,5,31,5],[74,11,32,9],[75,6,33,8],[75,10,33,12,"target"],[75,16,33,18],[75,19,33,21,"power"],[75,24,33,26],[75,27,33,29,"velocity"],[75,35,33,37],[75,38,33,40,"from"],[75,42,33,44],[76,6,34,8],[76,10,34,12],[76,17,34,19,"modifyTarget"],[76,29,34,31],[76,34,34,36],[76,45,34,47],[76,47,35,12,"target"],[76,53,35,18],[76,56,35,21,"modifyTarget"],[76,68,35,33],[76,69,35,34,"target"],[76,75,35,40],[76,76,35,41],[77,6,36,8],[77,10,36,14,"boundary"],[77,18,36,22],[77,21,36,25,"boundaryNearest"],[77,36,36,40],[77,37,36,41,"target"],[77,43,36,47],[77,44,36,48],[78,6,37,8],[78,10,37,14,"heading"],[78,17,37,21],[78,20,37,24,"boundary"],[78,28,37,32],[78,33,37,37,"min"],[78,36,37,40],[78,39,37,43],[78,40,37,44],[78,41,37,45],[78,44,37,48],[78,45,37,49],[79,6,38,8],[79,10,38,12,"prev"],[79,14,38,16],[80,6,39,8],[80,10,39,12,"current"],[80,17,39,19],[81,6,40,8],[81,10,40,14,"checkBoundary"],[81,23,40,27],[81,26,40,31,"v"],[81,27,40,32],[81,31,40,37],[82,8,41,12,"prev"],[82,12,41,16],[82,15,41,19,"current"],[82,22,41,26],[83,8,42,12,"current"],[83,15,42,19],[83,18,42,22,"v"],[83,19,42,23],[84,8,43,12,"velocity"],[84,16,43,20],[84,19,43,23],[84,23,43,23,"velocityPerSecond"],[84,49,43,40],[84,50,43,40,"velocityPerSecond"],[84,67,43,40],[84,69,43,41,"v"],[84,70,43,42],[84,73,43,45,"prev"],[84,77,43,49],[84,79,43,51],[84,83,43,51,"getFrameData"],[84,93,43,63],[84,94,43,63,"getFrameData"],[84,106,43,63],[84,108,43,64],[84,109,43,65],[84,110,43,66,"delta"],[84,115,43,71],[84,116,43,72],[85,8,44,12],[85,12,44,17,"heading"],[85,19,44,24],[85,24,44,29],[85,25,44,30],[85,29,44,34,"v"],[85,30,44,35],[85,33,44,38,"boundary"],[85,41,44,46],[85,45,45,17,"heading"],[85,52,45,24],[85,57,45,29],[85,58,45,30],[85,59,45,31],[85,63,45,35,"v"],[85,64,45,36],[85,67,45,39,"boundary"],[85,75,45,48],[85,77,45,50],[86,10,46,16,"startSpring"],[86,21,46,27],[86,22,46,28],[87,12,46,30,"from"],[87,16,46,34],[87,18,46,36,"v"],[87,19,46,37],[88,12,46,39,"to"],[88,14,46,41],[88,16,46,43,"boundary"],[88,24,46,51],[89,12,46,53,"velocity"],[90,10,46,62],[90,11,46,63],[90,12,46,64],[91,8,47,12],[92,6,48,8],[92,7,48,9],[93,6,49,8,"startAnimation"],[93,20,49,22],[93,21,49,23],[94,8,50,12,"type"],[94,12,50,16],[94,14,50,18],[94,21,50,25],[95,8,51,12,"from"],[95,12,51,16],[96,8,52,12,"velocity"],[96,16,52,20],[97,8,53,12,"timeConstant"],[97,20,53,24],[98,8,54,12,"power"],[98,13,54,17],[99,8,55,12,"restDelta"],[99,17,55,21],[100,8,56,12,"modifyTarget"],[100,20,56,24],[101,8,57,12,"onUpdate"],[101,16,57,20],[101,18,57,22,"isOutOfBounds"],[101,31,57,35],[101,32,57,36,"target"],[101,38,57,42],[101,39,57,43],[101,42,57,46,"checkBoundary"],[101,55,57,59],[101,58,57,62,"undefined"],[102,6,58,8],[102,7,58,9],[102,8,58,10],[103,4,59,4],[104,4,60,4],[104,11,60,11],[105,6,61,8,"stop"],[105,10,61,12],[105,12,61,14,"stop"],[105,13,61,14],[105,18,61,20,"currentAnimation"],[105,34,61,36],[105,39,61,41],[105,43,61,45],[105,47,61,49,"currentAnimation"],[105,63,61,65],[105,68,61,70],[105,73,61,75],[105,74,61,76],[105,77,61,79],[105,82,61,84],[105,83,61,85],[105,86,61,88,"currentAnimation"],[105,102,61,104],[105,103,61,105,"stop"],[105,107,61,109],[105,108,61,110],[106,4,62,4],[106,5,62,5],[107,2,63,0],[108,0,63,1],[108,3]],"functionMap":{"names":["<global>","inertia","isOutOfBounds","boundaryNearest","startAnimation","Object.assign$argument_1.onUpdate","startSpring","checkBoundary","stop"],"mappings":"AAA;ACI;ICE;KDE;IEC;KFM;IGC;iGCE;aDI;KHE;IKC;KLE;8BMY;SNQ;cOa,iGP;CDE"},"hasCjsExports":false},"type":"js/module"}]}