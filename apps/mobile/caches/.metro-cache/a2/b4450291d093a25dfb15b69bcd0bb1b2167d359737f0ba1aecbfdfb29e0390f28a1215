{"dependencies":[{"name":"@babel/runtime/helpers/interopRequireDefault","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"kslwqCIsh6ew+I1KeA1rlVRjsAk=","exportNames":["*"]}},{"name":"expo-modules-core","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":68,"index":68}}],"key":"fU8WLIPqoAGygnPbZ/QJiQQfXEY=","exportNames":["*"]}},{"name":"./web/ImageRef","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":4,"column":0,"index":149},"end":{"line":4,"column":41,"index":190}}],"key":"DaLgxKDG0piIGP0khmDMhI0hUnM=","exportNames":["*"]}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  var _interopRequireDefault = require(_dependencyMap[0], \"@babel/runtime/helpers/interopRequireDefault\");\n  Object.defineProperty(exports, \"__esModule\", {\n    value: true\n  });\n  exports.default = void 0;\n  var _expoModulesCore = require(_dependencyMap[1], \"expo-modules-core\");\n  var _ImageRef = _interopRequireDefault(require(_dependencyMap[2], \"./web/ImageRef\"));\n  class ImageModule extends _expoModulesCore.NativeModule {\n    Image = _ImageRef.default;\n    async prefetch(urls, _, __) {\n      const urlsArray = Array.isArray(urls) ? urls : [urls];\n      return new Promise(resolve => {\n        let imagesLoaded = 0;\n        urlsArray.forEach(url => {\n          const img = new Image();\n          img.src = url;\n          img.onload = () => {\n            imagesLoaded++;\n            if (imagesLoaded === urlsArray.length) {\n              resolve(true);\n            }\n          };\n          img.onerror = () => resolve(false);\n        });\n      });\n    }\n    async clearMemoryCache() {\n      return false;\n    }\n    async clearDiskCache() {\n      return false;\n    }\n    async loadAsync(source) {\n      if (!source.uri) {\n        // TODO: Add support for sources without the uri, e.g. blurhash and thumbhash.\n        throw new Error('The image source must have the \"uri\" property defined');\n      }\n      const response = await fetch(source.uri, {\n        headers: source.headers\n      });\n      if (!response.ok) {\n        throw new Error(`Image request failed with the status code: ${response.status}`);\n      }\n      const blob = await response.blob();\n      const imageObjectUrl = URL.createObjectURL(blob);\n      const image = await loadImageElementAsync(imageObjectUrl);\n      return _ImageRef.default.init(imageObjectUrl, image.width, image.height, response.headers.get('Content-Type'));\n    }\n  }\n\n  /**\n   * Helper that resolves to an `<img />` element once it finishes loading the given source.\n   */\n  async function loadImageElementAsync(src) {\n    return new Promise((resolve, reject) => {\n      const image = document.createElement('img');\n      image.onload = () => resolve(image);\n      image.onerror = () => reject(new Error(`Unable to load the image from '${src}'`));\n      image.src = src;\n    });\n  }\n  var _default = exports.default = (0, _expoModulesCore.registerWebModule)(ImageModule, 'ExpoImage');\n});","lineCount":64,"map":[[7,2,1,0],[7,6,1,0,"_expoModulesCore"],[7,22,1,0],[7,25,1,0,"require"],[7,32,1,0],[7,33,1,0,"_dependencyMap"],[7,47,1,0],[8,2,4,0],[8,6,4,0,"_ImageRef"],[8,15,4,0],[8,18,4,0,"_interopRequireDefault"],[8,40,4,0],[8,41,4,0,"require"],[8,48,4,0],[8,49,4,0,"_dependencyMap"],[8,63,4,0],[9,2,6,0],[9,8,6,6,"ImageModule"],[9,19,6,17],[9,28,6,26,"NativeModule"],[9,57,6,38],[9,58,6,68],[10,4,7,2,"Image"],[10,9,7,7],[10,12,7,27,"ImageRefWeb"],[10,29,7,38],[11,4,9,2],[11,10,9,8,"prefetch"],[11,18,9,16,"prefetch"],[11,19,9,17,"urls"],[11,23,9,40],[11,25,9,42,"_"],[11,26,9,52],[11,28,9,54,"__"],[11,30,9,65],[11,32,9,85],[12,6,10,4],[12,12,10,10,"urlsArray"],[12,21,10,19],[12,24,10,22,"Array"],[12,29,10,27],[12,30,10,28,"isArray"],[12,37,10,35],[12,38,10,36,"urls"],[12,42,10,40],[12,43,10,41],[12,46,10,44,"urls"],[12,50,10,48],[12,53,10,51],[12,54,10,52,"urls"],[12,58,10,56],[12,59,10,57],[13,6,12,4],[13,13,12,11],[13,17,12,15,"Promise"],[13,24,12,22],[13,25,12,33,"resolve"],[13,32,12,40],[13,36,12,45],[14,8,13,6],[14,12,13,10,"imagesLoaded"],[14,24,13,22],[14,27,13,25],[14,28,13,26],[15,8,15,6,"urlsArray"],[15,17,15,15],[15,18,15,16,"forEach"],[15,25,15,23],[15,26,15,25,"url"],[15,29,15,28],[15,33,15,33],[16,10,16,8],[16,16,16,14,"img"],[16,19,16,17],[16,22,16,20],[16,26,16,24,"Image"],[16,31,16,29],[16,32,16,30],[16,33,16,31],[17,10,17,8,"img"],[17,13,17,11],[17,14,17,12,"src"],[17,17,17,15],[17,20,17,18,"url"],[17,23,17,21],[18,10,18,8,"img"],[18,13,18,11],[18,14,18,12,"onload"],[18,20,18,18],[18,23,18,21],[18,29,18,27],[19,12,19,10,"imagesLoaded"],[19,24,19,22],[19,26,19,24],[20,12,21,10],[20,16,21,14,"imagesLoaded"],[20,28,21,26],[20,33,21,31,"urlsArray"],[20,42,21,40],[20,43,21,41,"length"],[20,49,21,47],[20,51,21,49],[21,14,22,12,"resolve"],[21,21,22,19],[21,22,22,20],[21,26,22,24],[21,27,22,25],[22,12,23,10],[23,10,24,8],[23,11,24,9],[24,10,25,8,"img"],[24,13,25,11],[24,14,25,12,"onerror"],[24,21,25,19],[24,24,25,22],[24,30,25,28,"resolve"],[24,37,25,35],[24,38,25,36],[24,43,25,41],[24,44,25,42],[25,8,26,6],[25,9,26,7],[25,10,26,8],[26,6,27,4],[26,7,27,5],[26,8,27,6],[27,4,28,2],[28,4,30,2],[28,10,30,8,"clearMemoryCache"],[28,26,30,24,"clearMemoryCache"],[28,27,30,24],[28,29,30,45],[29,6,31,4],[29,13,31,11],[29,18,31,16],[30,4,32,2],[31,4,34,2],[31,10,34,8,"clearDiskCache"],[31,24,34,22,"clearDiskCache"],[31,25,34,22],[31,27,34,43],[32,6,35,4],[32,13,35,11],[32,18,35,16],[33,4,36,2],[34,4,38,2],[34,10,38,8,"loadAsync"],[34,19,38,17,"loadAsync"],[34,20,38,18,"source"],[34,26,38,37],[34,28,38,58],[35,6,39,4],[35,10,39,8],[35,11,39,9,"source"],[35,17,39,15],[35,18,39,16,"uri"],[35,21,39,19],[35,23,39,21],[36,8,40,6],[37,8,41,6],[37,14,41,12],[37,18,41,16,"Error"],[37,23,41,21],[37,24,41,22],[37,79,41,77],[37,80,41,78],[38,6,42,4],[39,6,43,4],[39,12,43,10,"response"],[39,20,43,18],[39,23,43,21],[39,29,43,27,"fetch"],[39,34,43,32],[39,35,43,33,"source"],[39,41,43,39],[39,42,43,40,"uri"],[39,45,43,43],[39,47,43,45],[40,8,44,6,"headers"],[40,15,44,13],[40,17,44,15,"source"],[40,23,44,21],[40,24,44,22,"headers"],[41,6,45,4],[41,7,45,5],[41,8,45,6],[42,6,47,4],[42,10,47,8],[42,11,47,9,"response"],[42,19,47,17],[42,20,47,18,"ok"],[42,22,47,20],[42,24,47,22],[43,8,48,6],[43,14,48,12],[43,18,48,16,"Error"],[43,23,48,21],[43,24,48,22],[43,70,48,68,"response"],[43,78,48,76],[43,79,48,77,"status"],[43,85,48,83],[43,87,48,85],[43,88,48,86],[44,6,49,4],[45,6,50,4],[45,12,50,10,"blob"],[45,16,50,14],[45,19,50,17],[45,25,50,23,"response"],[45,33,50,31],[45,34,50,32,"blob"],[45,38,50,36],[45,39,50,37],[45,40,50,38],[46,6,51,4],[46,12,51,10,"imageObjectUrl"],[46,26,51,24],[46,29,51,27,"URL"],[46,32,51,30],[46,33,51,31,"createObjectURL"],[46,48,51,46],[46,49,51,47,"blob"],[46,53,51,51],[46,54,51,52],[47,6,52,4],[47,12,52,10,"image"],[47,17,52,15],[47,20,52,18],[47,26,52,24,"loadImageElementAsync"],[47,47,52,45],[47,48,52,46,"imageObjectUrl"],[47,62,52,60],[47,63,52,61],[48,6,54,4],[48,13,54,11,"ImageRefWeb"],[48,30,54,22],[48,31,54,23,"init"],[48,35,54,27],[48,36,55,6,"imageObjectUrl"],[48,50,55,20],[48,52,56,6,"image"],[48,57,56,11],[48,58,56,12,"width"],[48,63,56,17],[48,65,57,6,"image"],[48,70,57,11],[48,71,57,12,"height"],[48,77,57,18],[48,79,58,6,"response"],[48,87,58,14],[48,88,58,15,"headers"],[48,95,58,22],[48,96,58,23,"get"],[48,99,58,26],[48,100,58,27],[48,114,58,41],[48,115,59,4],[48,116,59,5],[49,4,60,2],[50,2,61,0],[52,2,63,0],[53,0,64,0],[54,0,65,0],[55,2,66,0],[55,17,66,15,"loadImageElementAsync"],[55,38,66,36,"loadImageElementAsync"],[55,39,66,37,"src"],[55,42,66,48],[55,44,66,77],[56,4,67,2],[56,11,67,9],[56,15,67,13,"Promise"],[56,22,67,20],[56,23,67,21],[56,24,67,22,"resolve"],[56,31,67,29],[56,33,67,31,"reject"],[56,39,67,37],[56,44,67,42],[57,6,68,4],[57,12,68,10,"image"],[57,17,68,15],[57,20,68,18,"document"],[57,28,68,26],[57,29,68,27,"createElement"],[57,42,68,40],[57,43,68,41],[57,48,68,46],[57,49,68,47],[58,6,70,4,"image"],[58,11,70,9],[58,12,70,10,"onload"],[58,18,70,16],[58,21,70,19],[58,27,70,25,"resolve"],[58,34,70,32],[58,35,70,33,"image"],[58,40,70,38],[58,41,70,39],[59,6,71,4,"image"],[59,11,71,9],[59,12,71,10,"onerror"],[59,19,71,17],[59,22,71,20],[59,28,71,26,"reject"],[59,34,71,32],[59,35,71,33],[59,39,71,37,"Error"],[59,44,71,42],[59,45,71,43],[59,79,71,77,"src"],[59,82,71,80],[59,85,71,83],[59,86,71,84],[59,87,71,85],[60,6,72,4,"image"],[60,11,72,9],[60,12,72,10,"src"],[60,15,72,13],[60,18,72,16,"src"],[60,21,72,19],[61,4,73,2],[61,5,73,3],[61,6,73,4],[62,2,74,0],[63,2,74,1],[63,6,74,1,"_default"],[63,14,74,1],[63,17,74,1,"exports"],[63,24,74,1],[63,25,74,1,"default"],[63,32,74,1],[63,35,76,15],[63,39,76,15,"registerWebModule"],[63,73,76,32],[63,75,76,33,"ImageModule"],[63,86,76,44],[63,88,76,46],[63,99,76,57],[63,100,76,58],[64,0,76,58],[64,3]],"functionMap":{"names":["<global>","ImageModule","prefetch","Promise$argument_0","urlsArray.forEach$argument_0","img.onload","img.onerror","clearMemoryCache","clearDiskCache","loadAsync","loadImageElementAsync","image.onload","image.onerror"],"mappings":"AAA;ACK;ECG;gCCG;wBCG;qBCG;SDM;sBEC,oBF;ODC;KDC;GDC;EME;GNE;EOE;GPE;EQE;GRsB;CDC;AUK;qBPC;mBQG,oBR;oBSC,iET;GOE;CVC"}},"type":"js/module"}]}